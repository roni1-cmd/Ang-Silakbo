<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>ANG SILAKBO - Talk to Coral</title>
  <link rel="icon" href="SILAKBO (1).png">
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-analytics-compat.js"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&family=Playfair+Display:wght@400;500;600;700&family=Merriweather:wght@300;400;700&family=Source+Sans+Pro:wght@300;400;600;700&display=swap" rel="stylesheet">
  <style>
    :root {
      --primary-color: #e65100;
      --primary-light: #ff833a;
      --primary-dark: #ac1900;
      --white: #ffffff;
      --light-gray: #f8f9fa;
      --medium-gray: #e0e0e0;
      --dark-gray: #424242;
      --sidebar-width: 280px;
      --box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
      --transition: all 0.3s ease;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      background-color: var(--light-gray);
      color: var(--dark-gray);
      display: flex;
      height: 100vh;
      overflow: hidden;
      font-family: 'Source Sans Pro', sans-serif;
    }

    h1, h2, h3, h4, h5, h6 {
      font-family: 'Poppins', sans-serif;
    }

    /* Scrollbar styling */
    ::-webkit-scrollbar {
      width: 6px;
      height: 6px;
    }

    ::-webkit-scrollbar-track {
      background: transparent;
    }

    ::-webkit-scrollbar-thumb {
      background: rgba(230, 81, 0, 0.3);
      border-radius: 4px;
    }

    ::-webkit-scrollbar-thumb:hover {
      background: rgba(230, 81, 0, 0.5);
    }

    /* Sidebar */
    .sidebar {
      width: var(--sidebar-width);
      background: linear-gradient(135deg, var(--primary-color), var(--primary-dark));
      color: var(--white);
      display: flex;
      flex-direction: column;
      padding: 24px;
      transition: var(--transition);
      z-index: 100;
      box-shadow: var(--box-shadow);
      height: 100vh;
      position: relative;
      overflow: hidden;
    }

    .sidebar::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: url("data:image/svg+xml,%3Csvg width='100' height='100' viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M11 18c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm48 25c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm-43-7c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm63 31c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM34 90c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm56-76c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM12 86c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm28-65c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm23-11c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm-6 60c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm29 22c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zM32 63c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm57-13c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm-9-21c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM60 91c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM35 41c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM12 60c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2z' fill='%23ffffff' fill-opacity='0.05' fill-rule='evenodd'/%3E%3C/svg%3E");
      opacity: 0.5;
      z-index: -1;
    }

    .logo-container {
      display: flex;
      align-items: center;
      margin-bottom: 28px;
    }

    .logo {
      width: 40px;
      height: 40px;
      margin-right: 12px;
      border-radius: 10px;
      object-fit: cover;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
      /* Removed animation and border */
    }

    .logo-text {
      font-family: 'Poppins', sans-serif;
      font-size: 24px;
      font-weight: 700;
      letter-spacing: 0.5px;
      text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }

    .new-chat-btn {
      background-color: rgba(255, 255, 255, 0.15);
      backdrop-filter: blur(10px);
      color: var(--white);
      border: 1px solid rgba(255, 255, 255, 0.2);
      border-radius: 12px;
      padding: 14px;
      font-family: 'Poppins', sans-serif;
      font-weight: 600;
      font-size: 14px;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      margin-bottom: 24px;
      transition: var(--transition);
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    }

    .new-chat-btn:hover {
      background-color: rgba(255, 255, 255, 0.25);
      transform: translateY(-2px);
      box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
    }

    .new-chat-btn i {
      margin-right: 10px;
    }

    .back-home-btn {
      background-color: rgba(255, 255, 255, 0.15);
      backdrop-filter: blur(10px);
      color: var(--white);
      border: 1px solid rgba(255, 255, 255, 0.2);
      border-radius: 12px;
      padding: 14px;
      font-family: 'Poppins', sans-serif;
      font-weight: 600;
      font-size: 14px;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      margin-bottom: 24px;
      transition: var(--transition);
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    }

    .back-home-btn:hover {
      background-color: rgba(255, 255, 255, 0.25);
      transform: translateY(-2px);
      box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
    }

    .back-home-btn i {
      margin-right: 10px;
    }

    .chat-history {
      flex: 1;
      overflow-y: auto;
      margin-bottom: 20px;
      padding-right: 6px;
    }

    .chat-history::-webkit-scrollbar {
      width: 4px;
    }

    .chat-history::-webkit-scrollbar-thumb {
      background-color: rgba(255, 255, 255, 0.2);
      border-radius: 4px;
    }

    .chat-item {
      padding: 12px 14px;
      border-radius: 10px;
      margin-bottom: 8px;
      cursor: pointer;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      transition: var(--transition);
      font-family: 'Source Sans Pro', sans-serif;
      font-size: 14px;
      border: 1px solid rgba(255, 255, 255, 0.1);
      background-color: rgba(255, 255, 255, 0.05);
    }

    .chat-item:hover {
      background-color: rgba(255, 255, 255, 0.15);
      transform: translateX(2px);
    }

    .user-profile {
      display: flex;
      align-items: center;
      padding: 12px;
      border-radius: 12px;
      cursor: pointer;
      transition: var(--transition);
      background-color: rgba(255, 255, 255, 0.1);
      border: 1px solid rgba(255, 255, 255, 0.15);
    }

    .user-profile:hover {
      background-color: rgba(255, 255, 255, 0.2);
    }

    .user-avatar {
      width: 36px;
      height: 36px;
      border-radius: 50%;
      margin-right: 12px;
      flex-shrink: 0;
      box-shadow: 0 2px 6px rgba(0, 0, 0, 0.15);
      border: 2px solid rgba(255, 255, 255, 0.5);
    }

    .user-name {
      font-family: 'Source Sans Pro', sans-serif;
      font-weight: 600;
      font-size: 14px;
      flex: 1;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    /* Main Content */
    .main-content {
      flex: 1;
      display: flex;
      flex-direction: column;
      position: relative;
      height: 100vh;
      overflow: hidden;
      background-color: var(--white);
    }

    .mobile-header {
      display: none;
      background-color: var(--white);
      padding: 14px 18px;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
      align-items: center;
      z-index: 10;
    }

    .menu-toggle {
      background: none;
      border: none;
      font-size: 22px;
      cursor: pointer;
      color: var(--primary-color);
      margin-right: 16px;
      width: 40px;
      height: 40px;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 50%;
      transition: var(--transition);
    }

    .menu-toggle:hover {
      background-color: var(--light-gray);
    }

    .mobile-logo-container {
      display: flex;
      align-items: center;
    }

    .mobile-logo {
      width: 32px;
      height: 32px;
      margin-right: 10px;
      border-radius: 8px;
    }

    .mobile-logo-text {
      font-family: 'Poppins', sans-serif;
      font-size: 20px;
      font-weight: 700;
      color: var(--primary-color);
    }

    /* Chat Area */
    .chat-container {
      flex: 1;
      display: flex;
      flex-direction: column;
      padding: 20px;
      overflow-y: auto;
      background-color: var(--white);
    }

    .welcome-screen {
      flex: 1;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      text-align: center;
      padding: 20px;
      min-height: 0;
      overflow-y: auto;
    }

    .welcome-logo {
      width: 120px;
      height: 120px;
      margin-bottom: 30px;
      border-radius: 20px;
      box-shadow: 0 10px 30px rgba(230, 81, 0, 0.2);
      /* Removed animation and border */
    }

    .welcome-title {
      font-family: 'Poppins', sans-serif;
      font-size: 36px;
      font-weight: 700;
      color: var(--primary-color);
      margin-bottom: 16px;
      letter-spacing: 0.5px;
      min-height: 54px;
      width: 100%;
      overflow: visible; /* Ensure text is fully visible */
    }

    .welcome-subtitle {
      font-family: 'Playfair Display', serif;
      font-size: 18px;
      color: var(--dark-gray);
      margin-bottom: 40px;
      max-width: 600px;
      line-height: 1.6;
    }

    .examples-container {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 20px;
      width: 100%;
      max-width: 900px;
    }

    .example-card {
      background-color: var(--light-gray);
      padding: 20px;
      border-radius: 16px;
      cursor: pointer;
      transition: var(--transition);
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
      border: 1px solid var(--medium-gray);
      position: relative;
      overflow: hidden;
    }

    .example-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 4px;
      height: 100%;
      background: linear-gradient(to bottom, var(--primary-color), var(--primary-dark));
      border-radius: 4px 0 0 4px;
    }

    .example-card:hover {
      background-color: var(--white);
      transform: translateY(-5px);
      box-shadow: 0 8px 24px rgba(0, 0, 0, 0.1);
    }

    .example-title {
      font-family: 'Poppins', sans-serif;
      font-weight: 600;
      font-size: 16px;
      margin-bottom: 10px;
      color: var(--primary-color);
    }

    .example-text {
      font-family: 'Merriweather', serif;
      color: var(--dark-gray);
      font-size: 14px;
      line-height: 1.6;
    }

    .message-container {
      display: flex;
      flex-direction: column;
      gap: 24px;
      width: 100%;
    }

    .message {
      display: flex;
      max-width: 100%;
    }

    .message-avatar {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      margin-right: 16px;
      flex-shrink: 0;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
      border: 2px solid var(--light-gray);
    }

    .message-content {
      flex: 1;
      padding-right: 40px;
    }

    .message-sender {
      font-family: 'Poppins', sans-serif;
      font-weight: 600;
      margin-bottom: 6px;
      font-size: 15px;
    }

    .message-text {
      font-family: 'Source Sans Pro', sans-serif;
      line-height: 1.7;
      white-space: pre-wrap;
      font-size: 15px;
    }

    /* User message on right, AI on left */
    .user-message {
      align-self: flex-end;
      flex-direction: row-reverse;
      max-width: 80%;
    }

    .user-message .message-avatar {
      margin-right: 0;
      margin-left: 16px;
    }

    .user-message .message-content {
      background-color: var(--primary-light);
      color: var(--white);
      padding: 16px;
      border-radius: 16px 0 16px 16px;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
    }

    .user-message .message-sender {
      color: rgba(255, 255, 255, 0.9);
    }

    .bot-message {
      align-self: flex-start;
      max-width: 80%;
    }

    .bot-message .message-content {
      background-color: var(--light-gray);
      padding: 16px;
      border-radius: 0 16px 16px 16px;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
    }

    .bot-message .message-sender {
      color: var(--primary-dark);
    }

    .bot-message .message-text {
      font-family: 'Merriweather', serif;
      font-size: 15px;
      line-height: 1.8;
    }

    /* Input Area */
    .input-container {
      padding: 20px;
      background-color: var(--white);
      border-top: 1px solid var(--medium-gray);
      position: relative;
    }

    .input-wrapper {
      position: relative;
      border-radius: 16px;
      border: 1px solid var(--medium-gray);
      background-color: var(--white);
      overflow: hidden;
      box-shadow: 0 2px 12px rgba(0, 0, 0, 0.05);
      transition: var(--transition);
    }

    .input-wrapper:focus-within {
      box-shadow: 0 4px 20px rgba(230, 81, 0, 0.15);
      border-color: var(--primary-light);
    }

    #userInput {
      width: 100%;
      padding: 16px;
      padding-right: 60px;
      border: none;
      outline: none;
      resize: none;
      font-family: 'Source Sans Pro', sans-serif;
      font-size: 16px;
      max-height: 150px;
      min-height: 56px;
    }

    .send-btn {
      position: absolute;
      right: 12px;
      bottom: 10px;
      background: linear-gradient(135deg, var(--primary-color), var(--primary-dark));
      color: var(--white);
      border: none;
      border-radius: 50%;
      width: 38px;
      height: 38px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: var(--transition);
      box-shadow: 0 2px 8px rgba(230, 81, 0, 0.2);
    }

    .send-btn:hover {
      transform: scale(1.1);
      box-shadow: 0 4px 12px rgba(230, 81, 0, 0.3);
    }

    .send-btn:disabled {
      background: linear-gradient(135deg, #9e9e9e, #757575);
      cursor: not-allowed;
      transform: none;
      box-shadow: none;
    }

    .powered-by {
      display: flex;
      align-items: center;
      justify-content: center;
      margin-top: 14px;
      font-family: 'Source Sans Pro', sans-serif;
      font-size: 13px;
      color: var(--dark-gray);
    }

    .powered-by span {
      margin-right: 10px;
    }

    .ai-logos {
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .ai-logo {
      width: 20px;
      height: 20px;
      border-radius: 4px;
      transition: var(--transition);
    }
    
    .ai-logo:hover {
      transform: scale(1.2);
    }

    .about-link {
      margin-left: 12px;
      color: var(--primary-color);
      text-decoration: underline;
      cursor: pointer;
      font-weight: 600;
      transition: var(--transition);
    }

    .about-link:hover {
      color: var(--primary-dark);
    }

    /* Footer */
    .footer {
      padding: 14px;
      text-align: center;
      font-family: 'Source Sans Pro', sans-serif;
      font-size: 13px;
      color: var(--dark-gray);
      background-color: var(--light-gray);
      border-top: 1px solid var(--medium-gray);
    }

    .footer p {
      margin-bottom: 4px;
    }

    /* Auth Modal */
    .auth-modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.5);
      backdrop-filter: blur(5px);
      z-index: 1000;
      align-items: center;
      justify-content: center;
    }

    .auth-content {
      background-color: var(--white);
      padding: 32px;
      border-radius: 20px;
      width: 90%;
      max-width: 400px;
      box-shadow: 0 15px 40px rgba(0, 0, 0, 0.2);
      animation: modalFadeIn 0.3s ease-out;
    }

    @keyframes modalFadeIn {
      from {
        opacity: 0;
        transform: translateY(20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .auth-header {
      text-align: center;
      margin-bottom: 28px;
    }

    .auth-title {
      font-family: 'Poppins', sans-serif;
      font-size: 26px;
      font-weight: 700;
      color: var(--primary-color);
      margin-bottom: 10px;
    }

    .auth-subtitle {
      font-family: 'Playfair Display', serif;
      color: var(--dark-gray);
      font-size: 16px;
    }

    .auth-buttons {
      display: flex;
      flex-direction: column;
      gap: 16px;
    }

    .auth-btn {
      display: flex;
      align-items: center;
      padding: 14px 16px;
      border-radius: 12px;
      border: 1px solid var(--medium-gray);
      background-color: var(--white);
      cursor: pointer;
      transition: var(--transition);
      font-family: 'Source Sans Pro', sans-serif;
    }

    .auth-btn:hover {
      background-color: var(--light-gray);
      transform: translateY(-3px);
      box-shadow: 0 6px 15px rgba(0, 0, 0, 0.1);
    }

    .auth-btn img {
      width: 24px;
      height: 24px;
      margin-right: 16px;
    }

    .auth-btn span {
      font-weight: 600;
      font-size: 15px;
    }

    .auth-close {
      text-align: center;
      margin-top: 24px;
      color: var(--dark-gray);
      cursor: pointer;
      font-family: 'Source Sans Pro', sans-serif;
      font-size: 15px;
      transition: var(--transition);
      padding: 8px;
    }

    .auth-close:hover {
      color: var(--primary-color);
      text-decoration: underline;
    }

    /* About Modal */
    .about-modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.5);
      backdrop-filter: blur(5px);
      z-index: 1000;
      align-items: center;
      justify-content: center;
      overflow: hidden;
    }

    .about-content {
      background-color: var(--white);
      padding: 32px;
      border-radius: 20px;
      width: 90%;
      max-width: 700px; /* Increased max-width for more content */
      max-height: 85vh;
      box-shadow: 0 15px 40px rgba(0, 0, 0, 0.2);
      animation: modalFadeIn 0.3s ease-out;
      position: relative;
      overflow-y: auto;
    }

    .about-close {
      position: absolute;
      top: 20px;
      right: 20px;
      background: none;
      border: none;
      font-size: 24px;
      color: var(--dark-gray);
      cursor: pointer;
      transition: var(--transition);
      width: 36px;
      height: 36px;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 50%;
      z-index: 10;
    }

    .about-close:hover {
      background-color: var(--light-gray);
      color: var(--primary-color);
    }

    .about-header {
      text-align: center;
      margin-bottom: 24px;
      padding-bottom: 16px;
      border-bottom: 1px solid var(--medium-gray);
    }

    .about-title {
      font-family: 'Poppins', sans-serif;
      font-size: 28px;
      font-weight: 700;
      color: var(--primary-color);
      margin-bottom: 8px;
    }

    .about-subtitle {
      font-family: 'Playfair Display', serif;
      color: var(--dark-gray);
      font-size: 16px;
    }

    .about-body {
      margin-bottom: 24px;
    }

    .about-section {
      margin-bottom: 28px; /* Increased spacing between sections */
      padding-bottom: 20px;
      border-bottom: 1px dashed var(--medium-gray);
    }

    .about-section:last-child {
      border-bottom: none;
    }

    .about-section-title {
      font-family: 'Poppins', sans-serif;
      font-size: 20px; /* Increased font size */
      font-weight: 600;
      color: var(--primary-dark);
      margin-bottom: 12px;
      display: flex;
      align-items: center;
    }

    .about-section-title i {
      margin-right: 10px;
      color: var(--primary-color);
    }

    .about-text {
      font-family: 'Source Sans Pro', sans-serif;
      font-size: 15px;
      line-height: 1.7;
      color: var(--dark-gray);
      margin-bottom: 16px;
    }

    /* New styles for enhanced about section */
    .about-text-highlight {
      font-weight: 600;
      color: var(--primary-color);
    }

    .about-list {
      margin: 15px 0;
      padding-left: 20px;
    }

    .about-list li {
      margin-bottom: 10px;
      position: relative;
      padding-left: 15px;
    }

    .about-list li::before {
      content: "•";
      color: var(--primary-color);
      font-weight: bold;
      position: absolute;
      left: 0;
    }

    .ai-providers {
      display: flex;
      flex-wrap: wrap;
      gap: 24px;
      margin-top: 20px;
      justify-content: center;
    }

    .ai-provider {
      display: flex;
      flex-direction: column;
      align-items: center;
      width: calc(33.333% - 16px);
      text-align: center;
    }

    .provider-logo {
      width: 60px;
      height: 60px;
      border-radius: 12px;
      margin-bottom: 12px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
      transition: var(--transition);
    }

    .provider-logo:hover {
      transform: scale(1.1);
      box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15);
    }

    .provider-name {
      font-family: 'Poppins', sans-serif;
      font-weight: 600;
      font-size: 16px;
      color: var(--primary-color);
      margin-bottom: 6px;
    }

    .provider-desc {
      font-family: 'Source Sans Pro', sans-serif;
      font-size: 14px;
      color: var(--dark-gray);
      line-height: 1.5;
    }

    /* Stats section */
    .stats-container {
      display: flex;
      justify-content: space-between;
      margin-top: 20px;
      margin-bottom: 30px;
      flex-wrap: wrap;
      gap: 15px;
    }

    .stat-item {
      background-color: var(--light-gray);
      border-radius: 12px;
      padding: 16px;
      flex: 1;
      min-width: 120px;
      text-align: center;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.05);
      border: 1px solid var(--medium-gray);
      transition: var(--transition);
    }

    .stat-item:hover {
      transform: translateY(-3px);
      box-shadow: 0 6px 15px rgba(0, 0, 0, 0.1);
    }

    .stat-value {
      font-family: 'Poppins', sans-serif;
      font-size: 24px;
      font-weight: 700;
      color: var(--primary-color);
      margin-bottom: 5px;
    }

    .stat-label {
      font-family: 'Source Sans Pro', sans-serif;
      font-size: 13px;
      color: var(--dark-gray);
    }

    /* Version badge */
    .version-badge {
      position: absolute;
      top: 20px;
      right: 70px;
      background-color: var(--primary-light);
      color: var(--white);
      font-family: 'Poppins', sans-serif;
      font-size: 12px;
      font-weight: 600;
      padding: 4px 10px;
      border-radius: 20px;
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
    }

    /* Professional animations - removed float animation */
    @keyframes fadeInUp {
      from {
        opacity: 0;
        transform: translateY(20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    @keyframes slideInLeft {
      from {
        opacity: 0;
        transform: translateX(-30px);
      }
      to {
        opacity: 1;
        transform: translateX(0);
      }
    }

    @keyframes slideInRight {
      from {
        opacity: 0;
        transform: translateX(30px);
      }
      to {
        opacity: 1;
        transform: translateX(0);
      }
    }

    .animate-fade-in-up {
      animation: fadeInUp 0.5s ease-out forwards;
    }

    .animate-slide-in-left {
      animation: slideInLeft 0.5s ease-out forwards;
    }

    .animate-slide-in-right {
      animation: slideInRight 0.5s ease-out forwards;
    }

    /* Language selector enhanced */
    .language-selector {
      position: absolute;
      top: 20px;
      left: 20px;
      z-index: 5;
      background-color: var(--white);
      border-radius: 8px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
      padding: 8px;
      display: flex;
      align-items: center;
      cursor: pointer;
      transition: var(--transition);
      border: 1px solid var(--medium-gray);
    }

    .language-selector:hover {
      box-shadow: 0 6px 16px rgba(0, 0, 0, 0.15);
      transform: translateY(-2px);
    }

    .language-selector i {
      margin-right: 6px;
      color: var(--primary-color);
    }

    .language-selector span {
      font-family: 'Source Sans Pro', sans-serif;
      font-size: 14px;
      font-weight: 600;
    }

    .language-dropdown {
      position: absolute;
      top: 100%;
      left: 0;
      background-color: var(--white);
      border-radius: 8px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
      padding: 8px 0;
      width: 180px;
      display: none;
      z-index: 10;
      margin-top: 8px;
      border: 1px solid var(--medium-gray);
      animation: fadeInUp 0.3s ease-out forwards;
    }

    .language-option {
      padding: 8px 16px;
      font-family: 'Source Sans Pro', sans-serif;
      font-size: 14px;
      cursor: pointer;
      transition: var(--transition);
      display: flex;
      align-items: center;
    }

    .language-option:hover {
      background-color: var(--light-gray);
    }

    .language-option.active {
      background-color: rgba(230, 81, 0, 0.1);
      color: var(--primary-color);
      font-weight: 600;
    }

    .language-flag {
      width: 20px;
      height: 15px;
      margin-right: 10px;
      border-radius: 2px;
      object-fit: cover;
    }

    /* Team section for About modal */
    .team-section {
      margin-top: 30px;
    }

    .team-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
      gap: 20px;
      margin-top: 20px;
    }

    .team-member {
      display: flex;
      flex-direction: column;
      align-items: center;
      text-align: center;
    }

    .team-member-photo {
      width: 80px;
      height: 80px;
      border-radius: 50%;
      object-fit: cover;
      margin-bottom: 10px;
      border: 3px solid var(--primary-light);
    }

    .team-member-name {
      font-family: 'Poppins', sans-serif;
      font-weight: 600;
      font-size: 16px;
      color: var(--primary-color);
      margin-bottom: 5px;
    }

    .team-member-role {
      font-family: 'Source Sans Pro', sans-serif;
      font-size: 14px;
      color: var(--dark-gray);
    }

    /* Features section */
    .feature-badge {
      display: inline-flex;
      align-items: center;
      background-color: rgba(230, 81, 0, 0.1);
      color: var(--primary-color);
      font-family: 'Poppins', sans-serif;
      font-size: 12px;
      font-weight: 600;
      padding: 4px 10px;
      border-radius: 20px;
      margin-right: 8px;
      margin-bottom: 8px;
    }

    .feature-badge i {
      margin-right: 5px;
      font-size: 10px;
    }

    .features-container {
      display: flex;
      flex-wrap: wrap;
      margin-top: 10px;
      margin-bottom: 20px;
    }

    /* Timeline for About section */
    .timeline {
      position: relative;
      max-width: 1200px;
      margin: 20px auto;
    }

    .timeline::after {
      content: '';
      position: absolute;
      width: 3px;
      background-color: var(--primary-light);
      top: 0;
      bottom: 0;
      left: 50%;
      margin-left: -1.5px;
    }

    .timeline-item {
      padding: 10px 40px;
      position: relative;
      width: 50%;
      box-sizing: border-box;
    }

    .timeline-item::after {
      content: '';
      position: absolute;
      width: 20px;
      height: 20px;
      right: -10px;
      background-color: var(--white);
      border: 3px solid var(--primary-color);
      top: 15px;
      border-radius: 50%;
      z-index: 1;
    }

    .timeline-left {
      left: 0;
    }

    .timeline-right {
      left: 50%;
    }

    .timeline-right::after {
      left: -10px;
    }

    .timeline-content {
      padding: 15px;
      background-color: var(--light-gray);
      position: relative;
      border-radius: 10px;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.05);
    }

    .timeline-date {
      font-family: 'Poppins', sans-serif;
      font-weight: 600;
      color: var(--primary-color);
      margin-bottom: 5px;
    }

    /* Responsive Design */
    @media (max-width: 768px) {
      .sidebar {
        position: fixed;
        top: 0;
        left: 0;
        height: 100%;
        transform: translateX(-100%);
        z-index: 1000;
      }

      .sidebar.active {
        transform: translateX(0);
      }

      .mobile-header {
        display: flex;
      }

      .main-content {
        padding-top: 0;
      }

      .examples-container {
        grid-template-columns: 1fr;
      }

      .message-content {
        padding-right: 0;
      }

      .welcome-title {
        font-size: 28px;
        padding: 0 10px; /* Add padding to ensure text is visible */
        overflow-wrap: break-word; /* Allow text to break */
        word-wrap: break-word;
      }

      .welcome-subtitle {
        font-size: 16px;
        padding: 0 10px;
      }

      .welcome-logo {
        width: 90px;
        height: 90px;
      }

      .ai-provider {
        width: 100%;
        margin-bottom: 20px;
      }

      .user-message, .bot-message {
        max-width: 90%;
      }

      .timeline::after {
        left: 31px;
      }

      .timeline-item {
        width: 100%;
        padding-left: 70px;
        padding-right: 25px;
      }

      .timeline-right {
        left: 0;
      }

      .timeline-item::after {
        left: 21px;
      }

      .timeline-right::after {
        left: 21px;
      }
    }

    @media (max-width: 480px) {
      .auth-content, .about-content {
        padding: 24px;
      }

      .welcome-title {
        font-size: 24px;
      }

      .example-card {
        padding: 16px;
      }

      .user-message, .bot-message {
        max-width: 95%;
      }

      .team-grid {
        grid-template-columns: 1fr;
      }
    }

    /* Loading Animation */
    .typing-indicator {
      display: flex;
      align-items: center;
      margin-top: 8px;
    }

    .typing-dot {
      width: 8px;
      height: 8px;
      background-color: var(--primary-color);
      border-radius: 50%;
      margin: 0 3px;
      animation: typing-animation 1.4s infinite ease-in-out;
    }

    .typing-dot:nth-child(1) {
      animation-delay: 0s;
    }

    .typing-dot:nth-child(2) {
      animation-delay: 0.2s;
    }

    .typing-dot:nth-child(3) {
      animation-delay: 0.4s;
    }

    @keyframes typing-animation {
      0%, 60%, 100% {
        transform: translateY(0);
        opacity: 0.6;
      }
      30% {
        transform: translateY(-6px);
        opacity: 1;
      }
    }

    /* Typing animation for welcome message */
    .typing-text {
      display: inline-block;
      border-right: 3px solid var(--primary-color);
      white-space: nowrap;
      overflow: hidden;
      animation: typing 3.5s steps(40, end), blink-caret 0.75s step-end infinite;
    }

    @keyframes typing {
      from { width: 0 }
      to { width: 100% }
    }

    @keyframes blink-caret {
      from, to { border-color: transparent }
      50% { border-color: var(--primary-color) }
    }
  </style>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
  <!-- Sidebar -->
  <div class="sidebar" id="sidebar">
    <div class="logo-container">
      <img src="SILAKBO.png" alt="SILAKBO Logo" class="logo">
      <div class="logo-text">ANG SILAKBO</div>
    </div>
    
    <button class="new-chat-btn" id="newChatBtn">
      <i class="fas fa-plus"></i> New chat
    </button>
    
    <button class="back-home-btn" id="backHomeBtn">
      <i class="fas fa-home"></i> Back to Home
    </button>
    
    <div class="chat-history" id="chatHistory">
      <!-- Chat history items will be added here -->
    </div>
    
    <div class="user-profile" id="userProfile">
      <img src="https://ui-avatars.com/api/?name=Guest&background=e65100&color=fff" alt="User Avatar" class="user-avatar" id="userAvatar">
      <div class="user-name" id="userName">Sign in</div>
    </div>
  </div>

  <!-- Main Content -->
  <div class="main-content">
    <div class="mobile-header">
      <button class="menu-toggle" id="menuToggle">
        <i class="fas fa-bars"></i>
      </button>
      <div class="mobile-logo-container">
        <img src="SILAKBO.png" alt="SILAKBO Logo" class="mobile-logo">
        <div class="mobile-logo-text">ANG SILAKBO</div>
      </div>
    </div>

    <div class="chat-container" id="chatContainer">
      <!-- Welcome Screen -->
      <div class="welcome-screen" id="welcomeScreen">
        <div class="language-selector" id="languageSelector">
          <i class="fas fa-globe"></i>
          <span>Language</span>
          <div class="language-dropdown" id="languageDropdown">
            <div class="language-option active" data-lang="en">
              <img src="https://flagcdn.com/w20/us.png" alt="English" class="language-flag">
              English
            </div>
            <div class="language-option" data-lang="es">
              <img src="https://flagcdn.com/w20/es.png" alt="Spanish" class="language-flag">
              Español
            </div>
            <div class="language-option" data-lang="fr">
              <img src="https://flagcdn.com/w20/fr.png" alt="French" class="language-flag">
              Français
            </div>
            <div class="language-option" data-lang="de">
              <img src="https://flagcdn.com/w20/de.png" alt="German" class="language-flag">
              Deutsch
            </div>
            <div class="language-option" data-lang="it">
              <img src="https://flagcdn.com/w20/it.png" alt="Italian" class="language-flag">
              Italiano
            </div>
            <div class="language-option" data-lang="ru">
              <img src="https://flagcdn.com/w20/ru.png" alt="Russian" class="language-flag">
              Русский
            </div>
            <div class="language-option" data-lang="zh">
              <img src="https://flagcdn.com/w20/cn.png" alt="Chinese" class="language-flag">
              中文
            </div>
            <div class="language-option" data-lang="ja">
              <img src="https://flagcdn.com/w20/jp.png" alt="Japanese" class="language-flag">
              日本語
            </div>
            <div class="language-option" data-lang="ar">
              <img src="https://flagcdn.com/w20/sa.png" alt="Arabic" class="language-flag">
              العربية
            </div>
            <div class="language-option" data-lang="he">
              <img src="https://flagcdn.com/w20/il.png" alt="Hebrew" class="language-flag">
              עברית
            </div>
            <div class="language-option" data-lang="hi">
              <img src="https://flagcdn.com/w20/in.png" alt="Hindi" class="language-flag">
              हिन्दी
            </div>
            <div class="language-option" data-lang="ko">
              <img src="https://flagcdn.com/w20/kr.png" alt="Korean" class="language-flag">
              한국어
            </div>
          </div>
        </div>
        <div class="version-badge">v1.2.0</div>
        <img src="Coral.png" alt="SILAKBO Logo" class="welcome-logo">
        <h1 class="welcome-title animate-fade-in-up" id="welcomeTitle">
          <span class="typing-text" id="greetingText"></span>
        </h1>

        <div class="examples-container">
          <div class="example-card animate-slide-in-left" data-prompt="Write a poem about the University of Cebu Lapu-Lapu and Mandaue.">
            <div class="example-title">Write a poem</div>
            <div class="example-text">about the University of Cebu Lapu-Lapu and Mandaue</div>
          </div>
          <div class="example-card animate-fade-in-up" data-prompt="Explain the importance of student publications like SILAKBO.">
            <div class="example-title">Explain</div>
            <div class="example-text">the importance of student publications like ANG SILAKBO</div>
          </div>
          <div class="example-card animate-slide-in-right" data-prompt="Generate a short story about campus life.">
            <style>
              #githubSignIn img {
              filter: brightness(0);
              }
              #facebookSignIn img {
  filter: invert(33%) sepia(93%) saturate(2462%) hue-rotate(205deg) brightness(95%) contrast(95%);
}
            </style>
            <div class="example-title">Generate a short story</div>
            <div class="example-text">about campus life</div>
          </div>
        </div>
      </div>

      <!-- Messages will be displayed here -->
      <div class="message-container" id="messageContainer" style="display: none;"></div>
    </div>

    <div class="input-container">
      <div class="input-wrapper">
        <textarea id="userInput" placeholder="Message Coral..." rows="1"></textarea>
        <button class="send-btn" id="sendBtn" disabled>
          <i class="fas fa-paper-plane"></i>
        </button>
      </div>

      <div class="powered-by">
        <span>Powered by:</span>
        <div class="ai-logos">
          <img src="OpenAI.png" alt="OpenAI" class="ai-logo" title="OpenAI">
          <img src="Mistral.png" alt="Mistral" class="ai-logo" title="Mistral AI">
          <img src="Cohere.png" alt="Cohere" class="ai-logo" title="Cohere">
        </div>
        <span class="about-link" id="aboutLink">About</span>
      </div>
    </div>

    <div class="footer">
      <p>AI-generated, for reference only</p>
      <p>The Official Publication Page of University of Cebu Lapu-Lapu and Mandaue</p>
    </div>
  </div>

  <!-- Auth Modal -->
  <div class="auth-modal" id="authModal">
    <div class="auth-content">
      <div class="auth-header">
        <h2 class="auth-title">Sign in to ANG SILAKBO</h2>
        <p class="auth-subtitle">Choose a sign-in method to continue</p>
      </div>
      <div class="auth-buttons">
        <button class="auth-btn" id="googleSignIn">
          <img src="https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg" alt="Google">
          <span>Continue with Google</span>
        </button>
        <button class="auth-btn" id="githubSignIn">
          <img src="https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/github.svg" alt="GitHub">
          <span>Continue with GitHub</span>
        </button>
        <button class="auth-btn" id="facebookSignIn">
          <img src="https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/facebook.svg" alt="Facebook">
          <span>Continue with Facebook</span>
        </button>
      </div>
      <div class="auth-close" id="authClose">Cancel</div>
    </div>
  </div>

  <!-- About Modal -->
  <div class="about-modal" id="aboutModal">
    <div class="about-content">
      <button class="about-close" id="aboutClose">
        <i class="fas fa-times"></i>
      </button>
      <div class="about-header">
        <h2 class="about-title">About ANG SILAKBO's Coral</h2>
        <p class="about-subtitle">Empowering student voices through AI</p>
      </div>
      <div class="about-body">
        <div class="about-section">
          <h3 class="about-section-title"><i class="fas fa-bullseye"></i>Our Mission</h3>
          <p class="about-text">
            ANG SILAKBO's Coral is designed to assist students and faculty of the University of Cebu Lapu-Lapu and Mandaue with their academic and creative needs. Our mission is to enhance the educational experience through cutting-edge AI technology while preserving the authentic voice of student publications.
          </p>
          <p class="about-text">
            We aim to <span class="about-text-highlight">democratize access to AI tools</span> for all students, regardless of their technical background, and to foster a community of innovation and creativity within the university.
          </p>
        </div>
        
        <div class="about-section">
          <h3 class="about-section-title"><i class="fas fa-robot"></i>Powered By Leading AI Technologies</h3>
          <p class="about-text">
            ANG SILAKBO's Coral leverages multiple state-of-the-art language models to provide diverse, accurate, and helpful responses. Our system combines the strengths of three leading AI providers:
          </p>
          <div class="ai-providers">
            <div class="ai-provider">
              <img src="OpenAI.png" alt="OpenAI Logo" class="provider-logo">
              <div class="provider-name">OpenAI</div>
              <p class="provider-desc">Powering creative writing and detailed explanations with advanced language understanding.</p>
            </div>
            <div class="ai-provider">
              <img src="Mistral.png" alt="Mistral AI Logo" class="provider-logo">
              <div class="provider-name">Mistral AI</div>
              <p class="provider-desc">Providing efficient and accurate responses with European AI innovation.</p>
            </div>
            <div class="ai-provider">
              <img src="Cohere.png" alt="Cohere Logo" class="provider-logo">
              <div class="provider-name">Cohere</div>
              <p class="provider-desc">Enhancing content generation with specialized knowledge and multilingual capabilities.</p>
            </div>
          </div>
        </div>
        
        <div class="about-section">
          <h3 class="about-section-title"><i class="fas fa-lightbulb"></i>Key Features</h3>
          <p class="about-text">
            ANG SILAKBO's Coral offers a range of features designed to support academic and creative endeavors:
          </p>
          <ul class="about-list">
            <li><strong>Multilingual Support:</strong> Communicate in 12 different languages to serve our diverse student body</li>
            <li><strong>Creative Writing Assistance:</strong> Get help with poems, stories, essays, and other creative works</li>
            <li><strong>Research Support:</strong> Find information, generate summaries, and explore concepts</li>
            <li><strong>Learning Aid:</strong> Explain complex topics in simple terms and provide educational content</li>
            <li><strong>Publication Support:</strong> Assist with editing, proofreading, and content generation for student publications</li>
          </ul>
          <div class="features-container">
            <div class="feature-badge"><i class="fas fa-globe"></i> Multilingual</div>
            <div class="feature-badge"><i class="fas fa-pen-fancy"></i> Creative</div>
            <div class="feature-badge"><i class="fas fa-brain"></i> Intelligent</div>
            <div class="feature-badge"><i class="fas fa-bolt"></i> Fast</div>
            <div class="feature-badge"><i class="fas fa-shield-alt"></i> Secure</div>
          </div>
        </div>
        
        <div class="about-section">
          <h3 class="about-section-title"><i class="fas fa-users"></i>Our Team</h3>
          <p class="about-text">
            ANG SILAKBO's Coral is maintained for leveraging technology for education.
          </p>
            <div class="team-grid" style="display: flex; justify-content: center;">
            <div class="team-member">
              <img src="Roni.jpg" alt="Maria Santos" class="team-member-photo">
              <div class="team-member-name">Ron Asnahon</div>
              <div class="team-member-role">Project Lead</div>
            </div>
            </div>
          </div>
        <div class="about-section">
          <h3 class="about-section-title"><i class="fas fa-shield-alt"></i>Responsible AI Use</h3>
          <p class="about-text">
            While ANG SILAKBO's Coral provides valuable assistance, we encourage critical thinking and responsible use. All AI-generated content should be reviewed, fact-checked, and properly attributed when used in academic or publication contexts.
          </p>
          <p class="about-text">
            We are committed to ethical AI practices, including:
          </p>
          <ul class="about-list">
            <li>Transparency about AI-generated content</li>
            <li>Privacy protection for all users</li>
            <li>Continuous monitoring for bias and inaccuracies</li>
            <li>Regular updates to improve performance and safety</li>
          </ul>
        </div>
    
        
        <div class="about-section">
          <h3 class="about-section-title"><i class="fas fa-hands-helping"></i>Get Involved</h3>
          <p class="about-text">
            We welcome contributions from students and faculty who are interested in improving ANG SILAKBO's Coral. Whether you have feedback, feature suggestions, or want to join our development team, we'd love to hear from you.
          </p>
          <p class="about-text">
            Contact us at <span class="about-text-highlight">uclm.angsilakbo@uc.edu.ph</span> to learn more about how you can get involved.
          </p>
        </div>
      </div>
    </div>
  </div>

  <script>
    // Firebase Configuration
    const firebaseConfig = {
      apiKey: "AIzaSyDSe2c9-8xqShoHEW-D7BXXAyD5N9uXWEs",
      authDomain: "ang-silakbo.firebaseapp.com",
      databaseURL: "https://ang-silakbo-default-rtdb.firebaseio.com",
      projectId: "ang-silakbo",
      storageBucket: "ang-silakbo.firebasestorage.app",
      messagingSenderId: "1006400633782",
      appId: "1:1006400633782:web:ef4a93c1d445cb825b9f17",
      measurementId: "G-TSDTG2YJ94"
    };

    // Initialize Firebase
    firebase.initializeApp(firebaseConfig);
    firebase.analytics();

    // DOM Elements
    const sidebar = document.getElementById('sidebar');
    const menuToggle = document.getElementById('menuToggle');
    const userInput = document.getElementById('userInput');
    const sendBtn = document.getElementById('sendBtn');
    const chatContainer = document.getElementById('chatContainer');
    const messageContainer = document.getElementById('messageContainer');
    const welcomeScreen = document.getElementById('welcomeScreen');
    const newChatBtn = document.getElementById('newChatBtn');
    const backHomeBtn = document.getElementById('backHomeBtn');
    const chatHistory = document.getElementById('chatHistory');
    const userProfile = document.getElementById('userProfile');
    const userAvatar = document.getElementById('userAvatar');
    const userName = document.getElementById('userName');
    const authModal = document.getElementById('authModal');
    const authClose = document.getElementById('authClose');
    const googleSignIn = document.getElementById('googleSignIn');
    const githubSignIn = document.getElementById('githubSignIn');
    const facebookSignIn = document.getElementById('facebookSignIn');
    const exampleCards = document.querySelectorAll('.example-card');
    const welcomeTitle = document.getElementById('welcomeTitle');
    const greetingText = document.getElementById('greetingText');
    const aboutLink = document.getElementById('aboutLink');
    const aboutModal = document.getElementById('aboutModal');
    const aboutClose = document.getElementById('aboutClose');
    const languageSelector = document.getElementById('languageSelector');
    const languageDropdown = document.getElementById('languageDropdown');
    const languageOptions = document.querySelectorAll('.language-option');

    // Multilingual greetings
    const greetings = [
      { lang: 'he', text: 'יום טוב, אזרח!' }, // Hebrew
      { lang: 'en', text: 'Good day, citizen!' }, // English
      { lang: 'es', text: '¡Buen día, ciudadano!' }, // Spanish
      { lang: 'fr', text: 'Bonjour, citoyen!' }, // French
      { lang: 'de', text: 'Guten Tag, Bürger!' }, // German
      { lang: 'it', text: 'Buongiorno, cittadino!' }, // Italian
      { lang: 'ru', text: 'Добрый день, гражданин!' }, // Russian
      { lang: 'zh', text: '公民，你好！' }, // Chinese
      { lang: 'ja', text: 'こんにちは、市民！' }, // Japanese
      { lang: 'ar', text: 'يوم جيد، أيها المواطن!' }, // Arabic
      { lang: 'hi', text: 'नमस्ते, नागरिक!' }, // Hindi
      { lang: 'ko', text: '안녕하세요, 시민!' }  // Korean
    ];

    // Current chat state
    let currentUser = null;
    let currentChatId = null;
    let chatMessages = [];
    let currentGreetingIndex = Math.floor(Math.random() * greetings.length);

    // Display random greeting with typing animation
    function displayGreeting() {
      const greeting = greetings[currentGreetingIndex];
      welcomeTitle.setAttribute('lang', greeting.lang);
      
      // Clear previous text
      greetingText.textContent = '';
      greetingText.style.animation = 'none';
      
      // Trigger reflow
      void greetingText.offsetWidth;
      
      // Set new text and restart animation
      greetingText.textContent = greeting.text;
      greetingText.style.animation = 'typing 3.5s steps(40, end), blink-caret 0.75s step-end infinite';
    }

    // Change greeting on page load and when returning to welcome screen
    displayGreeting();

    // Language selector click
    languageSelector.addEventListener('click', (e) => {
      e.stopPropagation();
      languageDropdown.style.display = languageDropdown.style.display === 'block' ? 'none' : 'block';
    });

    // Language option click
    languageOptions.forEach(option => {
      option.addEventListener('click', (e) => {
        e.stopPropagation();
        const lang = option.getAttribute('data-lang');
        
        // Update active class
        document.querySelector('.language-option.active').classList.remove('active');
        option.classList.add('active');
        
        // Find greeting for selected language
        const selectedGreeting = greetings.findIndex(g => g.lang === lang);
        if (selectedGreeting !== -1) {
          currentGreetingIndex = selectedGreeting;
          displayGreeting();
        }
        
        languageDropdown.style.display = 'none';
      });
    });

    // Close language dropdown when clicking outside
    document.addEventListener('click', () => {
      languageDropdown.style.display = 'none';
    });

    // Mobile menu toggle
    menuToggle.addEventListener('click', () => {
      sidebar.classList.toggle('active');
    });

    // Close sidebar when clicking outside on mobile
    document.addEventListener('click', (e) => {
      if (window.innerWidth <= 768 && 
          sidebar.classList.contains('active') && 
          !sidebar.contains(e.target) && 
          e.target !== menuToggle) {
        sidebar.classList.remove('active');
      }
    });

    // Back to Home button
    backHomeBtn.addEventListener('click', () => {
      window.location.href = 'index.html';
    });

    // Show auth modal when clicking on input if not signed in
    userInput.addEventListener('click', () => {
      if (!currentUser) {
        authModal.style.display = 'flex';
      }
    });

    // Auto-resize textarea
    userInput.addEventListener('input', () => {
      userInput.style.height = 'auto';
      userInput.style.height = (userInput.scrollHeight < 150) ? `${userInput.scrollHeight}px` : '150px';
      sendBtn.disabled = userInput.value.trim() === '';
    });

    // Send message on Enter (but allow Shift+Enter for new line)
    userInput.addEventListener('keydown', (e) => {
      if (e.key === 'Enter' && !e.shiftKey) {
        e.preventDefault();
        if (!sendBtn.disabled && currentUser) {
          sendMessage();
        } else if (!currentUser) {
          authModal.style.display = 'flex';
        }
      }
    });

    // Send button click
    sendBtn.addEventListener('click', () => {
      if (currentUser) {
        sendMessage();
      } else {
        authModal.style.display = 'flex';
      }
    });

    // New chat button
    newChatBtn.addEventListener('click', () => {
      if (currentUser) {
        startNewChat();
        // Change greeting when starting a new chat
        currentGreetingIndex = (currentGreetingIndex + 1) % greetings.length;
        displayGreeting();
      } else {
        authModal.style.display = 'flex';
      }
    });

    // Example card click
    exampleCards.forEach(card => {
      card.addEventListener('click', () => {
        if (currentUser) {
          const prompt = card.getAttribute('data-prompt');
          userInput.value = prompt;
          userInput.dispatchEvent(new Event('input'));
          sendMessage();
        } else {
          authModal.style.display = 'flex';
        }
      });
    });

    // About link
    aboutLink.addEventListener('click', () => {
      aboutModal.style.display = 'flex';
    });

    // Close about modal
    aboutClose.addEventListener('click', () => {
      aboutModal.style.display = 'none';
    });

    // Close about modal when clicking outside
    aboutModal.addEventListener('click', (e) => {
      if (e.target === aboutModal) {
        aboutModal.style.display = 'none';
      }
    });

    // Authentication
    userProfile.addEventListener('click', () => {
      if (!currentUser) {
        authModal.style.display = 'flex';
      }
    });

    authClose.addEventListener('click', () => {
      authModal.style.display = 'none';
    });

    // Close modal when clicking outside
    authModal.addEventListener('click', (e) => {
      if (e.target === authModal) {
        authModal.style.display = 'none';
      }
    });

    // Sign in with Google
    googleSignIn.addEventListener('click', () => {
      const provider = new firebase.auth.GoogleAuthProvider();
      signInWithProvider(provider);
    });

    // Sign in with GitHub
    githubSignIn.addEventListener('click', () => {
      const provider = new firebase.auth.GithubAuthProvider();
      signInWithProvider(provider);
    });

    // Sign in with Facebook
    facebookSignIn.addEventListener('click', () => {
      const provider = new firebase.auth.FacebookAuthProvider();
      signInWithProvider(provider);
    });

    // Sign in function
    function signInWithProvider(provider) {
      firebase.auth().signInWithPopup(provider)
        .then((result) => {
          authModal.style.display = 'none';
          updateUserProfile(result.user);
          loadUserChats();
          
          // Focus on input after successful sign-in
          userInput.focus();
        })
        .catch((error) => {
          console.error("Authentication error:", error);
          alert("Authentication failed. Please try again.");
        });
    }

    // Update user profile UI
    function updateUserProfile(user) {
      currentUser = user;
      userAvatar.src = user.photoURL || `https://ui-avatars.com/api/?name=${encodeURIComponent(user.displayName)}&background=e65100&color=fff`;
      userName.textContent = user.displayName || user.email;
    }

    // Auth state change listener
    firebase.auth().onAuthStateChanged((user) => {
      if (user) {
        updateUserProfile(user);
        loadUserChats();
      } else {
        currentUser = null;
        userAvatar.src = "https://ui-avatars.com/api/?name=Guest&background=e65100&color=fff";
        userName.textContent = "Sign in";
        chatHistory.innerHTML = '';
      }
    });

    // Load user's chat history
    function loadUserChats() {
      if (!currentUser) return;
      
      chatHistory.innerHTML = '';
      
      // This would typically fetch from Firebase, but for this demo we'll just add a placeholder
      addChatToHistory('New conversation', Date.now());
    }

    // Add chat to history sidebar
    function addChatToHistory(title, timestamp, id = null) {
      const chatId = id || timestamp.toString();
      const chatItem = document.createElement('div');
      chatItem.className = 'chat-item';
      chatItem.textContent = title;
      chatItem.dataset.id = chatId;
      
      chatItem.addEventListener('click', () => {
        // This would load the chat from Firebase in a real app
        startNewChat(chatId);
      });
      
      chatHistory.prepend(chatItem);
      return chatId;
    }

    // Start a new chat
    function startNewChat(chatId = null) {
      currentChatId = chatId || Date.now().toString();
      chatMessages = [];
      messageContainer.innerHTML = '';
      
      if (!chatId) {
        addChatToHistory('New conversation', Date.now(), currentChatId);
      }
      
      welcomeScreen.style.display = 'none';
      messageContainer.style.display = 'flex';
      userInput.value = '';
      userInput.focus();
      
      if (window.innerWidth <= 768) {
        sidebar.classList.remove('active');
      }
    }

    // Send message function
    async function sendMessage() {
      const userText = userInput.value.trim();
      if (!userText) return;
      
      // Start a new chat if we're on the welcome screen
      if (welcomeScreen.style.display !== 'none') {
        startNewChat();
      }
      
      // Add user message to UI
      addMessageToUI(userText, 'user');
      userInput.value = '';
      userInput.style.height = 'auto';
      sendBtn.disabled = true;
      
      // Add bot "typing" message
      const botMessageElement = addMessageToUI('', 'bot');
      const typingIndicator = document.createElement('div');
      typingIndicator.className = 'typing-indicator';
      typingIndicator.innerHTML = `
        <div class="typing-dot"></div>
        <div class="typing-dot"></div>
        <div class="typing-dot"></div>
      `;
      botMessageElement.appendChild(typingIndicator);
      
      try {
        // Use the Cohere API as in the original code
        const res = await fetch("https://api.cohere.ai/v1/chat", {
          method: "POST",
          headers: {
            "Authorization": "Bearer z99HUO9u2vu9E4YTRRfeue6hbdkdOcM8zWQDfbcq",
            "Content-Type": "application/json"
          },
          body: JSON.stringify({
            message: userText,
            model: "command-r",
            temperature: 0.7,
            stream: false
          })
        });

        const data = await res.json();
        
        // Remove typing indicator and update with actual response
        botMessageElement.removeChild(typingIndicator);
        botMessageElement.textContent = data.text || "Sorry, I couldn't generate a response.";
        
        // Save message to chat history (would save to Firebase in a real app)
        chatMessages.push(
          { role: 'user', content: userText },
          { role: 'assistant', content: data.text || "Sorry, I couldn't generate a response." }
        );
        
        // Update chat title in sidebar if this is the first exchange
        if (chatMessages.length === 2) {
          const firstChatItem = chatHistory.firstChild;
          if (firstChatItem && firstChatItem.dataset.id === currentChatId) {
            // Use first few words of user message as chat title
            const chatTitle = userText.split(' ').slice(0, 4).join(' ') + '...';
            firstChatItem.textContent = chatTitle;
          }
        }
      } catch (err) {
        console.error("API Error:", err);
        botMessageElement.removeChild(typingIndicator);
        botMessageElement.textContent = "Sorry, something went wrong. Please try again.";
      }
      
      // Scroll to bottom
      chatContainer.scrollTop = chatContainer.scrollHeight;
    }

    // Add message to UI
    function addMessageToUI(text, sender) {
      const messageDiv = document.createElement('div');
      messageDiv.className = `message ${sender}-message`;
      
      if (sender === 'user') {
        const avatarSrc = currentUser ? 
          currentUser.photoURL || `https://ui-avatars.com/api/?name=${encodeURIComponent(currentUser.displayName)}&background=e65100&color=fff` : 
          "https://ui-avatars.com/api/?name=Guest&background=e65100&color=fff";
        
        messageDiv.innerHTML = `
          <div class="message-content">
            <div class="message-sender">You</div>
            <div class="message-text">${text}</div>
          </div>
          <img src="${avatarSrc}" alt="User" class="message-avatar">
        `;
        messageDiv.classList.add('animate-slide-in-right');
      } else {
        messageDiv.innerHTML = `
          <img src="Coral.png" alt="Coral" class="message-avatar">
          <div class="message-content">
            <div class="message-sender">Coral</div>
            <div class="message-text">${text}</div>
          </div>
        `;
        messageDiv.classList.add('animate-slide-in-left');
      }
      
      messageContainer.appendChild(messageDiv);
      return messageDiv.querySelector('.message-text');
    }

    // Initialize the app
    function init() {
      // Check if user is already signed in
      const user = firebase.auth().currentUser;
      if (user) {
        updateUserProfile(user);
        loadUserChats();
      }
      
      // Change greeting on page refresh
      document.addEventListener('visibilitychange', () => {
        if (document.visibilityState === 'visible' && welcomeScreen.style.display !== 'none') {
          currentGreetingIndex = (currentGreetingIndex + 1) % greetings.length;
          displayGreeting();
        }
      });
    }

    // Run initialization
    init();
  </script>
</body>
</html>
