<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ang Silakbo - Workstation</title>
    <link rel="icon" href="SILAKBO (1).png">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.tiny.cloud/1/n92j01vjprp9xy96v0uxd2kgqi5vnd50dwm5i47veg2u1bur/tinymce/6/tinymce.min.js" referrerpolicy="origin"></script>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            /* Orange color scheme */
            --primary: #E65100;
            --primary-light: #FF8A65;
            --primary-dark: #E64A19;
            --accent: #e98f08;
            --accent-light: #FFB74D;
            --accent-dark: #F57C00;
            
            /* Text colors */
            --text-dark: #1F2937;
            --text-medium: #4B5563;
            --text-light: #6B7280;
            
            /* Background colors */
            --bg-white: #FFFFFF;
            --bg-light: #F9FAFB;
            --bg-gray: #F3F4F6;
            --bg-dark: #111827;
            
            /* Neutral colors */
            --gray-50: #F9FAFB;
            --gray-100: #F3F4F6;
            --gray-200: #E5E7EB;
            --gray-300: #D1D5DB;
            --gray-400: #9CA3AF;
            --gray-500: #6B7280;
            --gray-600: #4B5563;
            --gray-700: #374151;
            --gray-800: #1F2937;
            --gray-900: #111827;
            
            /* Semantic colors */
            --success: #10B981;
            --error: #EF4444;
            --warning: #F59E0B;
            --info: #3B82F6;
            
            /* Shadows */
            --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
            --shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06);
            --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
            
            /* Transitions */
            --transition-fast: 150ms cubic-bezier(0.4, 0, 0.2, 1);
            --transition: 200ms cubic-bezier(0.4, 0, 0.2, 1);
            --transition-slow: 300ms cubic-bezier(0.4, 0, 0.2, 1);
            
            /* Border radius */
            --radius-sm: 0.125rem;
            --radius: 0.25rem;
            --radius-md: 0.375rem;
            --radius-lg: 0.5rem;
            --radius-xl: 0.75rem;
            --radius-2xl: 1rem;
            --radius-3xl: 1.5rem;
            --radius-full: 9999px;
        }

        /* Dark mode variables */
        .dark {
            --primary: #FF5722;
            --primary-light: #FF8A65;
            --primary-dark: #E64A19;
            --accent: #FF9800;
            --accent-light: #FFB74D;
            --accent-dark: #F57C00;
            
            --text-dark: #F9FAFB;
            --text-medium: #E5E7EB;
            --text-light: #D1D5DB;
            
            --bg-white: #1F2937;
            --bg-light: #111827;
            --bg-gray: #374151;
            --bg-dark: #000000;
            
            --gray-50: #111827;
            --gray-100: #1F2937;
            --gray-200: #374151;
            --gray-300: #4B5563;
            --gray-400: #6B7280;
            --gray-500: #9CA3AF;
            --gray-600: #D1D5DB;
            --gray-700: #E5E7EB;
            --gray-800: #F3F4F6;
            --gray-900: #F9FAFB;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Poppins', sans-serif;
        }

        html {
            scroll-behavior: smooth;
        }

        body {
            background-color: var(--bg-light);
            color: var(--text-dark);
            line-height: 1.5;
            min-height: 100vh;
            overflow-x: hidden;
        }

        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }

        ::-webkit-scrollbar-track {
            background: var(--gray-100);
            border-radius: var(--radius-full);
        }

        ::-webkit-scrollbar-thumb {
            background: var(--gray-400);
            border-radius: var(--radius-full);
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--primary-light);
        }

        /* ===== LAYOUT ===== */
        .app-container {
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }

        /* ===== HEADER ===== */
        .top-header {
            background-color: var(--bg-white);
            box-shadow: var(--shadow-md);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .header-container {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0.75rem 2rem;
            max-width: 1600px;
            margin: 0 auto;
            width: 100%;
        }

        .logo-container {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .logo {
            height: 40px;
            width: auto;
            transition: var(--transition);
        }

        .logo:hover {
            transform: scale(1.05);
        }

        .logo-text {
            font-size: 1.25rem;
            font-weight: 700;
            background: linear-gradient(135deg, var(--primary) 0%, var(--accent) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .header-actions {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .theme-toggle {
            width: 40px;
            height: 40px;
            border-radius: var(--radius-full);
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: var(--gray-100);
            color: var(--text-medium);
            cursor: pointer;
            transition: var(--transition);
            border: none;
        }

        .theme-toggle:hover {
            background-color: var(--gray-200);
            color: var(--primary);
            transform: rotate(15deg);
        }

        .user-menu {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 0.5rem 1rem;
            background-color: var(--gray-100);
            border-radius: var(--radius-full);
            cursor: pointer;
            transition: var(--transition);
        }

        .user-menu:hover {
            background-color: var(--gray-200);
        }

        .user-avatar {
            width: 32px;
            height: 32px;
            border-radius: var(--radius-full);
            background-color: var(--primary);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
        }

        .user-name {
            font-weight: 500;
            color: var(--text-dark);
        }

        /* ===== NAVIGATION ===== */
        .main-nav {
            background-color: var(--bg-white);
            border-bottom: 1px solid var(--gray-200);
            box-shadow: var(--shadow-sm);
        }

        .nav-container {
            display: flex;
            align-items: center;
            justify-content: space-between;
            max-width: 1600px;
            margin: 0 auto;
            width: 100%;
            padding: 0 2rem;
        }

        .nav-tabs {
            display: flex;
            overflow-x: auto;
            white-space: nowrap;
            scrollbar-width: none; /* Firefox */
        }

        .nav-tabs::-webkit-scrollbar {
            display: none; /* Chrome, Safari, Edge */
        }

        .nav-tab {
            padding: 1rem 1.5rem;
            color: var(--text-medium);
            font-weight: 500;
            position: relative;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 0.5rem;
            border: none;
            background: none;
        }

        .nav-tab::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 3px;
            background: linear-gradient(to right, var(--primary), var(--accent));
            transform: scaleX(0);
            transition: var(--transition);
        }

        .nav-tab:hover {
            color: var(--primary);
        }

        .nav-tab:hover::after {
            transform: scaleX(0.5);
        }

        .nav-tab.active {
            color: var(--primary);
        }

        .nav-tab.active::after {
            transform: scaleX(1);
        }

        .nav-actions {
            display: flex;
            gap: 0.75rem;
        }

        .nav-btn {
            padding: 0.5rem 1rem;
            background-color: var(--gray-100);
            color: var(--text-medium);
            border: none;
            border-radius: var(--radius-full);
            font-weight: 500;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .nav-btn:hover {
            background-color: var(--gray-200);
            color: var(--primary);
            transform: translateY(-2px);
        }

        .nav-btn.primary {
            background: linear-gradient(135deg, var(--primary) 0%, var(--accent) 100%);
            color: white;
        }

        .nav-btn.primary:hover {
            box-shadow: 0 4px 12px rgba(230, 81, 0, 0.3);
        }

        /* ===== MAIN CONTENT ===== */
        .main-content {
            flex: 1;
            padding: 2rem;
            max-width: 1600px;
            margin: 0 auto;
            width: 100%;
        }

        /* ===== DASHBOARD LAYOUT ===== */
        .dashboard {
            display: grid;
            grid-template-columns: repeat(12, 1fr);
            gap: 1.5rem;
        }

        .dashboard-sidebar {
            grid-column: span 3;
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
        }

        .dashboard-main {
            grid-column: span 9;
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
        }

        /* ===== CATEGORY MENU ===== */
        .category-menu {
            background-color: var(--bg-white);
            border-radius: var(--radius-xl);
            box-shadow: var(--shadow);
            overflow: hidden;
        }

        .category-menu-header {
            padding: 1.25rem;
            border-bottom: 1px solid var(--gray-200);
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .category-menu-title {
            font-size: 1.125rem;
            font-weight: 600;
            color: var(--text-dark);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .category-menu-title i {
            color: var(--primary);
        }

        .category-menu-list {
            padding: 1rem 0;
        }

        .category-item {
            list-style: none;
        }

        .category-link {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 0.75rem 1.25rem;
            color: var(--text-medium);
            text-decoration: none;
            transition: var(--transition);
            position: relative;
        }

        .category-link::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            bottom: 0;
            width: 3px;
            background: linear-gradient(to bottom, var(--primary), var(--accent));
            transform: scaleY(0);
            transition: var(--transition);
        }

        .category-link:hover {
            background-color: var(--gray-100);
            color: var(--primary);
        }

        .category-link:hover::before {
            transform: scaleY(0.6);
        }

        .category-link.active {
            background-color: var(--gray-100);
            color: var(--primary);
            font-weight: 500;
        }

        .category-link.active::before {
            transform: scaleY(1);
        }

        .category-icon {
            width: 1.5rem;
            text-align: center;
            font-size: 1.125rem;
            color: var(--text-light);
            transition: var(--transition);
        }

        .category-link:hover .category-icon,
        .category-link.active .category-icon {
            color: var(--primary);
        }

        .category-badge {
            margin-left: auto;
            background-color: var(--gray-200);
            color: var(--text-medium);
            font-size: 0.75rem;
            font-weight: 500;
            padding: 0.25rem 0.5rem;
            border-radius: var(--radius-full);
            transition: var(--transition);
        }

        .category-link:hover .category-badge,
        .category-link.active .category-badge {
            background-color: var(--primary-light);
            color: white;
        }

        /* ===== WRITING TIPS CARD ===== */
        .tips-card {
            background-color: var(--bg-white);
            border-radius: var(--radius-xl);
            box-shadow: var(--shadow);
            overflow: hidden;
        }

        .tips-card-header {
            padding: 1.25rem;
            border-bottom: 1px solid var(--gray-200);
            display: flex;
            align-items: center;
            justify-content: space-between;
            background: linear-gradient(135deg, var(--primary-light) 0%, var(--accent-light) 100%);
            color: white;
        }

        .tips-card-title {
            font-size: 1.125rem;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .tips-card-body {
            padding: 1.25rem;
            max-height: 400px;
            overflow-y: auto;
        }

        .writing-tip {
            margin-bottom: 1rem;
            padding: 1rem 1rem 1rem 2.5rem;
            position: relative;
            font-size: 0.875rem;
            color: var(--text-medium);
            line-height: 1.6;
            transition: var(--transition);
            background-color: var(--gray-100);
            border-radius: var(--radius-lg);
        }

        .writing-tip::before {
            content: '\f0eb';
            font-family: 'Font Awesome 5 Free';
            font-weight: 900;
            position: absolute;
            left: 1rem;
            top: 1rem;
            color: var(--primary);
            font-size: 1rem;
        }

        .writing-tip:hover {
            transform: translateX(5px);
            color: var(--text-dark);
            background-color: var(--gray-200);
            box-shadow: var(--shadow-sm);
        }

        .writing-tip:last-child {
            margin-bottom: 0;
        }

        /* ===== CONTENT CARD ===== */
        .content-card {
            background-color: var(--bg-white);
            border-radius: var(--radius-xl);
            box-shadow: var(--shadow);
            overflow: hidden;
        }

        .content-card-header {
            padding: 1.5rem;
            border-bottom: 1px solid var(--gray-200);
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .content-card-title {
            font-size: 1.25rem;
            font-weight: 600;
            color: var(--text-dark);
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .content-card-title i {
            color: var(--primary);
        }

        .content-card-body {
            padding: 1.5rem;
        }

        .content-card-footer {
            padding: 1.25rem 1.5rem;
            border-top: 1px solid var(--gray-200);
            display: flex;
            justify-content: flex-end;
            gap: 1rem;
        }

        /* ===== FORMS ===== */
        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
            color: var(--text-dark);
            font-size: 0.875rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .form-label i {
            color: var(--primary);
        }

        .form-control {
            width: 100%;
            padding: 0.75rem 1rem;
            border: 1px solid var(--gray-300);
            border-radius: var(--radius-lg);
            font-size: 0.9375rem;
            transition: var(--transition);
            background-color: var(--bg-white);
            color: var(--text-dark);
            box-shadow: var(--shadow-sm);
        }

        .form-control:hover {
            border-color: var(--gray-400);
        }

        .form-control:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(230, 81, 0, 0.2);
        }

        select.form-control {
            appearance: none;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='%236B7280' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: right 12px center;
            padding-right: 2.5rem;
        }

        /* ===== FILE UPLOAD ===== */
        .file-upload {
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
        }

        .file-input-container {
            position: relative;
            overflow: hidden;
            display: inline-block;
            cursor: pointer;
        }

        .file-input-label {
            display: inline-flex;
            align-items: center;
            gap: 0.625rem;
            padding: 0.75rem 1.25rem;
            background-color: var(--gray-100);
            color: var(--text-medium);
            border-radius: var(--radius-lg);
            cursor: pointer;
            transition: var(--transition);
            font-weight: 500;
            font-size: 0.875rem;
            border: 1px solid var(--gray-300);
        }

        .file-input-label:hover {
            background-color: var(--gray-200);
            color: var(--primary);
            transform: translateY(-2px);
        }

        input[type="file"] {
            position: absolute;
            left: 0;
            top: 0;
            opacity: 0;
            cursor: pointer;
        }

        .file-name {
            margin-left: 0.75rem;
            font-size: 0.875rem;
            color: var(--text-light);
            display: inline-flex;
            align-items: center;
            gap: 0.375rem;
            transition: var(--transition);
        }

        .image-preview-container {
            margin-top: 0.75rem;
            border-radius: var(--radius-lg);
            overflow: hidden;
            max-width: 100%;
            border: 1px solid var(--gray-300);
            transition: var(--transition);
            background-color: var(--gray-100);
        }

        .image-preview-container:hover {
            border-color: var(--primary-light);
        }

        #imagePreview, #editImagePreview {
            max-width: 100%;
            max-height: 300px;
            display: none;
            object-fit: cover;
            width: 100%;
            transition: var(--transition);
        }

        /* ===== BUTTONS ===== */
        .btn {
            padding: 0.75rem 1.25rem;
            background: linear-gradient(135deg, var(--primary) 0%, var(--accent) 100%);
            color: white;
            border: none;
            border-radius: var(--radius-lg);
            cursor: pointer;
            font-size: 0.875rem;
            font-weight: 500;
            transition: var(--transition);
            display: inline-flex;
            align-items: center;
            gap: 0.625rem;
            position: relative;
            overflow: hidden;
            box-shadow: 0 2px 5px rgba(230, 81, 0, 0.2);
        }

        .btn::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(to right, transparent, rgba(255, 255, 255, 0.2), transparent);
            transform: translateX(-100%);
            transition: transform 0.6s ease;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(230, 81, 0, 0.3);
        }

        .btn:hover::after {
            transform: translateX(100%);
        }

        .btn:active {
            transform: translateY(0);
        }

        .btn:disabled {
            opacity: 0.7;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .btn-secondary {
            background: var(--gray-100);
            color: var(--text-medium);
            border: 1px solid var(--gray-300);
            box-shadow: var(--shadow-sm);
        }

        .btn-secondary:hover {
            background: var(--gray-200);
            color: var(--text-dark);
            box-shadow: var(--shadow);
        }

        .btn-danger {
            background: linear-gradient(135deg, var(--error) 0%, #DC2626 100%);
            box-shadow: 0 2px 5px rgba(239, 68, 68, 0.2);
        }

        .btn-danger:hover {
            box-shadow: 0 4px 12px rgba(239, 68, 68, 0.3);
        }

        .btn-success {
            background: linear-gradient(135deg, var(--success) 0%, #059669 100%);
            box-shadow: 0 2px 5px rgba(16, 185, 129, 0.2);
        }

        .btn-success:hover {
            box-shadow: 0 4px 12px rgba(16, 185, 129, 0.3);
        }

        .btn-sm {
            padding: 0.5rem 0.875rem;
            font-size: 0.75rem;
        }

        .btn-lg {
            padding: 0.875rem 1.5rem;
            font-size: 1rem;
        }

        .btn-icon {
            width: 40px;
            height: 40px;
            padding: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: var(--radius-full);
        }

        .btn-icon-sm {
            width: 32px;
            height: 32px;
            font-size: 0.875rem;
        }

        .fab {
            position: fixed;
            bottom: 2rem;
            right: 2rem;
            width: 56px;
            height: 56px;
            border-radius: var(--radius-full);
            background: linear-gradient(135deg, var(--primary) 0%, var(--accent) 100%);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: var(--shadow-xl);
            cursor: pointer;
            transition: var(--transition);
            z-index: 100;
            border: none;
            font-size: 1.25rem;
        }

        .fab:hover {
            transform: scale(1.1) rotate(5deg);
            box-shadow: 0 8px 25px rgba(230, 81, 0, 0.4);
        }

        /* ===== SILAK-SALITAAN SPECIFIC STYLES ===== */
        .silak-fields {
            display: none;
            background-color: var(--gray-100);
            border-radius: var(--radius-lg);
            padding: 1.25rem;
            border: 1px solid var(--gray-300);
            margin-bottom: 1.5rem;
        }

        .silak-fields.active {
            display: block;
            animation: fadeIn 0.3s ease-out;
        }

        .parts-of-speech {
            display: flex;
            gap: 1rem;
            margin-bottom: 1rem;
            flex-wrap: wrap;
        }

        .part-of-speech-option {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            cursor: pointer;
            padding: 0.5rem;
            border-radius: var(--radius);
            transition: var(--transition);
        }

        .part-of-speech-option:hover {
            background-color: var(--gray-200);
        }

        .part-of-speech-option input {
            cursor: pointer;
            accent-color: var(--primary);
        }

        /* ===== POSTS GRID ===== */
        .posts-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 1.5rem;
        }

        .post-card {
            background-color: var(--bg-white);
            border-radius: var(--radius-xl);
            box-shadow: var(--shadow);
            overflow: hidden;
            transition: var(--transition);
            height: 100%;
            display: flex;
            flex-direction: column;
            position: relative;
        }

        .post-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-lg);
        }

        .post-image {
            width: 100%;
            height: 180px;
            object-fit: cover;
            transition: var(--transition);
        }

        .post-card:hover .post-image {
            transform: scale(1.05);
        }

        .post-content {
            padding: 1.25rem;
            flex: 1;
            display: flex;
            flex-direction: column;
        }

        .post-category {
            display: inline-flex;
            align-items: center;
            padding: 0.375rem 0.75rem;
            border-radius: var(--radius-full);
            font-size: 0.75rem;
            font-weight: 500;
            margin-bottom: 0.75rem;
            gap: 0.375rem;
            transition: var(--transition);
        }

        .badge-article {
            background-color: rgba(255, 87, 34, 0.1);
            color: var(--primary);
        }

        .badge-literary {
            background-color: rgba(255, 152, 0, 0.1);
            color: var(--accent);
        }

        .badge-feature {
            background-color: rgba(59, 130, 246, 0.1);
            color: var(--info);
        }

        .badge-silak {
            background-color: rgba(139, 92, 246, 0.1);
            color: #8B5CF6;
        }

        .badge-photostory {
            background-color: rgba(16, 185, 129, 0.1);
            color: var(--success);
        }

        .post-title {
            font-size: 1.125rem;
            font-weight: 600;
            color: var(--text-dark);
            margin-bottom: 0.75rem;
            line-height: 1.4;
            transition: var(--transition);
        }

        .post-card:hover .post-title {
            color: var(--primary);
        }

        .post-meta {
            display: flex;
            flex-wrap: wrap;
            gap: 1rem;
            margin-bottom: 1rem;
            font-size: 0.75rem;
            color: var(--text-light);
        }

        .post-meta-item {
            display: flex;
            align-items: center;
            gap: 0.375rem;
        }

        .post-meta-item i {
            color: var(--primary);
        }

        .post-actions {
            margin-top: auto;
            display: flex;
            gap: 0.5rem;
            padding-top: 1rem;
            border-top: 1px solid var(--gray-200);
        }

        /* ===== TABLE ===== */
        .table-container {
            overflow-x: auto;
            border-radius: var(--radius-xl);
            border: 1px solid var(--gray-200);
            background-color: var(--bg-white);
            box-shadow: var(--shadow);
        }

        .table {
            width: 100%;
            border-collapse: collapse;
            background-color: var(--bg-white);
        }

        .table th,
        .table td {
            padding: 0.875rem 1.125rem;
            text-align: left;
            font-size: 0.875rem;
        }

        .table th {
            background-color: var(--gray-100);
            color: var(--text-dark);
            font-weight: 600;
            white-space: nowrap;
            border-bottom: 1px solid var(--gray-200);
            position: sticky;
            top: 0;
            z-index: 1;
        }

        .table th i {
            color: var(--primary);
            margin-right: 0.375rem;
        }

        .table tr {
            transition: var(--transition);
        }

        .table tr:nth-child(even) {
            background-color: var(--gray-50);
        }

        .table tr:hover {
            background-color: var(--gray-100);
        }

        .table td {
            border-bottom: 1px solid var(--gray-200);
            color: var(--text-medium);
        }

        .table tr:last-child td {
            border-bottom: none;
        }

        .action-buttons {
            display: flex;
            gap: 0.5rem;
        }

        .action-btn {
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: var(--radius-full);
            background-color: var(--bg-white);
            color: var(--text-medium);
            border: 1px solid var(--gray-200);
            cursor: pointer;
            transition: var(--transition);
            font-size: 0.875rem;
        }

        .action-btn:hover {
            transform: translateY(-3px);
            box-shadow: var(--shadow);
        }

        .action-btn-edit {
            color: var(--info);
            border-color: rgba(59, 130, 246, 0.3);
        }

        .action-btn-edit:hover {
            background-color: rgba(59, 130, 246, 0.1);
        }

        .action-btn-delete {
            color: var(--error);
            border-color: rgba(239, 68, 68, 0.3);
        }

        .action-btn-delete:hover {
            background-color: rgba(239, 68, 68, 0.1);
        }

        .action-btn-view {
            color: var(--success);
            border-color: rgba(16, 185, 129, 0.3);
        }

        .action-btn-view:hover {
            background-color: rgba(16, 185, 129, 0.1);
        }

        /* ===== ALERTS ===== */
        .alert {
            padding: 1rem 1.25rem;
            border-radius: var(--radius-lg);
            margin-bottom: 1.5rem;
            display: none;
            align-items: center;
            gap: 0.875rem;
            font-size: 0.875rem;
            opacity: 0;
            transform: translateY(-5px);
            transition: var(--transition);
            position: relative;
            box-shadow: var(--shadow);
        }

        .alert-success {
            background-color: rgba(16, 185, 129, 0.1);
            border: 1px solid rgba(16, 185, 129, 0.2);
            color: var(--success);
        }

        .alert-error {
            background-color: rgba(239, 68, 68, 0.1);
            border: 1px solid rgba(239, 68, 68, 0.2);
            color: var(--error);
        }

        .alert-close {
            margin-left: auto;
            background: none;
            border: none;
            cursor: pointer;
            color: inherit;
            font-size: 1rem;
            transition: var(--transition);
            width: 28px;
            height: 28px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: var(--radius-full);
        }

        .alert-close:hover {
            background-color: rgba(0, 0, 0, 0.05);
            transform: rotate(90deg);
        }

        /* ===== LOADING STATES ===== */
        .spinner {
            display: inline-block;
            width: 18px;
            height: 18px;
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top-color: white;
            animation: spin 1s ease-in-out infinite;
            display: none;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .loading-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 3rem;
            text-align: center;
        }

        .loading-spinner {
            width: 48px;
            height: 48px;
            border: 3px solid rgba(230, 81, 0, 0.1);
            border-radius: 50%;
            border-top-color: var(--primary);
            animation: spin 1s ease-in-out infinite;
            margin-bottom: 1.25rem;
        }

        .loading-text {
            color: var(--text-light);
            font-weight: 500;
            font-size: 1rem;
        }

        /* ===== EMPTY STATES ===== */
        .empty-state {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 3rem;
            text-align: center;
            color: var(--text-light);
        }

        .empty-icon {
            font-size: 3rem;
            margin-bottom: 1.25rem;
            color: var(--gray-400);
            animation: float 3s ease-in-out infinite;
        }

        @keyframes float {
            0% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
            100% { transform: translateY(0px); }
        }

        .empty-text {
            font-weight: 500;
            margin-bottom: 1.25rem;
            font-size: 1.125rem;
        }

        /* ===== MODALS ===== */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0, 0, 0, 0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            display: none;
            backdrop-filter: blur(5px);
            opacity: 0;
            transition: opacity var(--transition);
        }

        .modal-overlay.active {
            opacity: 1;
        }

        .modal {
            background-color: var(--bg-white);
            border-radius: var(--radius-2xl);
            box-shadow: var(--shadow-xl);
            width: 90%;
            max-width: 700px;
            max-height: 90vh;
            overflow-y: auto;
            animation: modalFadeIn 0.3s ease-out;
            transform: scale(0.95);
            transition: transform var(--transition);
            border: 1px solid var(--gray-200);
        }

        .modal-overlay.active .modal {
            transform: scale(1);
        }

        @keyframes modalFadeIn {
            from { opacity: 0; transform: scale(0.9); }
            to { opacity: 1; transform: scale(1); }
        }

        .modal-header {
            padding: 1.25rem 1.5rem;
            border-bottom: 1px solid var(--gray-200);
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky;
            top: 0;
            background-color: var(--bg-white);
            z-index: 1;
            border-top-left-radius: var(--radius-2xl);
            border-top-right-radius: var(--radius-2xl);
        }

        .modal-title {
            font-size: 1.25rem;
            font-weight: 600;
            color: var(--text-dark);
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .modal-title i {
            color: var(--primary);
        }

        .modal-close {
            background: none;
            border: none;
            font-size: 1.25rem;
            cursor: pointer;
            color: var(--text-light);
            transition: var(--transition);
            width: 36px;
            height: 36px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: var(--radius-full);
        }

        .modal-close:hover {
            color: var(--text-dark);
            background-color: var(--gray-100);
            transform: rotate(90deg);
        }

        .modal-body {
            padding: 1.5rem;
        }

        .modal-footer {
            padding: 1.25rem 1.5rem;
            border-top: 1px solid var(--gray-200);
            display: flex;
            justify-content: flex-end;
            gap: 0.75rem;
            position: sticky;
            bottom: 0;
            background-color: var(--bg-white);
            z-index: 1;
            border-bottom-left-radius: var(--radius-2xl);
            border-bottom-right-radius: var(--radius-2xl);
        }

        /* ===== TOOLTIPS ===== */
        .tooltip {
            position: relative;
        }

        .tooltip:hover::after {
            content: attr(data-tooltip);
            position: absolute;
            bottom: 125%;
            left: 50%;
            transform: translateX(-50%);
            background-color: var(--gray-800);
            color: white;
            padding: 0.5rem 0.75rem;
            border-radius: var(--radius);
            font-size: 0.75rem;
            white-space: nowrap;
            z-index: 10;
            margin-bottom: 5px;
            box-shadow: var(--shadow);
            opacity: 0;
            animation: tooltipFadeIn 0.2s ease forwards;
        }

        .tooltip:hover::before {
            content: '';
            position: absolute;
            bottom: 125%;
            left: 50%;
            transform: translateX(-50%);
            border: 6px solid transparent;
            border-top-color: var(--gray-800);
            margin-bottom: -6px;
            opacity: 0;
            animation: tooltipFadeIn 0.2s ease forwards;
        }

        @keyframes tooltipFadeIn {
            to { opacity: 1; }
        }

        /* ===== ANIMATIONS ===== */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* ===== TINYMCE CUSTOMIZATION ===== */
        .tox-tinymce {
            border-radius: var(--radius-lg) !important;
            border: 1px solid var(--gray-300) !important;
            overflow: hidden;
            box-shadow: var(--shadow-sm) !important;
        }

        .tox .tox-statusbar {
            border-top: 1px solid var(--gray-200) !important;
        }

        .tox .tox-toolbar, .tox .tox-toolbar__overflow, .tox .tox-toolbar__primary {
            background-color: var(--bg-white) !important;
        }

        .tox .tox-tbtn {
            border-radius: var(--radius) !important;
        }

        .tox .tox-tbtn:hover {
            background-color: var(--gray-100) !important;
        }

        /* ===== RESPONSIVE STYLES ===== */
        @media (max-width: 1200px) {
            .dashboard-sidebar {
                grid-column: span 4;
            }
            
            .dashboard-main {
                grid-column: span 8;
            }
        }

        @media (max-width: 992px) {
            .dashboard {
                grid-template-columns: 1fr;
            }
            
            .dashboard-sidebar, .dashboard-main {
                grid-column: span 1;
            }
            
            .posts-grid {
                grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            }
        }

        @media (max-width: 768px) {
            .header-container, .nav-container {
                padding: 0 1rem;
            }
            
            .main-content {
                padding: 1rem;
            }
            
            .user-name {
                display: none;
            }
            
            .nav-tab {
                padding: 0.75rem 1rem;
            }
            
            .nav-tab span {
                display: none;
            }
            
            .nav-btn span {
                display: none;
            }
        }

        @media (max-width: 576px) {
            .modal-footer {
                flex-direction: column;
            }
            
            .modal-footer .btn {
                width: 100%;
            }
            
            .form-group {
                margin-bottom: 1rem;
            }
            
            .content-card-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 0.75rem;
            }
            
            .content-card-header > div {
                width: 100%;
                display: flex;
                gap: 0.5rem;
            }
            
            .content-card-header .btn {
                flex: 1;
            }
        }

        /* Tab content styles */
        #createTab, #manageTab {
            display: none;
            animation: fadeIn 0.3s ease-out;
        }

        #createTab.active, #manageTab.active {
            display: block;
        }

        /* Status bar */
        .status-bar {
            background-color: var(--gray-100);
            border-top: 1px solid var(--gray-200);
            padding: 0.5rem 2rem;
            display: flex;
            align-items: center;
            font-size: 0.75rem;
            color: var(--text-light);
        }

        .status-item {
            margin-right: 1.5rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .status-item i {
            color: var(--primary);
        }

        .status-right {
            margin-left: auto;
            display: flex;
            gap: 1.5rem;
            align-items: center;
        }
    </style>
</head>
<body>
    <div class="app-container">
        <!-- Header -->
        <header class="top-header">
            <div class="header-container">
                <div class="logo-container">
                    <img src="SILAKBO (1).png" alt="Silakbo Logo" class="logo">
                    <span class="logo-text">ANG SILAKBO</span>
                </div>
                <div class="header-actions">
                    <button class="theme-toggle" id="themeToggle">
                        <i class="fas fa-moon"></i>
                    </button>
                    <div class="user-menu">
                        <div class="user-avatar">A</div>
                        <span class="user-name">Admin</span>
                        <i class="fas fa-chevron-down"></i>
                    </div>
                </div>
            </div>
        </header>

        <!-- Navigation -->
        <nav class="main-nav">
            <div class="nav-container">
                <div class="nav-tabs">
                    <button class="nav-tab active" data-tab="create">
                        <i class="fas fa-plus-circle"></i> <span>Create New Post</span>
                    </button>
                    <button class="nav-tab" data-tab="manage">
                        <i class="fas fa-list"></i> <span>Published Works</span>
                    </button>
                </div>
                <div class="nav-actions">
                    <button class="nav-btn" id="helpBtn">
                        <i class="fas fa-question-circle"></i> <span>Help</span>
                    </button>
                    <button class="nav-btn primary" id="createNewBtn">
                        <i class="fas fa-plus"></i> <span>New Post</span>
                    </button>
                </div>
            </div>
        </nav>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Alerts -->
            <div id="alertSuccess" class="alert alert-success">
                <i class="fas fa-check-circle"></i> 
                <span>Operation completed successfully!</span>
                <button class="alert-close">&times;</button>
            </div>
            <div id="alertError" class="alert alert-error">
                <i class="fas fa-exclamation-circle"></i> 
                <span id="errorMessage">An error occurred.</span>
                <button class="alert-close">&times;</button>
            </div>
            
            <!-- Create Tab Content -->
            <div id="createTab" class="active">
                <div class="dashboard">
                    <div class="dashboard-main">
                        <div class="content-card">
                            <div class="content-card-header">
                                <h2 class="content-card-title">
                                    <i class="fas fa-pen-fancy"></i> Create a New Post
                                </h2>
                            </div>
                            <div class="content-card-body">
                                <form id="postForm">
                                    <div class="form-group">
                                        <label class="form-label" for="category">
                                            <i class="fas fa-tag"></i> Category:
                                        </label>
                                        <select id="category" class="form-control" required>
                                            <option value="article">Article</option>
                                            <option value="literary">Literary</option>
                                            <option value="feature">Feature</option>
                                            <option value="silak">Silak-salitaan</option>
                                            <option value="photostory">Photostory</option>
                                        </select>
                                    </div>

                                    <div class="form-group">
                                        <label class="form-label" for="title">
                                            <i class="fas fa-heading"></i> Title:
                                        </label>
                                        <input type="text" id="title" class="form-control" required placeholder="Enter post title">
                                    </div>

                                    <div class="form-group">
                                        <label class="form-label" for="author">
                                            <i class="fas fa-user-edit"></i> Author:
                                        </label>
                                        <input type="text" id="author" class="form-control" required placeholder="Enter author's name">
                                    </div>

                                    <div class="form-group" id="additionalFields">
                                        <label class="form-label" id="roleLabel" for="additionalField">
                                            <i class="fas fa-camera"></i> Photojournalist:
                                        </label>
                                        <input type="text" id="additionalField" class="form-control" placeholder="Enter photojournalist's name">
                                    </div>

                                    <!-- Silak-salitaan specific fields -->
                                    <div class="silak-fields" id="silakFields">
                                        <div class="form-group">
                                            <label class="form-label">
                                                <i class="fas fa-language"></i> Part of Speech:
                                            </label>
                                            <div class="parts-of-speech">
                                                <label class="part-of-speech-option">
                                                    <input type="radio" name="partOfSpeech" value="noun" checked> Noun
                                                </label>
                                                <label class="part-of-speech-option">
                                                    <input type="radio" name="partOfSpeech" value="verb"> Verb
                                                </label>
                                                <label class="part-of-speech-option">
                                                    <input type="radio" name="partOfSpeech" value="adjective"> Adjective
                                                </label>
                                                <label class="part-of-speech-option">
                                                    <input type="radio" name="partOfSpeech" value="adverb"> Adverb
                                                </label>
                                                <label class="part-of-speech-option">
                                                    <input type="radio" name="partOfSpeech" value="pronoun"> Pronoun
                                                </label>
                                                <label class="part-of-speech-option">
                                                    <input type="radio" name="partOfSpeech" value="preposition"> Preposition
                                                </label>
                                                <label class="part-of-speech-option">
                                                    <input type="radio" name="partOfSpeech" value="conjunction"> Conjunction
                                                </label>
                                                <label class="part-of-speech-option">
                                                    <input type="radio" name="partOfSpeech" value="interjection"> Interjection
                                                </label>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label class="form-label" for="meaning">
                                                <i class="fas fa-book-open"></i> Meaning:
                                            </label>
                                            <textarea id="meaning" class="form-control" rows="4" placeholder="Enter the meaning of the word"></textarea>
                                        </div>
                                        <div class="form-group">
                                            <label class="form-label" for="example">
                                                <i class="fas fa-quote-right"></i> Example Usage:
                                            </label>
                                            <textarea id="example" class="form-control" rows="3" placeholder="Enter an example sentence using this word"></textarea>
                                        </div>
                                    </div>

                                    <div class="form-group">
                                        <label class="form-label" for="imageUpload">
                                            <i class="fas fa-image"></i> Upload Image:
                                        </label>
                                        <div class="file-upload">
                                            <div class="file-input-container">
                                                <label class="file-input-label">
                                                    <i class="fas fa-upload"></i> Choose File
                                                    <input type="file" id="imageUpload" accept="image/*">
                                                </label>
                                                <span class="file-name" id="fileName">
                                                    <i class="fas fa-file-image"></i> No file chosen
                                                </span>
                                            </div>
                                            <div class="image-preview-container">
                                                <img id="imagePreview" alt="Image Preview">
                                            </div>
                                        </div>
                                    </div>

                                    <div class="form-group" id="contentContainer">
                                        <label class="form-label" for="content">
                                            <i class="fas fa-paragraph"></i> Content:
                                        </label>
                                        <textarea id="content" class="form-control"></textarea>
                                    </div>
                                </form>
                            </div>
                            <div class="content-card-footer">
                                <button type="button" class="btn btn-secondary" id="resetBtn">
                                    <i class="fas fa-undo"></i> Reset
                                </button>
                                <button type="button" class="btn" id="saveBtn">
                                    <span class="spinner" id="submitSpinner"></span>
                                    <i class="fas fa-save"></i> Save Draft
                                </button>
                                <button type="button" class="btn btn-success" id="publishBtn">
                                    <i class="fas fa-paper-plane"></i> Publish Post
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <div class="dashboard-sidebar">
                        <div class="category-menu">
                            <div class="category-menu-header">
                                <h3 class="category-menu-title">
                                    <i class="fas fa-folder"></i> Categories
                                </h3>
                            </div>
                            <ul class="category-menu-list">
                                <li class="category-item">
                                    <a href="#" class="category-link active" id="navCreate">
                                        <i class="fas fa-plus-circle category-icon"></i>
                                        <span>Create New Post</span>
                                    </a>
                                </li>
                                <li class="category-item">
                                    <a href="#" class="category-link" id="navManage">
                                        <i class="fas fa-list category-icon"></i>
                                        <span>Published Works</span>
                                        <span class="category-badge">All</span>
                                    </a>
                                </li>
                                <li class="category-item">
                                    <a href="#" class="category-link" id="navArticles">
                                        <i class="fas fa-newspaper category-icon"></i>
                                        <span>Articles</span>
                                    </a>
                                </li>
                                <li class="category-item">
                                    <a href="#" class="category-link" id="navLiterary">
                                        <i class="fas fa-book category-icon"></i>
                                        <span>Literary Works</span>
                                    </a>
                                </li>
                                <li class="category-item">
                                    <a href="#" class="category-link" id="navFeature">
                                        <i class="fas fa-star category-icon"></i>
                                        <span>Feature</span>
                                    </a>
                                </li>
                                <li class="category-item">
                                    <a href="#" class="category-link" id="navSilak">
                                        <i class="fas fa-language category-icon"></i>
                                        <span>Silak-salitaan</span>
                                    </a>
                                </li>
                                <li class="category-item">
                                    <a href="#" class="category-link" id="navPhotostory">
                                        <i class="fas fa-camera category-icon"></i>
                                        <span>Photostory</span>
                                    </a>
                                </li>
                            </ul>
                        </div>
                        
                        <div class="tips-card">
                            <div class="tips-card-header">
                                <h3 class="tips-card-title">
                                    <i class="fas fa-lightbulb"></i> Writing Tips
                                </h3>
                            </div>
                            <div class="tips-card-body">
                                <div id="writingTipsContent">
                                    <!-- Tips will be loaded dynamically based on category -->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Manage Tab Content -->
            <div id="manageTab">
                <div class="content-card">
                    <div class="content-card-header">
                        <h2 class="content-card-title">
                            <i class="fas fa-list-alt"></i> Published Works
                        </h2>
                        <div>
                            <button class="btn btn-secondary" id="toggleViewBtn">
                                <i class="fas fa-th-large"></i> Toggle View
                            </button>
                            <button class="btn" id="refreshPostsBtn">
                                <i class="fas fa-sync-alt"></i> Refresh
                            </button>
                        </div>
                    </div>
                    <div class="content-card-body">
                        <div id="postsTableContainer">
                            <div id="loadingPosts" class="loading-container">
                                <div class="loading-spinner"></div>
                                <p class="loading-text">Loading posts...</p>
                            </div>
                            
                            <!-- Table View -->
                            <div class="table-container" id="postsTable" style="display: none;">
                                <table class="table">
                                    <thead>
                                        <tr>
                                            <th><i class="fas fa-tag"></i> Category</th>
                                            <th><i class="fas fa-heading"></i> Title</th>
                                            <th><i class="fas fa-user-edit"></i> Author</th>
                                            <th><i class="fas fa-user-tag"></i> Photo/Art</th>
                                            <th><i class="fas fa-calendar-alt"></i> Date</th>
                                            <th><i class="fas fa-cogs"></i> Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody id="postsTableBody">
                                        <!-- Posts will be loaded here -->
                                    </tbody>
                                </table>
                            </div>
                            
                            <!-- Grid View -->
                            <div class="posts-grid" id="postsGrid" style="display: none;">
                                <!-- Posts will be loaded here as cards -->
                            </div>
                            
                            <div id="noPostsMessage" class="empty-state" style="display: none;">
                                <i class="fas fa-inbox empty-icon"></i>
                                <p class="empty-text">No posts found.</p>
                                <button class="btn" id="createFirstPostBtn">
                                    <i class="fas fa-plus-circle"></i> Create Your First Post
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <!-- Status Bar -->
        <div class="status-bar">
            <div class="status-item">
                <i class="fas fa-check-circle"></i> Ready
            </div>
            <div class="status-right">
                <div class="status-item" id="wordCount">
                    <i class="fas fa-font"></i> Words: 0
                </div>
                <div class="status-item" id="characterCount">
                    <i class="fas fa-text-width"></i> Characters: 0
                </div>
                <div class="status-item">
                    <i class="far fa-clock"></i> <span id="currentTime">00:00</span>
                </div>
            </div>
        </div>

        <!-- Floating Action Button -->
        <button class="fab" id="createFab">
            <i class="fas fa-plus"></i>
        </button>
    </div>

    <!-- Modals -->
    <div class="modal-overlay" id="editModal">
        <div class="modal">
            <div class="modal-header">
                <h3 class="modal-title">
                    <i class="fas fa-edit"></i> Edit Post
                </h3>
                <button class="modal-close" id="closeEditModal">&times;</button>
            </div>
            <div class="modal-body">
                <form id="editForm">
                    <input type="hidden" id="editPostId">
                    <div class="form-group">
                        <label class="form-label" for="editCategory">
                            <i class="fas fa-tag"></i> Category:
                        </label>
                        <select id="editCategory" class="form-control" required>
                            <option value="article">Article</option>
                            <option value="literary">Literary</option>
                            <option value="feature">Feature</option>
                            <option value="silak">Silak-salitaan</option>
                            <option value="photostory">Photostory</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label class="form-label" for="editTitle">
                            <i class="fas fa-heading"></i> Title:
                        </label>
                        <input type="text" id="editTitle" class="form-control" required placeholder="Enter post title">
                    </div>

                    <div class="form-group">
                        <label class="form-label" for="editAuthor">
                            <i class="fas fa-user-edit"></i> Author:
                        </label>
                        <input type="text" id="editAuthor" class="form-control" required placeholder="Enter author's name">
                    </div>

                    <div class="form-group" id="editAdditionalFields">
                        <label class="form-label" id="editRoleLabel" for="editAdditionalField">
                            <i class="fas fa-camera"></i> Photojournalist:
                        </label>
                        <input type="text" id="editAdditionalField" class="form-control" placeholder="Enter photojournalist's name">
                    </div>

                    <!-- Silak-salitaan specific fields for edit -->
                    <div class="silak-fields" id="editSilakFields">
                        <div class="form-group">
                            <label class="form-label">
                                <i class="fas fa-language"></i> Part of Speech:
                            </label>
                            <div class="parts-of-speech">
                                <label class="part-of-speech-option">
                                    <input type="radio" name="editPartOfSpeech" value="noun" checked> Noun
                                </label>
                                <label class="part-of-speech-option">
                                    <input type="radio" name="editPartOfSpeech" value="verb"> Verb
                                </label>
                                <label class="part-of-speech-option">
                                    <input type="radio" name="editPartOfSpeech" value="adjective"> Adjective
                                </label>
                                <label class="part-of-speech-option">
                                    <input type="radio" name="editPartOfSpeech" value="adverb"> Adverb
                                </label>
                                <label class="part-of-speech-option">
                                    <input type="radio" name="editPartOfSpeech" value="pronoun"> Pronoun
                                </label>
                                <label class="part-of-speech-option">
                                    <input type="radio" name="editPartOfSpeech" value="preposition"> Preposition
                                </label>
                                <label class="part-of-speech-option">
                                    <input type="radio" name="editPartOfSpeech" value="conjunction"> Conjunction
                                </label>
                                <label class="part-of-speech-option">
                                    <input type="radio" name="editPartOfSpeech" value="interjection"> Interjection
                                </label>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="form-label" for="editMeaning">
                                <i class="fas fa-book-open"></i> Meaning:
                            </label>
                            <textarea id="editMeaning" class="form-control" rows="4" placeholder="Enter the meaning of the word"></textarea>
                        </div>
                        <div class="form-group">
                            <label class="form-label" for="editExample">
                                <i class="fas fa-quote-right"></i> Example Usage:
                            </label>
                            <textarea id="editExample" class="form-control" rows="3" placeholder="Enter an example sentence using this word"></textarea>
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="form-label" for="editImageUpload">
                            <i class="fas fa-image"></i> Upload New Image:
                        </label>
                        <div class="file-upload">
                            <div class="file-input-container">
                                <label class="file-input-label">
                                    <i class="fas fa-upload"></i> Choose File
                                    <input type="file" id="editImageUpload" accept="image/*">
                                </label>
                                <span class="file-name" id="editFileName">
                                    <i class="fas fa-file-image"></i> No file chosen
                                </span>
                            </div>
                            <div class="image-preview-container">
                                <img id="editImagePreview" alt="Image Preview">
                            </div>
                        </div>
                    </div>

                    <div class="form-group" id="editContentContainer">
                        <label class="form-label" for="editContent">
                            <i class="fas fa-paragraph"></i> Content:
                        </label>
                        <textarea id="editContent" class="form-control"></textarea>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" id="cancelEditBtn">
                    <i class="fas fa-times"></i> Cancel
                </button>
                <button class="btn" id="saveEditBtn">
                    <span class="spinner" id="editSpinner"></span>
                    <i class="fas fa-save"></i> Save Changes
                </button>
            </div>
        </div>
    </div>

    <div class="modal-overlay" id="deleteModal">
        <div class="modal">
            <div class="modal-header">
                <h3 class="modal-title">
                    <i class="fas fa-trash-alt"></i> Confirm Deletion
                </h3>
                <button class="modal-close" id="closeDeleteModal">&times;</button>
            </div>
            <div class="modal-body">
                <div style="text-align: center; margin-bottom: 20px;">
                    <i class="fas fa-exclamation-triangle" style="font-size: 48px; color: var(--error);"></i>
                </div>
                <p style="text-align: center; font-size: 18px; margin-bottom: 16px;">Are you sure you want to delete this post?</p>
                <p style="text-align: center; color: var(--text-light);">This action cannot be undone.</p>
                <input type="hidden" id="deletePostId">
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" id="cancelDeleteBtn">
                    <i class="fas fa-times"></i> Cancel
                </button>
                <button class="btn btn-danger" id="confirmDeleteBtn">
                    <span class="spinner" id="deleteSpinner"></span>
                    <i class="fas fa-trash-alt"></i> Delete
                </button>
            </div>
        </div>
    </div>

    <div class="modal-overlay" id="viewModal">
        <div class="modal">
            <div class="modal-header">
                <h3 class="modal-title">
                    <i class="fas fa-eye"></i> View Post
                </h3>
                <button class="modal-close" id="closeViewModal">&times;</button>
            </div>
            <div class="modal-body">
                <div id="viewPostContent">
                    <!-- Post content will be loaded here -->
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" id="closeViewBtn">
                    <i class="fas fa-times"></i> Close
                </button>
                <button class="btn" id="editFromViewBtn">
                    <i class="fas fa-edit"></i> Edit Post
                </button>
            </div>
        </div>
    </div>

    <!-- Help Modal -->
    <div class="modal-overlay" id="helpModal">
        <div class="modal">
            <div class="modal-header">
                <h3 class="modal-title">
                    <i class="fas fa-question-circle"></i> Help Center
                </h3>
                <button class="modal-close" id="closeHelpModal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="help-section">
                    <h3 class="help-title"><i class="fas fa-info-circle"></i> About Ang Silakbo Workstation</h3>
                    <p class="help-text">
                        Ang Silakbo Workstation is a content management system designed for writers, journalists, and content creators. It provides a streamlined workflow for creating, editing, and managing articles and literary works.
                    </p>
                </div>

                <div class="help-section">
                    <h3 class="help-title"><i class="fas fa-plus-circle"></i> Creating New Posts</h3>
                    <p class="help-text">
                        To create a new post, follow these steps:
                    </p>
                    <ul class="help-list">
                        <li class="help-list-item">Navigate to the "Create New Post" tab from the top navigation or sidebar.</li>
                        <li class="help-list-item">Select a category (Article, Literary, Feature, Silak-salitaan, or Photostory) from the dropdown menu.</li>
                        <li class="help-list-item">Fill in the required fields: Title and Author.</li>
                        <li class="help-list-item">Add a photojournalist or cartoonist name if applicable.</li>
                        <li class="help-list-item">For Silak-salitaan, fill in the part of speech, meaning, and example usage.</li>
                        <li class="help-list-item">Upload a featured image by clicking "Choose File".</li>
                        <li class="help-list-item">Write your content in the rich text editor (except for Silak-salitaan).</li>
                        <li class="help-list-item">Click "Save Draft" to save your work or "Publish Post" to make it live.</li>
                    </ul>
                </div>

                <div class="help-section">
                    <h3 class="help-title"><i class="fas fa-list"></i> Managing Published Works</h3>
                    <p class="help-text">
                        The "Published Works" section allows you to view, edit, and manage all your content:
                    </p>
                    <ul class="help-list">
                        <li class="help-list-item">Switch between Table and Grid views using the "Toggle View" button.</li>
                        <li class="help-list-item">Use the "View" button to read the full post.</li>
                        <li class="help-list-item">Use the "Edit" button to modify an existing post.</li>
                        <li class="help-list-item">Use the "Delete" button to remove a post (requires confirmation).</li>
                        <li class="help-list-item">Click "Refresh" to update the list with the latest changes.</li>
                    </ul>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn" id="closeHelpBtn">
                    <i class="fas fa-check"></i> Got It
                </button>
            </div>
        </div>
    </div>

    <script>
       // Initialize Supabase
const supabaseUrl = "https://uyxgsziyflquisckdwwc.supabase.co";
const supabaseKey = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InV5eGdzeml5ZmxxdWlzY2tkd3djIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDE1OTQyODUsImV4cCI6MjA1NzE3MDI4NX0.DoIEoWWuajDpBhD2UwLYzrKRyZNyBP4izasROCdIbkk";
const supabase = window.supabase.createClient(supabaseUrl, supabaseKey);

// Writing Tips Data
const writingTips = {
    article: [
        "Start with a compelling headline that grabs attention and summarizes your main point.",
        "Use the inverted pyramid structure: put the most important information first.",
        "Include relevant statistics and data to support your claims.",
        "Break up long paragraphs into shorter ones for better readability.",
        "Use subheadings to organize your content and guide readers through your article.",
        "Incorporate quotes from experts or relevant sources to add credibility.",
        "End with a strong conclusion that reinforces your main message."
    ],
    literary: [
        "Show, don't tell. Use descriptive language to create vivid imagery.",
        "Develop complex, multi-dimensional characters with unique voices.",
        "Experiment with different literary devices like metaphor, simile, and symbolism.",
        "Pay attention to rhythm and pacing in your narrative.",
        "Create a strong sense of setting that immerses readers in your world.",
        "Use dialogue to reveal character and advance the plot naturally.",
        "Revise and edit ruthlessly, focusing on language precision and emotional impact."
    ],
    feature: [
        "Focus on human interest and compelling storytelling.",
        "Use a narrative structure with a clear beginning, middle, and end.",
        "Include detailed descriptions and scene-setting elements.",
        "Incorporate multiple perspectives and voices through interviews.",
        "Balance factual reporting with creative storytelling techniques.",
        "Take time to develop themes and deeper meanings.",
        "End with a thought-provoking conclusion that resonates with readers."
    ],
    silak: [
        "Research the etymology and historical usage of the word.",
        "Provide clear, concise definitions that capture all meanings.",
        "Include example sentences that demonstrate proper usage.",
        "Note any regional variations or specific cultural contexts.",
        "Compare with similar words to highlight subtle differences.",
        "Document any idiomatic expressions that use the word.",
        "Cite authoritative sources to support your definitions."
    ],
    photostory: [
        "Select images that tell a cohesive narrative when viewed in sequence.",
        "Write concise, impactful captions that complement rather than describe the images.",
        "Consider the visual flow and how one image transitions to the next.",
        "Balance close-up detail shots with wider contextual images.",
        "Use consistent visual style and editing across all images.",
        "Ensure the opening and closing images are particularly strong.",
        "Let the images do most of the storytelling; keep text minimal but meaningful."
    ]
};

// Current view mode for posts (table or grid)
let currentViewMode = 'table';

// Dark mode toggle
let darkMode = false;

// Current category filter
let currentCategoryFilter = null;

// Initialize document
document.addEventListener('DOMContentLoaded', function() {
    // Update current time
    updateTime();
    setInterval(updateTime, 60000);
    
    // Initialize TinyMCE for create form
    tinymce.init({
        selector: '#content',
        plugins: 'anchor autolink charmap codesample emoticons image link lists media searchreplace table visualblocks wordcount',
        toolbar: 'undo redo | blocks fontfamily fontsize | bold italic underline strikethrough | link image media table | align lineheight | numlist bullist indent outdent | emoticons charmap | removeformat',
        height: 400,
        menubar: false,
        statusbar: true,
        branding: false,
        promotion: false,
        skin: 'oxide',
        content_css: 'default',
        setup: function(editor) {
            editor.on('init', function() {
                updateWritingTips('article'); // Default to article tips
            });
            
            // Update word count and character count
            editor.on('KeyUp', function() {
                const text = editor.getContent({ format: 'text' });
                updateWordCount(text);
                updateCharacterCount(text);
            });

            // Add keyboard shortcut for save
            editor.addShortcut('ctrl+s', 'Save draft', function() {
                document.getElementById('saveBtn').click();
                return false; // Prevent default browser save dialog
            });
        }
    });

    // Initialize TinyMCE for edit form
    tinymce.init({
        selector: '#editContent',
        plugins: 'anchor autolink charmap codesample emoticons image link lists media searchreplace table visualblocks wordcount',
        toolbar: 'undo redo | blocks fontfamily fontsize | bold italic underline strikethrough | link image media table | align lineheight | numlist bullist indent outdent | emoticons charmap | removeformat',
        height: 400,
        menubar: false,
        statusbar: true,
        branding: false,
        promotion: false,
        skin: 'oxide',
        content_css: 'default',
        setup: function(editor) {
            // Add keyboard shortcut for save
            editor.addShortcut('ctrl+s', 'Save changes', function() {
                document.getElementById('saveEditBtn').click();
                return false; // Prevent default browser save dialog
            });
        }
    });

    // Initialize writing tips
    updateWritingTips('article');
    
    // Initialize category change event
    document.getElementById('category').addEventListener('change', function() {
        const category = this.value;
        let label = document.getElementById('roleLabel');
        let additionalField = document.getElementById('additionalField');
        let silakFields = document.getElementById('silakFields');
        let contentContainer = document.getElementById('contentContainer');
        
        // Reset visibility
        silakFields.classList.remove('active');
        contentContainer.style.display = 'block';
        
        if (category === 'article' || category === 'feature' || category === 'photostory') {
            label.innerHTML = '<i class="fas fa-camera"></i> Photojournalist:';
            additionalField.placeholder = "Enter photojournalist's name";
        } else if (category === 'literary') {
            label.innerHTML = '<i class="fas fa-paint-brush"></i> Cartoonist:';
            additionalField.placeholder = "Enter cartoonist's name";
        }
        
        // Special handling for Silak-salitaan
        if (category === 'silak') {
            silakFields.classList.add('active');
            contentContainer.style.display = 'none';
            label.innerHTML = '<i class="fas fa-user-edit"></i> Contributor:';
            additionalField.placeholder = "Enter contributor's name";
        }
        
        // Update writing tips
        updateWritingTips(category);
    });
    
    // Initialize edit category change event
    document.getElementById('editCategory').addEventListener('change', function() {
        const category = this.value;
        let label = document.getElementById('editRoleLabel');
        let additionalField = document.getElementById('editAdditionalField');
        let silakFields = document.getElementById('editSilakFields');
        let contentContainer = document.getElementById('editContentContainer');
        
        // Reset visibility
        silakFields.classList.remove('active');
        contentContainer.style.display = 'block';
        
        if (category === 'article' || category === 'feature' || category === 'photostory') {
            label.innerHTML = '<i class="fas fa-camera"></i> Photojournalist:';
            additionalField.placeholder = "Enter photojournalist's name";
        } else if (category === 'literary') {
            label.innerHTML = '<i class="fas fa-paint-brush"></i> Cartoonist:';
            additionalField.placeholder = "Enter cartoonist's name";
        } else if (category === 'silak') {
            silakFields.classList.add('active');
            contentContainer.style.display = 'none';
            label.innerHTML = '<i class="fas fa-user-edit"></i> Contributor:';
            additionalField.placeholder = "Enter contributor's name";
        }
    });
    
    // Tab Navigation
    document.querySelectorAll('.nav-tab').forEach(tab => {
        tab.addEventListener('click', function() {
            // Update active tab
            document.querySelectorAll('.nav-tab').forEach(t => t.classList.remove('active'));
            this.classList.add('active');
            
            // Show corresponding content
            const tabId = this.getAttribute('data-tab');
            showTab(tabId);
        });
    });
    
    // Sidebar navigation
    document.getElementById('navCreate').addEventListener('click', function(e) {
        e.preventDefault();
        showTab('create');
        updateActiveNavLink(this);
    });
    
    document.getElementById('navManage').addEventListener('click', function(e) {
        e.preventDefault();
        showTab('manage');
        currentCategoryFilter = null; // Reset filter
        loadPosts(); // Load all posts
        updateActiveNavLink(this);
    });
    
    document.getElementById('navArticles').addEventListener('click', function(e) {
        e.preventDefault();
        showTab('manage');
        currentCategoryFilter = 'article';
        loadPosts('article'); // Load only articles
        updateActiveNavLink(this);
    });
    
    document.getElementById('navLiterary').addEventListener('click', function(e) {
        e.preventDefault();
        showTab('manage');
        currentCategoryFilter = 'literary';
        loadPosts('literary'); // Load only literary works
        updateActiveNavLink(this);
    });

    document.getElementById('navFeature').addEventListener('click', function(e) {
        e.preventDefault();
        showTab('manage');
        currentCategoryFilter = 'feature';
        loadPosts('feature'); // Load only features
        updateActiveNavLink(this);
    });

    document.getElementById('navSilak').addEventListener('click', function(e) {
        e.preventDefault();
        showTab('manage');
        currentCategoryFilter = 'silak';
        loadPosts('silak'); // Load only silak-salitaan
        updateActiveNavLink(this);
    });

    document.getElementById('navPhotostory').addEventListener('click', function(e) {
        e.preventDefault();
        showTab('manage');
        currentCategoryFilter = 'photostory';
        loadPosts('photostory'); // Load only photostories
        updateActiveNavLink(this);
    });
    
    // Create new post button
    document.getElementById('createNewBtn').addEventListener('click', function() {
        showTab('create');
        updateActiveNavLink(document.getElementById('navCreate'));
    });
    
    // Toggle view button (table/grid)
    document.getElementById('toggleViewBtn').addEventListener('click', function() {
        togglePostsView();
    });
    
    // Refresh posts button
    document.getElementById('refreshPostsBtn').addEventListener('click', function() {
        loadPosts(currentCategoryFilter);
    });
    
    // Save button
    document.getElementById('saveBtn').addEventListener('click', function() {
        document.getElementById('postForm').dispatchEvent(new Event('submit'));
    });
    
    // Publish button (same as save for now)
    document.getElementById('publishBtn').addEventListener('click', function() {
        document.getElementById('postForm').dispatchEvent(new Event('submit'));
    });
    
    // Reset button
    document.getElementById('resetBtn').addEventListener('click', function() {
        document.getElementById('postForm').reset();
        tinymce.get('content').setContent('');
        document.getElementById('imagePreview').style.display = 'none';
        document.getElementById('fileName').innerHTML = '<i class="fas fa-file-image"></i> No file chosen';
        document.getElementById('silakFields').classList.remove('active');
        document.getElementById('contentContainer').style.display = 'block';
        updateWordCount('');
        updateCharacterCount('');
    });
    
    // Create first post button
    document.getElementById('createFirstPostBtn').addEventListener('click', function() {
        showTab('create');
        updateActiveNavLink(document.getElementById('navCreate'));
    });

    // Floating action button
    document.getElementById('createFab').addEventListener('click', function() {
        showTab('create');
        updateActiveNavLink(document.getElementById('navCreate'));
    });

    // Help button
    document.getElementById('helpBtn').addEventListener('click', function() {
        openHelpModal();
    });

    // Close help modal
    document.getElementById('closeHelpModal').addEventListener('click', function() {
        document.getElementById('helpModal').style.display = 'none';
        document.getElementById('helpModal').classList.remove('active');
    });

    document.getElementById('closeHelpBtn').addEventListener('click', function() {
        document.getElementById('helpModal').style.display = 'none';
        document.getElementById('helpModal').classList.remove('active');
    });
    
    // Theme toggle
    document.getElementById('themeToggle').addEventListener('click', function() {
        toggleDarkMode();
    });
    
    // Load posts initially
    loadPosts();
});

// Toggle dark mode
function toggleDarkMode() {
    darkMode = !darkMode;
    if (darkMode) {
        document.body.classList.add('dark');
        document.getElementById('themeToggle').innerHTML = '<i class="fas fa-sun"></i>';
    } else {
        document.body.classList.remove('dark');
        document.getElementById('themeToggle').innerHTML = '<i class="fas fa-moon"></i>';
    }
    
    // Update TinyMCE skin
    if (tinymce.activeEditor) {
        tinymce.activeEditor.ui.styleSheetLoader.unload('default');
        tinymce.activeEditor.ui.styleSheetLoader.load(darkMode ? 'oxide-dark' : 'oxide');
    }
}

// Open help modal
function openHelpModal() {
    document.getElementById('helpModal').style.display = 'flex';
    document.getElementById('helpModal').classList.add('active');
}

// Update active navigation link
function updateActiveNavLink(activeLink) {
    document.querySelectorAll('.category-link').forEach(link => {
        link.classList.remove('active');
    });
    activeLink.classList.add('active');
}

// Toggle posts view between table and grid
function togglePostsView() {
    const tableView = document.getElementById('postsTable');
    const gridView = document.getElementById('postsGrid');
    
    if (currentViewMode === 'table') {
        tableView.style.display = 'none';
        gridView.style.display = 'grid';
        currentViewMode = 'grid';
        document.getElementById('toggleViewBtn').innerHTML = '<i class="fas fa-table"></i> Table View';
    } else {
        tableView.style.display = 'block';
        gridView.style.display = 'none';
        currentViewMode = 'table';
        document.getElementById('toggleViewBtn').innerHTML = '<i class="fas fa-th-large"></i> Grid View';
    }
}

// Update writing tips based on category
function updateWritingTips(category) {
    const tipsContainer = document.getElementById('writingTipsContent');
    tipsContainer.innerHTML = '';
    
    const tips = writingTips[category] || writingTips.article;
    
    tips.forEach(tip => {
        const tipElement = document.createElement('div');
        tipElement.className = 'writing-tip';
        tipElement.textContent = tip;
        tipsContainer.appendChild(tipElement);
    });
}

// Update word count
function updateWordCount(text) {
    const wordCount = text ? text.split(/\s+/).filter(word => word.length > 0).length : 0;
    document.getElementById('wordCount').innerHTML = `<i class="fas fa-font"></i> Words: ${wordCount}`;
}

// Update character count
function updateCharacterCount(text) {
    const charCount = text ? text.length : 0;
    document.getElementById('characterCount').innerHTML = `<i class="fas fa-text-width"></i> Characters: ${charCount}`;
}

// Update time
function updateTime() {
    const now = new Date();
    const hours = now.getHours().toString().padStart(2, '0');
    const minutes = now.getMinutes().toString().padStart(2, '0');
    document.getElementById('currentTime').textContent = `${hours}:${minutes}`;
}

// Show tab (create or manage)
function showTab(tabId) {
    // Hide all tabs
    document.getElementById('createTab').classList.remove('active');
    document.getElementById('manageTab').classList.remove('active');
    
    // Show selected tab
    document.getElementById(tabId + 'Tab').classList.add('active');
    
    // Update tab buttons
    document.querySelectorAll('.nav-tab').forEach(tab => {
        tab.classList.remove('active');
        if (tab.getAttribute('data-tab') === tabId) {
            tab.classList.add('active');
        }
    });
    
    // If switching to manage tab, load posts with current filter
    if (tabId === 'manage') {
        loadPosts(currentCategoryFilter);
    }
    
    // Show/hide floating action button
    if (tabId === 'create') {
        document.getElementById('createFab').style.display = 'none';
    } else {
        document.getElementById('createFab').style.display = 'flex';
    }
}

// Image Preview Feature
document.getElementById('imageUpload').addEventListener('change', function(event) {
    const file = event.target.files[0];
    if (file) {
        const reader = new FileReader();
        reader.onload = function(e) {
            const imgPreview = document.getElementById('imagePreview');
            imgPreview.src = e.target.result;
            imgPreview.style.display = 'block';
            document.getElementById('fileName').innerHTML = '<i class="fas fa-file-image"></i> ' + file.name;
        };
        reader.readAsDataURL(file);
    }
});

// Edit Image Preview Feature
document.getElementById('editImageUpload').addEventListener('change', function(event) {
    const file = event.target.files[0];
    if (file) {
        const reader = new FileReader();
        reader.onload = function(e) {
            const imgPreview = document.getElementById('editImagePreview');
            imgPreview.src = e.target.result;
            imgPreview.style.display = 'block';
            document.getElementById('editFileName').innerHTML = '<i class="fas fa-file-image"></i> ' + file.name;
        };
        reader.readAsDataURL(file);
    }
});

// Handle form submission
document.getElementById('postForm').addEventListener('submit', async function(event) {
    event.preventDefault();
    
    // Show spinner
    const submitBtn = document.getElementById('saveBtn');
    const submitSpinner = document.getElementById('submitSpinner');
    submitBtn.disabled = true;
    submitSpinner.style.display = 'inline-block';
    
    try {
        const category = document.getElementById('category').value;
        const title = document.getElementById('title').value;
        const author = document.getElementById('author').value;
        const role = document.getElementById('additionalField').value;
        const imageFile = document.getElementById('imageUpload').files[0];
        
        // Get content based on category
        let content = '';
        let partOfSpeech = '';
        let meaning = '';
        let example = '';
        
        if (category === 'silak') {
            partOfSpeech = document.querySelector('input[name="partOfSpeech"]:checked').value;
            meaning = document.getElementById('meaning').value;
            example = document.getElementById('example').value;
            // For silak-salitaan, store the data in a structured format
            content = JSON.stringify({
                partOfSpeech,
                meaning,
                example
            });
        } else {
            content = tinymce.get('content').getContent();
        }
        
        let imageUrl = '';
        if (imageFile) {
            const formData = new FormData();
            formData.append("file", imageFile);
            formData.append("upload_preset", "Ang Silakbo");
            
            const response = await fetch("https://api.cloudinary.com/v1_1/ddalveuw6/image/upload", {
                method: "POST",
                body: formData
            });

            const data = await response.json();
            if (data.error) {
                throw new Error(data.error.message);
            }
            imageUrl = data.secure_url;
        }

        const { data, error } = await supabase
            .from("posts")
            .insert([{ 
                category, 
                title,
                author, 
                role, 
                content, 
                image_url: imageUrl,
                created_at: new Date().toISOString()
            }]);
        
        if (error) {
            throw new Error(error.message);
        }

        // Show success message
        showAlert('success', 'Post created successfully!');
        
        // Reset form
        document.getElementById('postForm').reset();
        tinymce.get('content').setContent('');
        document.getElementById('imagePreview').style.display = 'none';
        document.getElementById('fileName').innerHTML = '<i class="fas fa-file-image"></i> No file chosen';
        document.getElementById('silakFields').classList.remove('active');
        document.getElementById('contentContainer').style.display = 'block';
        updateWordCount('');
        updateCharacterCount('');
        
        // Refresh posts list
        loadPosts(currentCategoryFilter);
    } catch (error) {
        console.error("Error saving post:", error);
        showAlert('error', error.message || 'Error creating post. Please try again.');
    } finally {
        // Enable button
        submitBtn.disabled = false;
        submitSpinner.style.display = 'none';
    }
});

// Load posts from Supabase
async function loadPosts(categoryFilter = null) {
    const loadingElement = document.getElementById('loadingPosts');
    const tableElement = document.getElementById('postsTable');
    const gridElement = document.getElementById('postsGrid');
    const noPostsMessage = document.getElementById('noPostsMessage');
    
    loadingElement.style.display = 'flex';
    tableElement.style.display = 'none';
    gridElement.style.display = 'none';
    noPostsMessage.style.display = 'none';
    
    try {
        let query = supabase
            .from('posts')
            .select('*')
            .order('created_at', { ascending: false });
        
        // Apply category filter if provided
        if (categoryFilter) {
            query = query.eq('category', categoryFilter);
        }
        
        const { data, error } = await query;
        
        if (error) {
            throw new Error(error.message);
        }
        
        const tableBody = document.getElementById('postsTableBody');
        const gridContainer = document.getElementById('postsGrid');
        
        tableBody.innerHTML = '';
        gridContainer.innerHTML = '';
        
        if (data && data.length > 0) {
            data.forEach(post => {
                // Format date
                const date = new Date(post.created_at);
                const formattedDate = date.toLocaleDateString() + ' ' + date.toLocaleTimeString();
                
                // Category badge and icon
                let categoryClass, categoryIcon, categoryText;
                
                switch(post.category) {
                    case 'article':
                        categoryClass = 'badge-article';
                        categoryIcon = 'newspaper';
                        categoryText = 'Article';
                        break;
                    case 'literary':
                        categoryClass = 'badge-literary';
                        categoryIcon = 'book';
                        categoryText = 'Literary';
                        break;
                    case 'feature':
                        categoryClass = 'badge-feature';
                        categoryIcon = 'star';
                        categoryText = 'Feature';
                        break;
                    case 'silak':
                        categoryClass = 'badge-silak';
                        categoryIcon = 'language';
                        categoryText = 'Silak-salitaan';
                        break;
                    case 'photostory':
                        categoryClass = 'badge-photostory';
                        categoryIcon = 'camera';
                        categoryText = 'Photostory';
                        break;
                    default:
                        categoryClass = 'badge-article';
                        categoryIcon = 'newspaper';
                        categoryText = post.category.charAt(0).toUpperCase() + post.category.slice(1);
                }
                
                // Create table row
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>
                        <span class="post-category ${categoryClass}">
                            <i class="fas fa-${categoryIcon}"></i> ${categoryText}
                        </span>
                    </td>
                    <td>${post.title || 'Untitled'}</td>
                    <td>${post.author}</td>
                    <td>${post.role || '-'}</td>
                    <td><i class="far fa-clock"></i> ${formattedDate}</td>
                    <td>
                        <div class="action-buttons">
                            <button class="action-btn action-btn-view tooltip" data-id="${post.id}" data-tooltip="View Post">
                                <i class="fas fa-eye"></i>
                            </button>
                            <button class="action-btn action-btn-edit tooltip" data-id="${post.id}" data-tooltip="Edit Post">
                                <i class="fas fa-edit"></i>
                            </button>
                            <button class="action-btn action-btn-delete tooltip" data-id="${post.id}" data-tooltip="Delete Post">
                                <i class="fas fa-trash-alt"></i>
                            </button>
                        </div>
                    </td>
                `;
                
                tableBody.appendChild(row);
                
                // Create grid card
                const card = document.createElement('div');
                card.className = 'post-card';
                
                // Default image if none provided
                const imageUrl = post.image_url || 'https://via.placeholder.com/300x180?text=No+Image';
                
                card.innerHTML = `
                    <img src="${imageUrl}" alt="${post.title}" class="post-image">
                    <div class="post-content">
                        <span class="post-category ${categoryClass}">
                            <i class="fas fa-${categoryIcon}"></i> ${categoryText}
                        </span>
                        <h3 class="post-title">${post.title || 'Untitled'}</h3>
                        <div class="post-meta">
                            <div class="post-meta-item">
                                <i class="fas fa-user-edit"></i> ${post.author}
                            </div>
                            <div class="post-meta-item">
                                <i class="far fa-clock"></i> ${formattedDate.split(' ')[0]}
                            </div>
                        </div>
                        <div class="post-actions">
                            <button class="btn btn-sm btn-secondary view-post-btn" data-id="${post.id}">
                                <i class="fas fa-eye"></i> View
                            </button>
                            <button class="btn btn-sm edit-post-btn" data-id="${post.id}">
                                <i class="fas fa-edit"></i> Edit
                            </button>
                            <button class="btn btn-sm btn-danger delete-post-btn" data-id="${post.id}">
                                <i class="fas fa-trash-alt"></i>
                            </button>
                        </div>
                    </div>
                `;
                
                gridContainer.appendChild(card);
            });
            
            // Show the current view mode
            if (currentViewMode === 'table') {
                tableElement.style.display = 'block';
            } else {
                gridElement.style.display = 'grid';
            }
            
            // Add event listeners to table view buttons
            document.querySelectorAll('.action-btn-view').forEach(button => {
                button.addEventListener('click', () => openViewModal(button.getAttribute('data-id')));
            });
            
            document.querySelectorAll('.action-btn-edit').forEach(button => {
                button.addEventListener('click', () => openEditModal(button.getAttribute('data-id')));
            });
            
            document.querySelectorAll('.action-btn-delete').forEach(button => {
                button.addEventListener('click', () => openDeleteModal(button.getAttribute('data-id')));
            });
            
            // Add event listeners to grid view buttons
            document.querySelectorAll('.view-post-btn').forEach(button => {
                button.addEventListener('click', () => openViewModal(button.getAttribute('data-id')));
            });
            
            document.querySelectorAll('.edit-post-btn').forEach(button => {
                button.addEventListener('click', () => openEditModal(button.getAttribute('data-id')));
            });
            
            document.querySelectorAll('.delete-post-btn').forEach(button => {
                button.addEventListener('click', () => openDeleteModal(button.getAttribute('data-id')));
            });
        } else {
            noPostsMessage.style.display = 'flex';
        }
    } catch (error) {
        console.error("Error loading posts:", error);
        showAlert('error', error.message || 'Error loading posts. Please try again.');
    } finally {
        loadingElement.style.display = 'none';
    }
}

// Open view modal
async function openViewModal(postId) {
    try {
        const { data, error } = await supabase
            .from('posts')
            .select('*')
            .eq('id', postId)
            .single();
        
        if (error) {
            throw new Error(error.message);
        }
        
        if (data) {
            const viewContent = document.getElementById('viewPostContent');
            
            // Format date
            const date = new Date(data.created_at);
            const formattedDate = date.toLocaleDateString() + ' ' + date.toLocaleTimeString();
            
            // Category badge and icon
            let categoryClass, categoryIcon, categoryText;
            
            switch(data.category) {
                case 'article':
                    categoryClass = 'badge-article';
                    categoryIcon = 'newspaper';
                    categoryText = 'Article';
                    break;
                case 'literary':
                    categoryClass = 'badge-literary';
                    categoryIcon = 'book';
                    categoryText = 'Literary';
                    break;
                case 'feature':
                    categoryClass = 'badge-feature';
                    categoryIcon = 'star';
                    categoryText = 'Feature';
                    break;
                case 'silak':
                    categoryClass = 'badge-silak';
                    categoryIcon = 'language';
                    categoryText = 'Silak-salitaan';
                    break;
                case 'photostory':
                    categoryClass = 'badge-photostory';
                    categoryIcon = 'camera';
                    categoryText = 'Photostory';
                    break;
                default:
                    categoryClass = 'badge-article';
                    categoryIcon = 'newspaper';
                    categoryText = data.category.charAt(0).toUpperCase() + data.category.slice(1);
            }
            
            let html = `
                <div style="margin-bottom: 16px;">
                    <span class="post-category ${categoryClass}">
                        <i class="fas fa-${categoryIcon}"></i> ${categoryText}
                    </span>
                </div>
                
                <h2 style="font-size: 24px; margin-bottom: 16px; color: var(--text-dark); font-weight: 600;">
                    ${data.title || 'Untitled'}
                </h2>
            `;
            
            if (data.image_url) {
                html += `
                    <div style="margin-bottom: 20px; text-align: center;">
                        <img src="${data.image_url}" alt="Post Image" style="max-width: 100%; border-radius: var(--radius-lg); box-shadow: var(--shadow);">
                    </div>
                `;
            }
            
            // Role label based on category
            let roleLabel;
            if (data.category === 'literary') {
                roleLabel = 'Cartoonist';
            } else if (data.category === 'silak') {
                roleLabel = 'Contributor';
            } else {
                roleLabel = 'Photojournalist';
            }
            
            html += `
                <div style="margin-bottom: 20px;">
                    <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 8px;">
                        <i class="fas fa-user-edit" style="color: var(--primary);"></i>
                        <strong>Author:</strong> ${data.author}
                    </div>
                    
                    <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 8px;">
                        <i class="fas fa-${data.category === 'literary' ? 'paint-brush' : (data.category === 'silak' ? 'user-edit' : 'camera')}" style="color: var(--primary);"></i>
                        <strong>${roleLabel}:</strong> ${data.role || '-'}
                    </div>
                    
                    <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 16px;">
                        <i class="far fa-clock" style="color: var(--primary);"></i>
                        <strong>Published:</strong> ${formattedDate}
                    </div>
                </div>
            `;
            
            // Display content based on category
            if (data.category === 'silak') {
                try {
                    const silakData = JSON.parse(data.content);
                    html += `
                        <div style="border-top: 1px solid var(--gray-200); padding-top: 20px;">
                            <div style="margin-bottom: 16px;">
                                <strong style="color: var(--primary);">Part of Speech:</strong> 
                                <span style="text-transform: capitalize;">${silakData.partOfSpeech}</span>
                            </div>
                            <div style="margin-bottom: 16px;">
                                <strong style="color: var(--primary);">Meaning:</strong>
                                <p style="margin-top: 8px;">${silakData.meaning}</p>
                            </div>
                            <div>
                                <strong style="color: var(--primary);">Example Usage:</strong>
                                <p style="margin-top: 8px; font-style: italic;">"${silakData.example}"</p>
                            </div>
                        </div>
                    `;
                } catch (e) {
                    html += `
                        <div style="border-top: 1px solid var(--gray-200); padding-top: 20px;">
                            ${data.content}
                        </div>
                    `;
                }
            } else {
                html += `
                    <div style="border-top: 1px solid var(--gray-200); padding-top: 20px;">
                        ${data.content}
                    </div>
                `;
            }
            
            viewContent.innerHTML = html;
            
            // Store post ID for edit button
            document.getElementById('editFromViewBtn').setAttribute('data-id', postId);
            
            // Show modal
            document.getElementById('viewModal').style.display = 'flex';
            document.getElementById('viewModal').classList.add('active');
        }
    } catch (error) {
        console.error("Error loading post for view:", error);
        showAlert('error', error.message || 'Error loading post. Please try again.');
    }
}

// Open edit modal
async function openEditModal(postId) {
    try {
        const { data, error } = await supabase
            .from('posts')
            .select('*')
            .eq('id', postId)
            .single();
        
        if (error) {
            throw new Error(error.message);
        }
        
        if (data) {
            document.getElementById('editPostId').value = data.id;
            document.getElementById('editCategory').value = data.category;
            document.getElementById('editTitle').value = data.title || '';
            document.getElementById('editAuthor').value = data.author;
            document.getElementById('editAdditionalField').value = data.role || '';
            
            // Update role label based on category
            let label = document.getElementById('editRoleLabel');
            let additionalField = document.getElementById('editAdditionalField');
            let silakFields = document.getElementById('editSilakFields');
            let contentContainer = document.getElementById('editContentContainer');
            
            // Reset visibility
            silakFields.classList.remove('active');
            contentContainer.style.display = 'block';
            
            if (data.category === 'article' || data.category === 'feature' || data.category === 'photostory') {
                label.innerHTML = '<i class="fas fa-camera"></i> Photojournalist:';
                additionalField.placeholder = "Enter photojournalist's name";
            } else if (data.category === 'literary') {
                label.innerHTML = '<i class="fas fa-paint-brush"></i> Cartoonist:';
                additionalField.placeholder = "Enter cartoonist's name";
            } else if (data.category === 'silak') {
                label.innerHTML = '<i class="fas fa-user-edit"></i> Contributor:';
                additionalField.placeholder = "Enter contributor's name";
                silakFields.classList.add('active');
                contentContainer.style.display = 'none';
                
                // Parse silak-salitaan data
                try {
                    const silakData = JSON.parse(data.content);
                    document.querySelector(`input[name="editPartOfSpeech"][value="${silakData.partOfSpeech}"]`).checked = true;
                    document.getElementById('editMeaning').value = silakData.meaning || '';
                    document.getElementById('editExample').value = silakData.example || '';
                } catch (e) {
                    console.error("Error parsing silak data:", e);
                }
            }
            
            // Set content in TinyMCE if not silak-salitaan
            if (data.category !== 'silak') {
                tinymce.get('editContent').setContent(data.content || '');
            }
            
            // Show image preview if available
            const imgPreview = document.getElementById('editImagePreview');
            if (data.image_url) {
                imgPreview.src = data.image_url;
                imgPreview.style.display = 'block';
            } else {
                imgPreview.style.display = 'none';
            }
            
            // Reset file name
            document.getElementById('editFileName').innerHTML = '<i class="fas fa-file-image"></i> No file chosen';
            
            // Show modal
            document.getElementById('editModal').style.display = 'flex';
            document.getElementById('editModal').classList.add('active');
        }
    } catch (error) {
        console.error("Error loading post for edit:", error);
        showAlert('error', error.message || 'Error loading post. Please try again.');
    }
}

// Handle edit form submission
document.getElementById('saveEditBtn').addEventListener('click', async function() {
    // Show spinner
    const saveBtn = document.getElementById('saveEditBtn');
    const editSpinner = document.getElementById('editSpinner');
    saveBtn.disabled = true;
    editSpinner.style.display = 'inline-block';
    
    try {
        const postId = document.getElementById('editPostId').value;
        const category = document.getElementById('editCategory').value;
        const title = document.getElementById('editTitle').value;
        const author = document.getElementById('editAuthor').value;
        const role = document.getElementById('editAdditionalField').value;
        const imageFile = document.getElementById('editImageUpload').files[0];
        
        // Get content based on category
        let content = '';
        
        if (category === 'silak') {
            const partOfSpeech = document.querySelector('input[name="editPartOfSpeech"]:checked').value;
            const meaning = document.getElementById('editMeaning').value;
            const example = document.getElementById('editExample').value;
            // For silak-salitaan, store the data in a structured format
            content = JSON.stringify({
                partOfSpeech,
                meaning,
                example
            });
        } else {
            content = tinymce.get('editContent').getContent();
        }
        
        let updateData = { 
            category, 
            title,
            author, 
            role, 
            content,
            updated_at: new Date().toISOString()
        };
        
        // Upload new image if selected
        if (imageFile) {
            const formData = new FormData();
            formData.append("file", imageFile);
            formData.append("upload_preset", "Ang Silakbo");
            
            const response = await fetch("https://api.cloudinary.com/v1_1/ddalveuw6/image/upload", {
                method: "POST",
                body: formData
            });

            const data = await response.json();
            if (data.error) {
                throw new Error(data.error.message);
            }
            updateData.image_url = data.secure_url;
        }

        const { error } = await supabase
            .from("posts")
            .update(updateData)
            .eq('id', postId);
        
        if (error) {
            throw new Error(error.message);
        }

        // Show success message
        showAlert('success', 'Post updated successfully!');
        
        // Close modal
        document.getElementById('editModal').style.display = 'none';
        document.getElementById('editModal').classList.remove('active');
        
        // Refresh posts list with current filter
        loadPosts(currentCategoryFilter);
    } catch (error) {
        console.error("Error updating post:", error);
        showAlert('error', error.message || 'Error updating post. Please try again.');
    } finally {
        // Hide spinner
        saveBtn.disabled = false;
        editSpinner.style.display = 'none';
    }
});

// Open delete modal
function openDeleteModal(postId) {
    document.getElementById('deletePostId').value = postId;
    document.getElementById('deleteModal').style.display = 'flex';
    document.getElementById('deleteModal').classList.add('active');
}

// Handle delete confirmation
document.getElementById('confirmDeleteBtn').addEventListener('click', async function() {
    // Show spinner
    const deleteBtn = document.getElementById('confirmDeleteBtn');
    const deleteSpinner = document.getElementById('deleteSpinner');
    deleteBtn.disabled = true;
    deleteSpinner.style.display = 'inline-block';
    
    try {
        const postId = document.getElementById('deletePostId').value;
        
        const { error } = await supabase
            .from("posts")
            .delete()
            .eq('id', postId);
        
        if (error) {
            throw new Error(error.message);
        }

        // Show success message
        showAlert('success', 'Post deleted successfully!');
        
        // Close modal
        document.getElementById('deleteModal').style.display = 'none';
        document.getElementById('deleteModal').classList.remove('active');
        
        // Refresh posts list with current filter
        loadPosts(currentCategoryFilter);
    } catch (error) {
        console.error("Error deleting post:", error);
        showAlert('error', error.message || 'Error deleting post. Please try again.');
    } finally {
        // Hide spinner
        deleteBtn.disabled = false;
        deleteSpinner.style.display = 'none';
    }
});

// Edit from view modal
document.getElementById('editFromViewBtn').addEventListener('click', function() {
    const postId = this.getAttribute('data-id');
    document.getElementById('viewModal').style.display = 'none';
    document.getElementById('viewModal').classList.remove('active');
    openEditModal(postId);
});

// Close modals
document.getElementById('closeEditModal').addEventListener('click', () => {
    document.getElementById('editModal').style.display = 'none';
    document.getElementById('editModal').classList.remove('active');
});

document.getElementById('cancelEditBtn').addEventListener('click', () => {
    document.getElementById('editModal').style.display = 'none';
    document.getElementById('editModal').classList.remove('active');
});

document.getElementById('closeDeleteModal').addEventListener('click', () => {
    document.getElementById('deleteModal').style.display = 'none';
    document.getElementById('deleteModal').classList.remove('active');
});

document.getElementById('cancelDeleteBtn').addEventListener('click', () => {
    document.getElementById('deleteModal').style.display = 'none';
    document.getElementById('deleteModal').classList.remove('active');
});

document.getElementById('closeViewModal').addEventListener('click', () => {
    document.getElementById('viewModal').style.display = 'none';
    document.getElementById('viewModal').classList.remove('active');
});

document.getElementById('closeViewBtn').addEventListener('click', () => {
    document.getElementById('viewModal').style.display = 'none';
    document.getElementById('viewModal').classList.remove('active');
});

// Show alert message
function showAlert(type, message) {
    const alertSuccess = document.getElementById('alertSuccess');
    const alertError = document.getElementById('alertError');
    const errorMessage = document.getElementById('errorMessage');
    
    if (type === 'success') {
        alertSuccess.querySelector('span').textContent = message;
        alertSuccess.style.display = 'flex';
        alertSuccess.style.opacity = '1';
        alertSuccess.style.transform = 'translateY(0)';
        alertError.style.display = 'none';
        
        setTimeout(() => {
            alertSuccess.style.opacity = '0';
            alertSuccess.style.transform = 'translateY(-5px)';
            setTimeout(() => {
                alertSuccess.style.display = 'none';
            }, 300);
        }, 5000);
    } else {
        errorMessage.textContent = message;
        alertError.style.display = 'flex';
        alertError.style.opacity = '1';
        alertError.style.transform = 'translateY(0)';
        alertSuccess.style.display = 'none';
        
        setTimeout(() => {
            alertError.style.opacity = '0';
            alertError.style.transform = 'translateY(-5px)';
            setTimeout(() => {
                alertError.style.display = 'none';
            }, 300);
        }, 5000);
    }
}

// Close alert when clicked
document.querySelectorAll('.alert-close').forEach(button => {
    button.addEventListener('click', function() {
        const alert = this.parentElement;
        alert.style.opacity = '0';
        alert.style.transform = 'translateY(-5px)';
        setTimeout(() => {
            alert.style.display = 'none';
        }, 300);
    });
});
    </script>
</body>
</html>
