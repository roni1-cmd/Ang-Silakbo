<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ang Silakbo - Workstation</title>
    <link rel="icon" href="SILAKBO (1).png">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.tiny.cloud/1/n92j01vjprp9xy96v0uxd2kgqi5vnd50dwm5i47veg2u1bur/tinymce/6/tinymce.min.js" referrerpolicy="origin"></script>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            /* Orange color scheme */
            --primary: #FF5722;
            --primary-light: #FF8A65;
            --primary-dark: #E64A19;
            --secondary: #F9FAFB;
            --accent: #FF9800;
            --text-dark: #1F2937;
            --text-medium: #4B5563;
            --text-light: #6B7280;
            --white: #FFFFFF;
            --gray-50: #F9FAFB;
            --gray-100: #F3F4F6;
            --gray-200: #E5E7EB;
            --gray-300: #D1D5DB;
            --gray-400: #9CA3AF;
            --gray-500: #6B7280;
            --success: #10B981;
            --error: #EF4444;
            --warning: #F59E0B;
            --info: #3B82F6;
            
            /* Spacing and sizing */
            --border-radius-sm: 0.375rem;
            --border-radius: 0.5rem;
            --border-radius-lg: 0.75rem;
            --border-radius-xl: 1rem;
            --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
            --shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            --shadow-md: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            --shadow-lg: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
            --transition: all 0.2s ease;
            
            /* App-specific variables */
            --header-height: 64px;
            --sidebar-width: 280px;
            --sidebar-collapsed-width: 80px;
            --nav-height: 56px;
            --status-bar-height: 36px;
            --content-max-width: 1280px;
            
            /* Colors */
            --bg-primary: #FFFFFF;
            --bg-secondary: #F9FAFB;
            --bg-tertiary: #F3F4F6;
            --border-color: #E5E7EB;
            --nav-active: rgba(255, 87, 34, 0.1);
            --nav-hover: rgba(255, 87, 34, 0.05);
        }

        /* Dark mode variables */
        .dark {
            --primary: #FF5722;
            --primary-light: #FF8A65;
            --primary-dark: #E64A19;
            --secondary: #111827;
            --accent: #FF9800;
            --text-dark: #F9FAFB;
            --text-medium: #E5E7EB;
            --text-light: #D1D5DB;
            --white: #1F2937;
            --gray-50: #111827;
            --gray-100: #1F2937;
            --gray-200: #374151;
            --gray-300: #4B5563;
            --gray-400: #6B7280;
            --gray-500: #9CA3AF;
            --bg-primary: #111827;
            --bg-secondary: #1F2937;
            --bg-tertiary: #374151;
            --border-color: #374151;
            --nav-active: rgba(255, 87, 34, 0.2);
            --nav-hover: rgba(255, 87, 34, 0.1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Poppins', sans-serif;
        }

        body {
            background-color: var(--bg-secondary);
            color: var(--text-dark);
            line-height: 1.5;
            height: 100vh;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }

        ::-webkit-scrollbar-track {
            background: var(--bg-secondary);
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb {
            background: var(--gray-300);
            border-radius: 4px;
            border: 2px solid var(--bg-secondary);
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--primary-light);
        }

        /* ===== HEADER ===== */
        .app-header {
            background-color: var(--bg-primary);
            border-bottom: 1px solid var(--border-color);
            display: flex;
            align-items: center;
            padding: 0 1.5rem;
            height: var(--header-height);
            z-index: 100;
            box-shadow: var(--shadow-sm);
            position: relative;
        }

        .app-title {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .app-logo {
            height: 36px;
            width: auto;
            transition: var(--transition);
            filter: drop-shadow(0 2px 4px rgba(0,0,0,0.1));
        }

        .app-logo:hover {
            transform: scale(1.05);
        }

        .app-name {
            font-size: 1.125rem;
            font-weight: 600;
            color: var(--text-dark);
            letter-spacing: 0.5px;
            background: linear-gradient(135deg, var(--primary) 0%, var(--accent) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .header-actions {
            display: flex;
            align-items: center;
            margin-left: auto;
            gap: 0.75rem;
        }

        .header-btn {
            background: none;
            border: none;
            color: var(--text-medium);
            font-size: 0.875rem;
            padding: 0.5rem 0.75rem;
            border-radius: var(--border-radius);
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 0.5rem;
            position: relative;
        }

        .header-btn:hover {
            background-color: var(--nav-hover);
            color: var(--primary);
        }

        .header-btn.active {
            background-color: var(--nav-active);
            color: var(--primary);
            font-weight: 500;
        }

        .header-btn i {
            font-size: 1rem;
        }

        .theme-toggle {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            background: var(--bg-tertiary);
            color: var(--text-medium);
            cursor: pointer;
            transition: var(--transition);
            margin-left: 0.5rem;
            border: 1px solid var(--border-color);
        }

        .theme-toggle:hover {
            background: var(--gray-200);
            color: var(--text-dark);
            transform: rotate(15deg);
        }

        /* ===== MAIN LAYOUT ===== */
        .app-container {
            display: flex;
            flex: 1;
            overflow: hidden;
        }

        /* ===== SIDEBAR ===== */
        .sidebar {
            width: var(--sidebar-width);
            background-color: var(--bg-primary);
            border-right: 1px solid var(--border-color);
            display: flex;
            flex-direction: column;
            transition: var(--transition);
            z-index: 90;
            box-shadow: var(--shadow-sm);
        }

        .sidebar-collapsed {
            width: var(--sidebar-collapsed-width);
        }

        .sidebar-header {
            padding: 1.25rem;
            border-bottom: 1px solid var(--border-color);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .sidebar-title {
            font-size: 0.875rem;
            font-weight: 600;
            color: var(--text-dark);
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .sidebar-toggle {
            background: none;
            border: none;
            color: var(--text-light);
            font-size: 1rem;
            cursor: pointer;
            transition: var(--transition);
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
        }

        .sidebar-toggle:hover {
            background-color: var(--nav-hover);
            color: var(--primary);
            transform: rotate(-180deg);
        }

        .sidebar-nav {
            flex: 1;
            overflow-y: auto;
            padding: 1rem 0;
        }

        .nav-section {
            margin-bottom: 1.5rem;
        }

        .nav-section-title {
            padding: 0 1.25rem;
            margin-bottom: 0.5rem;
            font-size: 0.75rem;
            font-weight: 600;
            color: var(--text-light);
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .nav-list {
            list-style: none;
        }

        .nav-item {
            margin-bottom: 0.125rem;
        }

        .nav-link {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 0.75rem 1.25rem;
            color: var(--text-medium);
            text-decoration: none;
            transition: var(--transition);
            border-radius: 0;
            font-size: 0.875rem;
            position: relative;
            overflow: hidden;
        }

        .nav-link::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            bottom: 0;
            width: 3px;
            background-color: var(--primary);
            transform: scaleY(0);
            transition: var(--transition);
        }

        .nav-link:hover {
            background-color: var(--nav-hover);
            color: var(--primary);
        }

        .nav-link:hover::before {
            transform: scaleY(0.6);
        }

        .nav-link.active {
            background-color: var(--nav-active);
            color: var(--primary);
            font-weight: 500;
        }

        .nav-link.active::before {
            transform: scaleY(1);
        }

        .nav-icon {
            font-size: 1.125rem;
            width: 1.5rem;
            text-align: center;
            transition: var(--transition);
        }

        .nav-link:hover .nav-icon {
            transform: translateY(-2px);
        }

        .nav-link.active .nav-icon {
            transform: translateY(-2px);
        }

        .nav-text {
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .sidebar-collapsed .nav-text,
        .sidebar-collapsed .nav-section-title,
        .sidebar-collapsed .sidebar-title {
            display: none;
        }

        .sidebar-collapsed .nav-link {
            justify-content: center;
            padding: 0.75rem;
        }

        .sidebar-collapsed .nav-icon {
            margin: 0;
            font-size: 1.25rem;
        }

        /* ===== MAIN CONTENT ===== */
        .main-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            overflow: hidden;
            position: relative;
        }

        /* ===== NAVIGATION TABS ===== */
        .content-nav {
            height: var(--nav-height);
            background-color: var(--bg-primary);
            border-bottom: 1px solid var(--border-color);
            display: flex;
            align-items: center;
            padding: 0 1.5rem;
            gap: 0.5rem;
            box-shadow: var(--shadow-sm);
        }

        .nav-tab {
            padding: 0 1.25rem;
            height: 100%;
            display: flex;
            align-items: center;
            gap: 0.625rem;
            color: var(--text-medium);
            text-decoration: none;
            font-size: 0.875rem;
            font-weight: 500;
            transition: var(--transition);
            border-bottom: 3px solid transparent;
            cursor: pointer;
            position: relative;
        }

        .nav-tab::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 3px;
            background-color: var(--primary);
            transform: scaleX(0);
            transition: var(--transition);
        }

        .nav-tab:hover {
            color: var(--primary);
        }

        .nav-tab:hover::after {
            transform: scaleX(0.3);
        }

        .nav-tab.active {
            color: var(--primary);
        }

        .nav-tab.active::after {
            transform: scaleX(1);
        }

        .nav-tab i {
            font-size: 1rem;
        }

        /* ===== CONTENT AREA ===== */
        .content-area {
            flex: 1;
            overflow-y: auto;
            padding: 1.5rem;
            background-color: var(--bg-secondary);
            background-image: 
                radial-gradient(circle at 25px 25px, rgba(255, 87, 34, 0.02) 2%, transparent 0%),
                radial-gradient(circle at 75px 75px, rgba(255, 87, 34, 0.02) 2%, transparent 0%);
            background-size: 100px 100px;
        }

        .content-container {
            max-width: var(--content-max-width);
            margin: 0 auto;
        }

        /* ===== CARDS ===== */
        .card {
            background-color: var(--bg-primary);
            border-radius: var(--border-radius-lg);
            box-shadow: var(--shadow);
            margin-bottom: 1.5rem;
            overflow: hidden;
            transition: var(--transition);
            border: 1px solid var(--border-color);
            position: relative;
        }

        .card:hover {
            box-shadow: var(--shadow-md);
            transform: translateY(-2px);
        }

        .card-header {
            padding: 1.25rem 1.5rem;
            border-bottom: 1px solid var(--border-color);
            display: flex;
            justify-content: space-between;
            align-items: center;
            background-color: var(--bg-primary);
        }

        .card-title {
            font-size: 1.125rem;
            font-weight: 600;
            color: var(--text-dark);
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .card-title i {
            color: var(--primary);
            font-size: 1.25rem;
        }

        .card-body {
            padding: 1.5rem;
        }

        .card-footer {
            padding: 1rem 1.5rem;
            border-top: 1px solid var(--border-color);
            display: flex;
            justify-content: flex-end;
            gap: 0.75rem;
            background-color: var(--bg-primary);
        }

        /* ===== FORMS ===== */
        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
            color: var(--text-dark);
            font-size: 0.875rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .form-label i {
            color: var(--primary);
        }

        .form-control {
            width: 100%;
            padding: 0.75rem 1rem;
            border: 1px solid var(--border-color);
            border-radius: var(--border-radius);
            font-size: 0.875rem;
            transition: var(--transition);
            background-color: var(--bg-primary);
            color: var(--text-dark);
            box-shadow: var(--shadow-sm);
        }

        .form-control:hover {
            border-color: var(--gray-300);
        }

        .form-control:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(255, 87, 34, 0.2);
        }

        select.form-control {
            appearance: none;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='%236B7280' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: right 12px center;
            padding-right: 2.5rem;
        }

        /* ===== FILE UPLOAD ===== */
        .file-input-container {
            position: relative;
            overflow: hidden;
            display: inline-block;
            cursor: pointer;
        }

        .file-input-label {
            display: inline-flex;
            align-items: center;
            gap: 0.625rem;
            padding: 0.75rem 1.125rem;
            background-color: var(--bg-tertiary);
            color: var(--text-medium);
            border-radius: var(--border-radius);
            cursor: pointer;
            transition: var(--transition);
            font-weight: 500;
            font-size: 0.875rem;
            border: 1px solid var(--border-color);
        }

        .file-input-label:hover {
            background-color: var(--gray-200);
            transform: translateY(-2px);
            box-shadow: var(--shadow-sm);
            color: var(--text-dark);
        }

        input[type="file"] {
            position: absolute;
            left: 0;
            top: 0;
            opacity: 0;
            cursor: pointer;
        }

        .file-name {
            margin-left: 0.75rem;
            font-size: 0.875rem;
            color: var(--text-light);
            display: inline-flex;
            align-items: center;
            gap: 0.375rem;
            transition: var(--transition);
        }

        .image-preview-container {
            margin-top: 1rem;
            border-radius: var(--border-radius);
            overflow: hidden;
            max-width: 100%;
            border: 1px solid var(--border-color);
            transition: var(--transition);
            box-shadow: var(--shadow-sm);
        }

        .image-preview-container:hover {
            box-shadow: var(--shadow);
        }

        #imagePreview, #editImagePreview {
            max-width: 100%;
            max-height: 300px;
            display: none;
            object-fit: cover;
            width: 100%;
            transition: var(--transition);
        }

        /* ===== BUTTONS ===== */
        .btn {
            padding: 0.75rem 1.25rem;
            background-color: var(--primary);
            color: var(--white);
            border: none;
            border-radius: var(--border-radius);
            cursor: pointer;
            font-size: 0.875rem;
            font-weight: 500;
            transition: var(--transition);
            display: inline-flex;
            align-items: center;
            gap: 0.625rem;
            position: relative;
            overflow: hidden;
            box-shadow: 0 2px 5px rgba(255, 87, 34, 0.2);
        }

        .btn:hover {
            background-color: var(--primary-dark);
            transform: translateY(-2px);
            box-shadow: 0 4px 10px rgba(255, 87, 34, 0.3);
        }

        .btn:active {
            transform: translateY(0);
        }

        .btn:disabled {
            opacity: 0.7;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .btn-secondary {
            background-color: var(--bg-tertiary);
            color: var(--text-medium);
            border: 1px solid var(--border-color);
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
        }

        .btn-secondary:hover {
            background-color: var(--gray-200);
            color: var(--text-dark);
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
        }

        .btn-danger {
            background-color: var(--error);
            box-shadow: 0 2px 5px rgba(239, 68, 68, 0.2);
        }

        .btn-danger:hover {
            background-color: #DC2626;
            box-shadow: 0 4px 10px rgba(239, 68, 68, 0.3);
        }

        .btn-success {
            background-color: var(--success);
            box-shadow: 0 2px 5px rgba(16, 185, 129, 0.2);
        }

        .btn-success:hover {
            background-color: #059669;
            box-shadow: 0 4px 10px rgba(16, 185, 129, 0.3);
        }

        .btn-sm {
            padding: 0.5rem 0.875rem;
            font-size: 0.75rem;
        }

        .btn-lg {
            padding: 0.875rem 1.5rem;
            font-size: 1rem;
        }

        .btn-icon {
            width: 40px;
            height: 40px;
            padding: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: var(--border-radius);
        }

        .btn-icon-sm {
            width: 32px;
            height: 32px;
            font-size: 0.875rem;
        }

        .btn-icon-rounded {
            border-radius: 50%;
        }

        /* ===== TABLE ===== */
        .table-container {
            overflow-x: auto;
            border-radius: var(--border-radius-lg);
            border: 1px solid var(--border-color);
            background-color: var(--bg-primary);
            box-shadow: var(--shadow);
        }

        .table {
            width: 100%;
            border-collapse: collapse;
            background-color: var(--bg-primary);
        }

        .table th,
        .table td {
            padding: 0.875rem 1.125rem;
            text-align: left;
            font-size: 0.875rem;
        }

        .table th {
            background-color: var(--bg-tertiary);
            color: var(--text-dark);
            font-weight: 600;
            white-space: nowrap;
            border-bottom: 1px solid var(--border-color);
            position: sticky;
            top: 0;
            z-index: 1;
        }

        .table th i {
            color: var(--primary);
            margin-right: 0.375rem;
        }

        .table tr {
            transition: var(--transition);
        }

        .table tr:nth-child(even) {
            background-color: var(--bg-secondary);
        }

        .table tr:hover {
            background-color: var(--nav-hover);
        }

        .table td {
            border-bottom: 1px solid var(--border-color);
            color: var(--text-medium);
        }

        .table tr:last-child td {
            border-bottom: none;
        }

        .action-buttons {
            display: flex;
            gap: 0.625rem;
        }

        .action-btn {
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: var(--border-radius);
            background-color: var(--bg-primary);
            color: var(--text-medium);
            border: 1px solid var(--border-color);
            cursor: pointer;
            transition: var(--transition);
            font-size: 0.875rem;
        }

        .action-btn:hover {
            background-color: var(--bg-secondary);
            transform: translateY(-3px);
            box-shadow: var(--shadow);
        }

        .action-btn-edit {
            color: var(--info);
            border-color: rgba(59, 130, 246, 0.3);
        }

        .action-btn-edit:hover {
            background-color: rgba(59, 130, 246, 0.1);
        }

        .action-btn-delete {
            color: var(--error);
            border-color: rgba(239, 68, 68, 0.3);
        }

        .action-btn-delete:hover {
            background-color: rgba(239, 68, 68, 0.1);
        }

        .action-btn-view {
            color: var(--success);
            border-color: rgba(16, 185, 129, 0.3);
        }

        .action-btn-view:hover {
            background-color: rgba(16, 185, 129, 0.1);
        }

        /* ===== ALERTS ===== */
        .alert {
            padding: 1rem 1.25rem;
            border-radius: var(--border-radius);
            margin-bottom: 1.5rem;
            display: none;
            align-items: center;
            gap: 0.875rem;
            font-size: 0.875rem;
            opacity: 0;
            transform: translateY(-5px);
            transition: var(--transition);
            position: relative;
            box-shadow: var(--shadow-sm);
        }

        .alert-success {
            background-color: rgba(16, 185, 129, 0.1);
            border: 1px solid rgba(16, 185, 129, 0.2);
            color: var(--success);
        }

        .alert-error {
            background-color: rgba(239, 68, 68, 0.1);
            border: 1px solid rgba(239, 68, 68, 0.2);
            color: var(--error);
        }

        .alert-close {
            margin-left: auto;
            background: none;
            border: none;
            cursor: pointer;
            color: inherit;
            font-size: 1rem;
            transition: var(--transition);
            width: 28px;
            height: 28px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
        }

        .alert-close:hover {
            background-color: rgba(0, 0, 0, 0.05);
            transform: rotate(90deg);
        }

        /* ===== LOADING STATES ===== */
        .spinner {
            display: inline-block;
            width: 18px;
            height: 18px;
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top-color: var(--white);
            animation: spin 1s ease-in-out infinite;
            display: none;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .loading-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 3rem;
            text-align: center;
        }

        .loading-spinner {
            width: 48px;
            height: 48px;
            border: 3px solid rgba(255, 87, 34, 0.1);
            border-radius: 50%;
            border-top-color: var(--primary);
            animation: spin 1s ease-in-out infinite;
            margin-bottom: 1.25rem;
        }

        .loading-text {
            color: var(--text-light);
            font-weight: 500;
            font-size: 1rem;
        }

        /* ===== EMPTY STATES ===== */
        .empty-state {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 3rem;
            text-align: center;
            color: var(--text-light);
        }

        .empty-icon {
            font-size: 3rem;
            margin-bottom: 1.25rem;
            color: var(--gray-300);
            animation: float 3s ease-in-out infinite;
        }

        @keyframes float {
            0% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
            100% { transform: translateY(0px); }
        }

        .empty-text {
            font-weight: 500;
            margin-bottom: 1.25rem;
            font-size: 1.125rem;
        }

        /* ===== MODALS ===== */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0, 0, 0, 0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            display: none;
            backdrop-filter: blur(5px);
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .modal-overlay.active {
            opacity: 1;
        }

        .modal {
            background-color: var(--bg-primary);
            border-radius: var(--border-radius-xl);
            box-shadow: var(--shadow-lg);
            width: 90%;
            max-width: 700px;
            max-height: 90vh;
            overflow-y: auto;
            animation: modalFadeIn 0.3s ease-out;
            transform: scale(0.95);
            transition: transform 0.3s ease;
        }

        .modal-overlay.active .modal {
            transform: scale(1);
        }

        @keyframes modalFadeIn {
            from { opacity: 0; transform: scale(0.9); }
            to { opacity: 1; transform: scale(1); }
        }

        .modal-header {
            padding: 1.25rem 1.5rem;
            border-bottom: 1px solid var(--border-color);
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky;
            top: 0;
            background-color: var(--bg-primary);
            z-index: 1;
            border-top-left-radius: var(--border-radius-xl);
            border-top-right-radius: var(--border-radius-xl);
        }

        .modal-title {
            font-size: 1.25rem;
            font-weight: 600;
            color: var(--text-dark);
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .modal-title i {
            color: var(--primary);
        }

        .modal-close {
            background: none;
            border: none;
            font-size: 1.25rem;
            cursor: pointer;
            color: var(--text-light);
            transition: var(--transition);
            width: 36px;
            height: 36px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
        }

        .modal-close:hover {
            color: var(--text-dark);
            background-color: var(--bg-secondary);
            transform: rotate(90deg);
        }

        .modal-body {
            padding: 1.5rem;
        }

        .modal-footer {
            padding: 1.25rem 1.5rem;
            border-top: 1px solid var(--border-color);
            display: flex;
            justify-content: flex-end;
            gap: 0.75rem;
            position: sticky;
            bottom: 0;
            background-color: var(--bg-primary);
            z-index: 1;
            border-bottom-left-radius: var(--border-radius-xl);
            border-bottom-right-radius: var(--border-radius-xl);
        }

        /* ===== CATEGORY BADGES ===== */
        .badge {
            display: inline-flex;
            align-items: center;
            padding: 0.375rem 0.75rem;
            border-radius: 30px;
            font-size: 0.75rem;
            font-weight: 500;
            gap: 0.375rem;
            transition: var(--transition);
        }

        .badge:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-sm);
        }

        .badge-article {
            background-color: rgba(255, 87, 34, 0.1);
            color: var(--primary);
            border: 1px solid rgba(255, 87, 34, 0.2);
        }

        .badge-literary {
            background-color: rgba(255, 152, 0, 0.1);
            color: var(--accent);
            border: 1px solid rgba(255, 152, 0, 0.2);
        }

        /* ===== TOOLTIPS ===== */
        .tooltip {
            position: relative;
        }

        .tooltip:hover::after {
            content: attr(data-tooltip);
            position: absolute;
            bottom: 125%;
            left: 50%;
            transform: translateX(-50%);
            background-color: var(--text-dark);
            color: var(--white);
            padding: 0.5rem 0.75rem;
            border-radius: var(--border-radius);
            font-size: 0.75rem;
            white-space: nowrap;
            z-index: 10;
            margin-bottom: 5px;
            box-shadow: var(--shadow);
            opacity: 0;
            animation: tooltipFadeIn 0.2s ease forwards;
        }

        .tooltip:hover::before {
            content: '';
            position: absolute;
            bottom: 125%;
            left: 50%;
            transform: translateX(-50%);
            border: 6px solid transparent;
            border-top-color: var(--text-dark);
            margin-bottom: -6px;
            opacity: 0;
            animation: tooltipFadeIn 0.2s ease forwards;
        }

        @keyframes tooltipFadeIn {
            to { opacity: 1; }
        }

        /* ===== POST CARDS ===== */
        .post-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
            gap: 1.5rem;
            margin-top: 1.5rem;
        }

        .post-card {
            background-color: var(--bg-primary);
            border-radius: var(--border-radius-lg);
            box-shadow: var(--shadow);
            overflow: hidden;
            transition: var(--transition);
            display: flex;
            flex-direction: column;
            height: 100%;
            border: 1px solid var(--border-color);
            position: relative;
        }

        .post-card:hover {
            box-shadow: var(--shadow-lg);
            transform: translateY(-5px);
        }

        .post-image {
            width: 100%;
            height: 200px;
            object-fit: cover;
            transition: var(--transition);
        }

        .post-card:hover .post-image {
            transform: scale(1.05);
        }

        .post-content {
            padding: 1.25rem;
            flex: 1;
            display: flex;
            flex-direction: column;
        }

        .post-category {
            margin-bottom: 0.75rem;
        }

        .post-title {
            font-size: 1.125rem;
            font-weight: 600;
            color: var(--text-dark);
            margin-bottom: 0.75rem;
            line-height: 1.4;
            transition: var(--transition);
        }

        .post-card:hover .post-title {
            color: var(--primary);
        }

        .post-meta {
            display: flex;
            flex-wrap: wrap;
            gap: 1rem;
            margin-bottom: 1rem;
            font-size: 0.75rem;
            color: var(--text-light);
        }

        .post-meta-item {
            display: flex;
            align-items: center;
            gap: 0.375rem;
        }

        .post-meta-item i {
            color: var(--primary);
        }

        .post-actions {
            margin-top: auto;
            display: flex;
            gap: 0.625rem;
            padding-top: 1rem;
            border-top: 1px solid var(--border-color);
        }

        /* ===== STATUS BAR ===== */
        .status-bar {
            height: var(--status-bar-height);
            background-color: var(--bg-tertiary);
            border-top: 1px solid var(--border-color);
            display: flex;
            align-items: center;
            padding: 0 1.5rem;
            font-size: 0.75rem;
            color: var(--text-light);
        }

        .status-item {
            margin-right: 1.25rem;
            display: flex;
            align-items: center;
            gap: 0.375rem;
        }

        .status-item i {
            color: var(--primary);
        }

        .status-right {
            margin-left: auto;
            display: flex;
            gap: 1.25rem;
            align-items: center;
        }

        /* ===== WRITING TIPS ===== */
        .writing-tip {
            margin-bottom: 1rem;
            padding-left: 1.75rem;
            position: relative;
            font-size: 0.875rem;
            color: var(--text-medium);
            line-height: 1.6;
            transition: var(--transition);
        }

        .writing-tip::before {
            content: '\f0eb';
            font-family: 'Font Awesome 5 Free';
            font-weight: 900;
            position: absolute;
            left: 0;
            top: 0;
            color: var(--primary);
            font-size: 1rem;
        }

        .writing-tip:hover {
            transform: translateX(5px);
            color: var(--text-dark);
        }

        .writing-tip:last-child {
            margin-bottom: 0;
        }

        /* ===== HELP CONTENT ===== */
        .help-section {
            margin-bottom: 2rem;
        }

        .help-section:last-child {
            margin-bottom: 0;
        }

        .help-title {
            font-size: 1.25rem;
            font-weight: 600;
            color: var(--text-dark);
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.625rem;
        }

        .help-title i {
            color: var(--primary);
        }

        .help-text {
            font-size: 0.875rem;
            line-height: 1.6;
            color: var(--text-medium);
            margin-bottom: 1rem;
        }

        .help-list {
            list-style: none;
            margin-bottom: 1rem;
        }

        .help-list-item {
            position: relative;
            padding-left: 1.5rem;
            margin-bottom: 0.75rem;
            font-size: 0.875rem;
            line-height: 1.6;
            color: var(--text-medium);
        }

        .help-list-item::before {
            content: '\f054';
            font-family: 'Font Awesome 5 Free';
            font-weight: 900;
            position: absolute;
            left: 0;
            top: 2px;
            color: var(--primary);
            font-size: 0.75rem;
        }

        .help-image {
            max-width: 100%;
            border-radius: var(--border-radius);
            margin: 1rem 0;
            box-shadow: var(--shadow);
        }

        .help-note {
            background-color: rgba(245, 158, 11, 0.1);
            border-left: 3px solid var(--warning);
            padding: 1rem;
            border-radius: 0 var(--border-radius) var(--border-radius) 0;
            margin: 1rem 0;
            font-size: 0.875rem;
            color: var(--text-medium);
        }

        .help-tip {
            background-color: rgba(255, 87, 34, 0.1);
            border-left: 3px solid var(--primary);
            padding: 1rem;
            border-radius: 0 var(--border-radius) var(--border-radius) 0;
            margin: 1rem 0;
            font-size: 0.875rem;
            color: var(--text-medium);
        }

        /* ===== ANIMATIONS ===== */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* ===== TINYMCE CUSTOMIZATION ===== */
        .tox-tinymce {
            border-radius: var(--border-radius) !important;
            border: 1px solid var(--border-color) !important;
            overflow: hidden;
        }

        .tox .tox-statusbar {
            border-top: 1px solid var(--border-color) !important;
        }

        .tox .tox-toolbar, .tox .tox-toolbar__overflow, .tox .tox-toolbar__primary {
            background-color: var(--bg-primary) !important;
        }

        .tox .tox-tbtn {
            border-radius: var(--border-radius-sm) !important;
        }

        .tox .tox-tbtn:hover {
            background-color: var(--nav-hover) !important;
        }

        /* ===== RESPONSIVE STYLES ===== */
        @media (max-width: 992px) {
            .post-grid {
                grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            }
            
            .app-header {
                padding: 0 1rem;
            }
            
            .content-area {
                padding: 1.25rem;
            }
        }

        @media (max-width: 768px) {
            .sidebar {
                position: fixed;
                left: 0;
                top: var(--header-height);
                bottom: 0;
                transform: translateX(-100%);
                z-index: 100;
                box-shadow: var(--shadow);
            }
            
            .sidebar.active {
                transform: translateX(0);
            }
            
            .post-grid {
                grid-template-columns: 1fr;
            }
            
            .content-nav {
                overflow-x: auto;
                white-space: nowrap;
                padding: 0 1rem;
            }
            
            .nav-tab {
                padding: 0 1rem;
            }
            
            .card-body, .card-header, .card-footer {
                padding: 1rem;
            }
        }

        @media (max-width: 576px) {
            .app-name {
                display: none;
            }
            
            .header-btn span {
                display: none;
            }
            
            .modal-footer {
                flex-direction: column;
            }
            
            .modal-footer .btn {
                width: 100%;
            }
            
            .header-actions {
                gap: 0.5rem;
            }
            
            .header-btn {
                padding: 0.5rem;
            }
            
            .form-group {
                margin-bottom: 1rem;
            }
        }

        /* Tab content styles */
        #createTab, #manageTab {
            display: none;
            animation: fadeIn 0.3s ease-out;
        }

        #createTab.active, #manageTab.active {
            display: block;
        }

        /* Shortcut key styles */
        .shortcut-key {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            min-width: 24px;
            height: 24px;
            padding: 0 6px;
            background-color: var(--bg-tertiary);
            border: 1px solid var(--border-color);
            border-radius: 4px;
            font-size: 0.75rem;
            font-weight: 500;
            color: var(--text-dark);
            box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
            margin: 0 2px;
        }

        /* Feature highlight */
        .feature-highlight {
            position: relative;
            padding: 1rem;
            background-color: rgba(255, 87, 34, 0.05);
            border-radius: var(--border-radius);
            margin: 1rem 0;
            border: 1px dashed rgba(255, 87, 34, 0.3);
        }

        .feature-highlight::before {
            content: 'New';
            position: absolute;
            top: -10px;
            right: 10px;
            background-color: var(--primary);
            color: white;
            font-size: 0.625rem;
            font-weight: 600;
            padding: 2px 8px;
            border-radius: 10px;
        }
    </style>
</head>
<body>
    <!-- App Header -->
    <header class="app-header">
        <div class="app-title">
            <img src="SILAKBO (1).png" alt="Silakbo Logo" class="app-logo">
            <span class="app-name"><strong>ANG SILAKBO WORKSTATION</strong></span>
        </div>
        
        <div class="header-actions">
            <button class="header-btn" id="toggleSidebarBtn">
                <i class="fas fa-bars"></i>
                <span>Menu</span>
            </button>
            <button class="header-btn" id="createNewBtn">
                <i class="fas fa-plus-circle"></i>
                <span>New Post</span>
            </button>
            <button class="header-btn" id="viewPostsBtn">
                <i class="fas fa-list"></i>
                <span>Published Works</span>
            </button>
            <button class="header-btn" id="helpBtn">
                <i class="fas fa-question-circle"></i>
                <span>Help</span>
            </button>
            <div class="theme-toggle" id="themeToggle">
                <i class="fas fa-moon"></i>
            </div>
        </div>
    </header>

    <!-- Main Container -->
    <div class="app-container">
        <!-- Sidebar -->
        <div class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <h3 class="sidebar-title">Navigation</h3>
                <button class="sidebar-toggle" id="collapseSidebarBtn">
                    <i class="fas fa-chevron-left"></i>
                </button>
            </div>
            <div class="sidebar-nav">
                <div class="nav-section">
                    <h4 class="nav-section-title">Content</h4>
                    <ul class="nav-list">
                        <li class="nav-item">
                            <a href="#" class="nav-link active" id="navCreate">
                                <i class="fas fa-plus-circle nav-icon"></i>
                                <span class="nav-text">Create New Post</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="#" class="nav-link" id="navManage">
                                <i class="fas fa-list nav-icon"></i>
                                <span class="nav-text">Published Works</span>
                            </a>
                        </li>
                    </ul>
                </div>
                
                <div class="nav-section">
                    <h4 class="nav-section-title">Categories</h4>
                    <ul class="nav-list">
                        <li class="nav-item">
                            <a href="#" class="nav-link" id="navArticles">
                                <i class="fas fa-newspaper nav-icon"></i>
                                <span class="nav-text">Articles</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="#" class="nav-link" id="navLiterary">
                                <i class="fas fa-book nav-icon"></i>
                                <span class="nav-text">Literary Works</span>
                            </a>
                        </li>
                    </ul>
                </div>
                
                <div class="nav-section">
                    <h4 class="nav-section-title">Tools</h4>
                    <ul class="nav-list">
                        <li class="nav-item">
                            <a href="#" class="nav-link" id="navWritingTips">
                                <i class="fas fa-lightbulb nav-icon"></i>
                                <span class="nav-text">Writing Tips</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="#" class="nav-link" id="navSettings">
                                <i class="fas fa-cog nav-icon"></i>
                                <span class="nav-text">Settings</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="#" class="nav-link" id="navHelp">
                                <i class="fas fa-question-circle nav-icon"></i>
                                <span class="nav-text">Help Center</span>
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
        
        <!-- Main Content -->
        <div class="main-content">
            <!-- Content Navigation -->
            <div class="content-nav">
                <div class="nav-tab active" data-tab="create">
                    <i class="fas fa-plus-circle"></i> Create New Post
                </div>
                <div class="nav-tab" data-tab="manage">
                    <i class="fas fa-list"></i> Published Works
                </div>
            </div>
            
            <!-- Content Area -->
            <div class="content-area">
                <div class="content-container">
                    <!-- Alerts -->
                    <div id="alertSuccess" class="alert alert-success">
                        <i class="fas fa-check-circle"></i> 
                        <span>Operation completed successfully!</span>
                        <button class="alert-close">&times;</button>
                    </div>
                    <div id="alertError" class="alert alert-error">
                        <i class="fas fa-exclamation-circle"></i> 
                        <span id="errorMessage">An error occurred.</span>
                        <button class="alert-close">&times;</button>
                    </div>
                    
                    <!-- Create Tab Content -->
                    <div id="createTab" class="active">
                        <div class="card">
                            <div class="card-header">
                                <h2 class="card-title">
                                    <i class="fas fa-pen-fancy"></i> Create a New Post
                                </h2>
                            </div>
                            <div class="card-body">
                                <form id="postForm">
                                    <div class="form-group">
                                        <label class="form-label" for="category">
                                            <i class="fas fa-tag"></i> Category:
                                        </label>
                                        <select id="category" class="form-control" required>
                                            <option value="article">Article</option>
                                            <option value="literary">Literary</option>
                                        </select>
                                    </div>

                                    <div class="form-group">
                                        <label class="form-label" for="title">
                                            <i class="fas fa-heading"></i> Title:
                                        </label>
                                        <input type="text" id="title" class="form-control" required placeholder="Enter post title">
                                    </div>

                                    <div class="form-group">
                                        <label class="form-label" for="author">
                                            <i class="fas fa-user-edit"></i> Author:
                                        </label>
                                        <input type="text" id="author" class="form-control" required placeholder="Enter author's name">
                                    </div>

                                    <div class="form-group" id="additionalFields">
                                        <label class="form-label" id="roleLabel" for="additionalField">
                                            <i class="fas fa-camera"></i> Photojournalist:
                                        </label>
                                        <input type="text" id="additionalField" class="form-control" placeholder="Enter photojournalist's name">
                                    </div>

                                    <div class="form-group">
                                        <label class="form-label" for="imageUpload">
                                            <i class="fas fa-image"></i> Upload Image:
                                        </label>
                                        <div class="file-input-container">
                                            <label class="file-input-label">
                                                <i class="fas fa-upload"></i> Choose File
                                                <input type="file" id="imageUpload" accept="image/*">
                                            </label>
                                            <span class="file-name" id="fileName">
                                                <i class="fas fa-file-image"></i> No file chosen
                                            </span>
                                        </div>
                                        <div class="image-preview-container">
                                            <img id="imagePreview" alt="Image Preview">
                                        </div>
                                    </div>

                                    <div class="form-group">
                                        <label class="form-label" for="content">
                                            <i class="fas fa-paragraph"></i> Content:
                                        </label>
                                        <textarea id="content" class="form-control"></textarea>
                                    </div>
                                </form>
                            </div>
                            <div class="card-footer">
                                <button type="button" class="btn btn-secondary" id="resetBtn">
                                    <i class="fas fa-undo"></i> Reset
                                </button>
                                <button type="button" class="btn" id="saveBtn">
                                    <span class="spinner" id="submitSpinner"></span>
                                    <i class="fas fa-save"></i> Save Draft
                                </button>
                                <button type="button" class="btn btn-success" id="publishBtn">
                                    <i class="fas fa-paper-plane"></i> Publish Post
                                </button>
                            </div>
                        </div>
                        
                        <!-- Writing Tips Card -->
                        <div class="card">
                            <div class="card-header">
                                <h2 class="card-title">
                                    <i class="fas fa-lightbulb"></i> Writing Tips
                                </h2>
                            </div>
                            <div class="card-body">
                                <div id="writingTipsContent">
                                    <!-- Tips will be loaded dynamically based on category -->
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Manage Tab Content -->
                    <div id="manageTab">
                        <div class="card">
                            <div class="card-header">
                                <h2 class="card-title">
                                    <i class="fas fa-list-alt"></i> Published Works
                                </h2>
                            </div>
                            <div class="card-body">
                                <div id="postsTableContainer">
                                    <div id="loadingPosts" class="loading-container">
                                        <div class="loading-spinner"></div>
                                        <p class="loading-text">Loading posts...</p>
                                    </div>
                                    
                                    <!-- Table View -->
                                    <div class="table-container" id="postsTable" style="display: none;">
                                        <table class="table">
                                            <thead>
                                                <tr>
                                                    <th><i class="fas fa-tag"></i> Category</th>
                                                    <th><i class="fas fa-heading"></i> Title</th>
                                                    <th><i class="fas fa-user-edit"></i> Author</th>
                                                    <th><i class="fas fa-user-tag"></i> Photo/Art</th>
                                                    <th><i class="fas fa-calendar-alt"></i> Date</th>
                                                    <th><i class="fas fa-cogs"></i> Actions</th>
                                                </tr>
                                            </thead>
                                            <tbody id="postsTableBody">
                                                <!-- Posts will be loaded here -->
                                            </tbody>
                                        </table>
                                    </div>
                                    
                                    <!-- Grid View -->
                                    <div class="post-grid" id="postsGrid" style="display: none;">
                                        <!-- Posts will be loaded here as cards -->
                                    </div>
                                    
                                    <div id="noPostsMessage" class="empty-state" style="display: none;">
                                        <i class="fas fa-inbox empty-icon"></i>
                                        <p class="empty-text">No posts found.</p>
                                        <button class="btn" id="createFirstPostBtn">
                                            <i class="fas fa-plus-circle"></i> Create Your First Post
                                        </button>
                                    </div>
                                </div>
                            </div>
                            <div class="card-footer">
                                <button class="btn btn-secondary" id="toggleViewBtn">
                                    <i class="fas fa-th-large"></i> Toggle View
                                </button>
                                <button class="btn" id="refreshPostsBtn">
                                    <i class="fas fa-sync-alt"></i> Refresh
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Status Bar -->
            <div class="status-bar">
                <div class="status-item">
                    <i class="fas fa-check-circle"></i> Ready
                </div>
                <div class="status-right">
                    <div class="status-item" id="wordCount">
                        <i class="fas fa-font"></i> Words: 0
                    </div>
                    <div class="status-item" id="characterCount">
                        <i class="fas fa-text-width"></i> Characters: 0
                    </div>
                    <div class="status-item">
                        <i class="far fa-clock"></i> <span id="currentTime">00:00</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modals -->
    <div class="modal-overlay" id="editModal">
        <div class="modal">
            <div class="modal-header">
                <h3 class="modal-title">
                    <i class="fas fa-edit"></i> Edit Post
                </h3>
                <button class="modal-close" id="closeEditModal">&times;</button>
            </div>
            <div class="modal-body">
                <form id="editForm">
                    <input type="hidden" id="editPostId">
                    <div class="form-group">
                        <label class="form-label" for="editCategory">
                            <i class="fas fa-tag"></i> Category:
                        </label>
                        <select id="editCategory" class="form-control" required>
                            <option value="article">Article</option>
                            <option value="literary">Literary</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label class="form-label" for="editTitle">
                            <i class="fas fa-heading"></i> Title:
                        </label>
                        <input type="text" id="editTitle" class="form-control" required placeholder="Enter post title">
                    </div>

                    <div class="form-group">
                        <label class="form-label" for="editAuthor">
                            <i class="fas fa-user-edit"></i> Author:
                        </label>
                        <input type="text" id="editAuthor" class="form-control" required placeholder="Enter author's name">
                    </div>

                    <div class="form-group" id="editAdditionalFields">
                        <label class="form-label" id="editRoleLabel" for="editAdditionalField">
                            <i class="fas fa-camera"></i> Photojournalist:
                        </label>
                        <input type="text" id="editAdditionalField" class="form-control" placeholder="Enter photojournalist's name">
                    </div>

                    <div class="form-group">
                        <label class="form-label" for="editImageUpload">
                            <i class="fas fa-image"></i> Upload New Image:
                        </label>
                        <div class="file-input-container">
                            <label class="file-input-label">
                                <i class="fas fa-upload"></i> Choose File
                                <input type="file" id="editImageUpload" accept="image/*">
                            </label>
                            <span class="file-name" id="editFileName">
                                <i class="fas fa-file-image"></i> No file chosen
                            </span>
                        </div>
                        <div class="image-preview-container">
                            <img id="editImagePreview" alt="Image Preview">
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="form-label" for="editContent">
                            <i class="fas fa-paragraph"></i> Content:
                        </label>
                        <textarea id="editContent" class="form-control"></textarea>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" id="cancelEditBtn">
                    <i class="fas fa-times"></i> Cancel
                </button>
                <button class="btn" id="saveEditBtn">
                    <span class="spinner" id="editSpinner"></span>
                    <i class="fas fa-save"></i> Save Changes
                </button>
            </div>
        </div>
    </div>

    <div class="modal-overlay" id="deleteModal">
        <div class="modal">
            <div class="modal-header">
                <h3 class="modal-title">
                    <i class="fas fa-trash-alt"></i> Confirm Deletion
                </h3>
                <button class="modal-close" id="closeDeleteModal">&times;</button>
            </div>
            <div class="modal-body">
                <div style="text-align: center; margin-bottom: 20px;">
                    <i class="fas fa-exclamation-triangle" style="font-size: 48px; color: var(--error);"></i>
                </div>
                <p style="text-align: center; font-size: 18px; margin-bottom: 16px;">Are you sure you want to delete this post?</p>
                <p style="text-align: center; color: var(--text-light);">This action cannot be undone.</p>
                <input type="hidden" id="deletePostId">
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" id="cancelDeleteBtn">
                    <i class="fas fa-times"></i> Cancel
                </button>
                <button class="btn btn-danger" id="confirmDeleteBtn">
                    <span class="spinner" id="deleteSpinner"></span>
                    <i class="fas fa-trash-alt"></i> Delete
                </button>
            </div>
        </div>
    </div>

    <div class="modal-overlay" id="viewModal">
        <div class="modal">
            <div class="modal-header">
                <h3 class="modal-title">
                    <i class="fas fa-eye"></i> View Post
                </h3>
                <button class="modal-close" id="closeViewModal">&times;</button>
            </div>
            <div class="modal-body">
                <div id="viewPostContent">
                    <!-- Post content will be loaded here -->
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" id="closeViewBtn">
                    <i class="fas fa-times"></i> Close
                </button>
                <button class="btn" id="editFromViewBtn">
                    <i class="fas fa-edit"></i> Edit Post
                </button>
            </div>
        </div>
    </div>

    <!-- Help Modal -->
    <div class="modal-overlay" id="helpModal">
        <div class="modal">
            <div class="modal-header">
                <h3 class="modal-title">
                    <i class="fas fa-question-circle"></i> Help Center
                </h3>
                <button class="modal-close" id="closeHelpModal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="help-section">
                    <h3 class="help-title"><i class="fas fa-info-circle"></i> About Ang Silakbo Workstation</h3>
                    <p class="help-text">
                        Ang Silakbo Workstation is a content management system designed for writers, journalists, and content creators. It provides a streamlined workflow for creating, editing, and managing articles and literary works.
                    </p>
                </div>

                <div class="help-section">
                    <h3 class="help-title"><i class="fas fa-plus-circle"></i> Creating New Posts</h3>
                    <p class="help-text">
                        To create a new post, follow these steps:
                    </p>
                    <ul class="help-list">
                        <li class="help-list-item">Navigate to the "Create New Post" tab from the sidebar or top navigation.</li>
                        <li class="help-list-item">Select a category (Article or Literary) from the dropdown menu.</li>
                        <li class="help-list-item">Fill in the required fields: Title and Author.</li>
                        <li class="help-list-item">Add a photojournalist or cartoonist name if applicable.</li>
                        <li class="help-list-item">Upload a featured image by clicking "Choose File".</li>
                        <li class="help-list-item">Write your content in the rich text editor.</li>
                        <li class="help-list-item">Click "Save Draft" to save your work or "Publish Post" to make it live.</li>
                    </ul>
                    <div class="help-tip">
                        <strong>Pro Tip:</strong> Use the writing tips displayed below the editor for guidance specific to your selected category.
                    </div>
                </div>

                <div class="help-section">
                    <h3 class="help-title"><i class="fas fa-list"></i> Managing Published Works</h3>
                    <p class="help-text">
                        The "Published Works" section allows you to view, edit, and manage all your content:
                    </p>
                    <ul class="help-list">
                        <li class="help-list-item">Switch between Table and Grid views using the "Toggle View" button.</li>
                        <li class="help-list-item">Use the "View" button to read the full post.</li>
                        <li class="help-list-item">Use the "Edit" button to modify an existing post.</li>
                        <li class="help-list-item">Use the "Delete" button to remove a post (requires confirmation).</li>
                        <li class="help-list-item">Click "Refresh" to update the list with the latest changes.</li>
                    </ul>
                    <div class="help-note">
                        <strong>Note:</strong> You can filter posts by category by clicking on "Articles" or "Literary Works" in the sidebar.
                    </div>
                </div>

                <div class="help-section">
                    <h3 class="help-title"><i class="fas fa-edit"></i> Editing Content</h3>
                    <p class="help-text">
                        The rich text editor provides various formatting options:
                    </p>
                    <ul class="help-list">
                        <li class="help-list-item">Use the toolbar to format text (bold, italic, underline, etc.).</li>
                        <li class="help-list-item">Insert images, links, tables, and other media elements.</li>
                        <li class="help-list-item">Create ordered and unordered lists.</li>
                        <li class="help-list-item">Adjust text alignment and indentation.</li>
                        <li class="help-list-item">Use the code sample feature for displaying code snippets.</li>
                    </ul>
                    <div class="feature-highlight">
                        <strong>Word and Character Count:</strong> The status bar at the bottom displays the current word and character count of your content, updating in real-time as you type.
                    </div>
                </div>

                <div class="help-section">
                    <h3 class="help-title"><i class="fas fa-keyboard"></i> Keyboard Shortcuts</h3>
                    <p class="help-text">
                        Use these keyboard shortcuts to speed up your workflow:
                    </p>
                    <ul class="help-list">
                        <li class="help-list-item"><span class="shortcut-key">Ctrl</span> + <span class="shortcut-key">B</span> - Bold text</li>
                        <li class="help-list-item"><span class="shortcut-key">Ctrl</span> + <span class="shortcut-key">I</span> - Italic text</li>
                        <li class="help-list-item"><span class="shortcut-key">Ctrl</span> + <span class="shortcut-key">U</span> - Underline text</li>
                        <li class="help-list-item"><span class="shortcut-key">Ctrl</span> + <span class="shortcut-key">Z</span> - Undo</li>
                        <li class="help-list-item"><span class="shortcut-key">Ctrl</span> + <span class="shortcut-key">Y</span> - Redo</li>
                        <li class="help-list-item"><span class="shortcut-key">Ctrl</span> + <span class="shortcut-key">S</span> - Save draft</li>
                    </ul>
                </div>

                <div class="help-section">
                    <h3 class="help-title"><i class="fas fa-mobile-alt"></i> Mobile Usage</h3>
                    <p class="help-text">
                        Ang Silakbo Workstation is fully responsive and works on mobile devices:
                    </p>
                    <ul class="help-list">
                        <li class="help-list-item">Access the sidebar by tapping the menu button in the header.</li>
                        <li class="help-list-item">Scroll horizontally to view all columns in the table view.</li>
                        <li class="help-list-item">Use the grid view for a better mobile experience.</li>
                        <li class="help-list-item">The editor adapts to smaller screens for comfortable editing.</li>
                    </ul>
                </div>

                <div class="help-section">
                    <h3 class="help-title"><i class="fas fa-question"></i> Need More Help?</h3>
                    <p class="help-text">
                        If you have additional questions or need further assistance, please contact our support team at <strong>asnahonron@gmail.com</strong>.
                    </p>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn" id="closeHelpBtn">
                    <i class="fas fa-check"></i> Got It
                </button>
            </div>
        </div>
    </div>

    <script>
       // Initialize Supabase
const supabaseUrl = "https://uyxgsziyflquisckdwwc.supabase.co";
const supabaseKey = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InV5eGdzeml5ZmxxdWlzY2tkd3djIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDE1OTQyODUsImV4cCI6MjA1NzE3MDI4NX0.DoIEoWWuajDpBhD2UwLYzrKRyZNyBP4izasROCdIbkk";
const supabase = window.supabase.createClient(supabaseUrl, supabaseKey);

// Writing Tips Data
const writingTips = {
    article: [
        "Start with a compelling headline that grabs attention and summarizes your main point.",
        "Use the inverted pyramid structure: put the most important information first.",
        "Include relevant statistics and data to support your claims.",
        "Break up long paragraphs into shorter ones for better readability.",
        "Use subheadings to organize your content and guide readers through your article.",
        "Incorporate quotes from experts or relevant sources to add credibility.",
        "End with a strong conclusion that reinforces your main message."
    ],
    literary: [
        "Show, don't tell. Use descriptive language to create vivid imagery.",
        "Develop complex, multi-dimensional characters with unique voices.",
        "Experiment with different literary devices like metaphor, simile, and symbolism.",
        "Pay attention to rhythm and pacing in your narrative.",
        "Create a strong sense of setting that immerses readers in your world.",
        "Use dialogue to reveal character and advance the plot naturally.",
        "Revise and edit ruthlessly, focusing on language precision and emotional impact."
    ]
};

// Current view mode for posts (table or grid)
let currentViewMode = 'table';

// Dark mode toggle
let darkMode = false;

// Current category filter
let currentCategoryFilter = null;

// Initialize document
document.addEventListener('DOMContentLoaded', function() {
    // Update current time
    updateTime();
    setInterval(updateTime, 60000);
    
    // Initialize TinyMCE for create form
    tinymce.init({
        selector: '#content',
        plugins: 'anchor autolink charmap codesample emoticons image link lists media searchreplace table visualblocks wordcount',
        toolbar: 'undo redo | blocks fontfamily fontsize | bold italic underline strikethrough | link image media table | align lineheight | numlist bullist indent outdent | emoticons charmap | removeformat',
        height: 400,
        menubar: false,
        statusbar: true,
        branding: false,
        promotion: false,
        skin: 'oxide',
        content_css: 'default',
        setup: function(editor) {
            editor.on('init', function() {
                updateWritingTips('article'); // Default to article tips
            });
            
            // Update word count and character count
            editor.on('KeyUp', function() {
                const text = editor.getContent({ format: 'text' });
                updateWordCount(text);
                updateCharacterCount(text);
            });

            // Add keyboard shortcut for save
            editor.addShortcut('ctrl+s', 'Save draft', function() {
                document.getElementById('saveBtn').click();
                return false; // Prevent default browser save dialog
            });
        }
    });

    // Initialize TinyMCE for edit form
    tinymce.init({
        selector: '#editContent',
        plugins: 'anchor autolink charmap codesample emoticons image link lists media searchreplace table visualblocks wordcount',
        toolbar: 'undo redo | blocks fontfamily fontsize | bold italic underline strikethrough | link image media table | align lineheight | numlist bullist indent outdent | emoticons charmap | removeformat',
        height: 400,
        menubar: false,
        statusbar: true,
        branding: false,
        promotion: false,
        skin: 'oxide',
        content_css: 'default',
        setup: function(editor) {
            // Add keyboard shortcut for save
            editor.addShortcut('ctrl+s', 'Save changes', function() {
                document.getElementById('saveEditBtn').click();
                return false; // Prevent default browser save dialog
            });
        }
    });

    // Initialize writing tips
    updateWritingTips('article');
    
    // Initialize category change event
    document.getElementById('category').addEventListener('change', function() {
        let label = document.getElementById('roleLabel');
        let additionalField = document.getElementById('additionalField');
        
        if (this.value === 'article') {
            label.innerHTML = '<i class="fas fa-camera"></i> Photojournalist:';
            additionalField.placeholder = "Enter photojournalist's name";
        } else {
            label.innerHTML = '<i class="fas fa-paint-brush"></i> Cartoonist:';
            additionalField.placeholder = "Enter cartoonist's name";
        }
        
        // Update writing tips
        updateWritingTips(this.value);
    });
    
    // Toggle sidebar
    document.getElementById('toggleSidebarBtn').addEventListener('click', function() {
        document.getElementById('sidebar').classList.toggle('active');
    });
    
    // Collapse sidebar
    document.getElementById('collapseSidebarBtn').addEventListener('click', function() {
        document.getElementById('sidebar').classList.toggle('sidebar-collapsed');
        this.querySelector('i').classList.toggle('fa-chevron-left');
        this.querySelector('i').classList.toggle('fa-chevron-right');
    });
    
    // Navigation tabs
    document.querySelectorAll('.nav-tab').forEach(tab => {
        tab.addEventListener('click', function() {
            // Update active tab
            document.querySelectorAll('.nav-tab').forEach(t => t.classList.remove('active'));
            this.classList.add('active');
            
            // Show corresponding content
            const tabId = this.getAttribute('data-tab');
            showTab(tabId);
        });
    });
    
    // Sidebar navigation
    document.getElementById('navCreate').addEventListener('click', function(e) {
        e.preventDefault();
        showTab('create');
        updateActiveNavLink(this);
    });
    
    document.getElementById('navManage').addEventListener('click', function(e) {
        e.preventDefault();
        showTab('manage');
        currentCategoryFilter = null; // Reset filter
        loadPosts(); // Load all posts
        updateActiveNavLink(this);
    });
    
    document.getElementById('navArticles').addEventListener('click', function(e) {
        e.preventDefault();
        showTab('manage');
        currentCategoryFilter = 'article';
        loadPosts('article'); // Load only articles
        updateActiveNavLink(this);
    });
    
    document.getElementById('navLiterary').addEventListener('click', function(e) {
        e.preventDefault();
        showTab('manage');
        currentCategoryFilter = 'literary';
        loadPosts('literary'); // Load only literary works
        updateActiveNavLink(this);
    });

    document.getElementById('navWritingTips').addEventListener('click', function(e) {
        e.preventDefault();
        showTab('create');
        // Scroll to writing tips section
        document.querySelector('.card:nth-child(2)').scrollIntoView({ behavior: 'smooth' });
        updateActiveNavLink(this);
    });

    document.getElementById('navHelp').addEventListener('click', function(e) {
        e.preventDefault();
        openHelpModal();
        updateActiveNavLink(this);
    });
    
    // Create new post button
    document.getElementById('createNewBtn').addEventListener('click', function() {
        showTab('create');
        updateActiveNavLink(document.getElementById('navCreate'));
    });
    
    // View posts button
    document.getElementById('viewPostsBtn').addEventListener('click', function() {
        showTab('manage');
        updateActiveNavLink(document.getElementById('navManage'));
    });
    
    // Toggle view button (table/grid)
    document.getElementById('toggleViewBtn').addEventListener('click', function() {
        togglePostsView();
    });
    
    // Refresh posts button
    document.getElementById('refreshPostsBtn').addEventListener('click', function() {
        loadPosts(currentCategoryFilter);
    });
    
    // Save button
    document.getElementById('saveBtn').addEventListener('click', function() {
        document.getElementById('postForm').dispatchEvent(new Event('submit'));
    });
    
    // Publish button (same as save for now)
    document.getElementById('publishBtn').addEventListener('click', function() {
        document.getElementById('postForm').dispatchEvent(new Event('submit'));
    });
    
    // Reset button
    document.getElementById('resetBtn').addEventListener('click', function() {
        document.getElementById('postForm').reset();
        tinymce.get('content').setContent('');
        document.getElementById('imagePreview').style.display = 'none';
        document.getElementById('fileName').innerHTML = '<i class="fas fa-file-image"></i> No file chosen';
        updateWordCount('');
        updateCharacterCount('');
    });
    
    // Create first post button
    document.getElementById('createFirstPostBtn').addEventListener('click', function() {
        showTab('create');
        updateActiveNavLink(document.getElementById('navCreate'));
    });

    // Help button
    document.getElementById('helpBtn').addEventListener('click', function() {
        openHelpModal();
    });

    // Close help modal
    document.getElementById('closeHelpModal').addEventListener('click', function() {
        document.getElementById('helpModal').style.display = 'none';
        document.getElementById('helpModal').classList.remove('active');
    });

    document.getElementById('closeHelpBtn').addEventListener('click', function() {
        document.getElementById('helpModal').style.display = 'none';
        document.getElementById('helpModal').classList.remove('active');
    });
    
    // Theme toggle
    document.getElementById('themeToggle').addEventListener('click', function() {
        toggleDarkMode();
    });
    
    // Load posts initially
    loadPosts();
});

// Toggle dark mode
function toggleDarkMode() {
    darkMode = !darkMode;
    if (darkMode) {
        document.body.classList.add('dark');
        document.getElementById('themeToggle').innerHTML = '<i class="fas fa-sun"></i>';
    } else {
        document.body.classList.remove('dark');
        document.getElementById('themeToggle').innerHTML = '<i class="fas fa-moon"></i>';
    }
    
    // Update TinyMCE skin
    if (tinymce.activeEditor) {
        tinymce.activeEditor.ui.styleSheetLoader.unload('default');
        tinymce.activeEditor.ui.styleSheetLoader.load(darkMode ? 'oxide-dark' : 'oxide');
    }
}

// Open help modal
function openHelpModal() {
    document.getElementById('helpModal').style.display = 'flex';
    document.getElementById('helpModal').classList.add('active');
}

// Update active navigation link
function updateActiveNavLink(activeLink) {
    document.querySelectorAll('.nav-link').forEach(link => {
        link.classList.remove('active');
    });
    activeLink.classList.add('active');
}

// Toggle posts view between table and grid
function togglePostsView() {
    const tableView = document.getElementById('postsTable');
    const gridView = document.getElementById('postsGrid');
    
    if (currentViewMode === 'table') {
        tableView.style.display = 'none';
        gridView.style.display = 'grid';
        currentViewMode = 'grid';
        document.getElementById('toggleViewBtn').innerHTML = '<i class="fas fa-table"></i> Table View';
    } else {
        tableView.style.display = 'block';
        gridView.style.display = 'none';
        currentViewMode = 'table';
        document.getElementById('toggleViewBtn').innerHTML = '<i class="fas fa-th-large"></i> Grid View';
    }
}

// Filter posts by category
function filterPostsByCategory(category) {
    currentCategoryFilter = category;
    loadPosts(category);
}

// Update writing tips based on category
function updateWritingTips(category) {
    const tipsContainer = document.getElementById('writingTipsContent');
    tipsContainer.innerHTML = '';
    
    const tips = writingTips[category] || writingTips.article;
    
    tips.forEach(tip => {
        const tipElement = document.createElement('div');
        tipElement.className = 'writing-tip';
        tipElement.textContent = tip;
        tipsContainer.appendChild(tipElement);
    });
}

// Update word count
function updateWordCount(text) {
    const wordCount = text ? text.split(/\s+/).filter(word => word.length > 0).length : 0;
    document.getElementById('wordCount').innerHTML = `<i class="fas fa-font"></i> Words: ${wordCount}`;
}

// Update character count
function updateCharacterCount(text) {
    const charCount = text ? text.length : 0;
    document.getElementById('characterCount').innerHTML = `<i class="fas fa-text-width"></i> Characters: ${charCount}`;
}

// Update time
function updateTime() {
    const now = new Date();
    const hours = now.getHours().toString().padStart(2, '0');
    const minutes = now.getMinutes().toString().padStart(2, '0');
    document.getElementById('currentTime').textContent = `${hours}:${minutes}`;
}

// Show tab (create or manage)
function showTab(tabId) {
    // Hide all tabs
    document.getElementById('createTab').classList.remove('active');
    document.getElementById('manageTab').classList.remove('active');
    
    // Show selected tab
    document.getElementById(tabId + 'Tab').classList.add('active');
    
    // Update nav tabs
    document.querySelectorAll('.nav-tab').forEach(tab => {
        tab.classList.remove('active');
        if (tab.getAttribute('data-tab') === tabId) {
            tab.classList.add('active');
        }
    });
    
    // If switching to manage tab, load posts with current filter
    if (tabId === 'manage') {
        loadPosts(currentCategoryFilter);
    }
}

// Update edit role label when category changes
document.getElementById('editCategory').addEventListener('change', function() {
    let label = document.getElementById('editRoleLabel');
    let additionalField = document.getElementById('editAdditionalField');
    
    if (this.value === 'article') {
        label.innerHTML = '<i class="fas fa-camera"></i> Photojournalist:';
        additionalField.placeholder = "Enter photojournalist's name";
    } else {
        label.innerHTML = '<i class="fas fa-paint-brush"></i> Cartoonist:';
        additionalField.placeholder = "Enter cartoonist's name";
    }
});

// Image Preview Feature
document.getElementById('imageUpload').addEventListener('change', function(event) {
    const file = event.target.files[0];
    if (file) {
        const reader = new FileReader();
        reader.onload = function(e) {
            const imgPreview = document.getElementById('imagePreview');
            imgPreview.src = e.target.result;
            imgPreview.style.display = 'block';
            document.getElementById('fileName').innerHTML = '<i class="fas fa-file-image"></i> ' + file.name;
        };
        reader.readAsDataURL(file);
    }
});

// Edit Image Preview Feature
document.getElementById('editImageUpload').addEventListener('change', function(event) {
    const file = event.target.files[0];
    if (file) {
        const reader = new FileReader();
        reader.onload = function(e) {
            const imgPreview = document.getElementById('editImagePreview');
            imgPreview.src = e.target.result;
            imgPreview.style.display = 'block';
            document.getElementById('editFileName').innerHTML = '<i class="fas fa-file-image"></i> ' + file.name;
        };
        reader.readAsDataURL(file);
    }
});

// Handle form submission
document.getElementById('postForm').addEventListener('submit', async function(event) {
    event.preventDefault();
    
    // Show spinner
    const submitBtn = document.getElementById('saveBtn');
    const submitSpinner = document.getElementById('submitSpinner');
    submitBtn.disabled = true;
    submitSpinner.style.display = 'inline-block';
    
    try {
        const category = document.getElementById('category').value;
        const title = document.getElementById('title').value;
        const author = document.getElementById('author').value;
        const role = document.getElementById('additionalField').value;
        const content = tinymce.get('content').getContent();
        const imageFile = document.getElementById('imageUpload').files[0];
        
        let imageUrl = '';
        if (imageFile) {
            const formData = new FormData();
            formData.append("file", imageFile);
            formData.append("upload_preset", "Ang Silakbo");
            
            const response = await fetch("https://api.cloudinary.com/v1_1/ddalveuw6/image/upload", {
                method: "POST",
                body: formData
            });

            const data = await response.json();
            if (data.error) {
                throw new Error(data.error.message);
            }
            imageUrl = data.secure_url;
        }

        const { data, error } = await supabase
            .from("posts")
            .insert([{ 
                category, 
                title,
                author, 
                role, 
                content, 
                image_url: imageUrl,
                created_at: new Date().toISOString()
            }]);
        
        if (error) {
            throw new Error(error.message);
        }

        // Show success message
        showAlert('success', 'Post created successfully!');
        
        // Reset form
        document.getElementById('postForm').reset();
        tinymce.get('content').setContent('');
        document.getElementById('imagePreview').style.display = 'none';
        document.getElementById('fileName').innerHTML = '<i class="fas fa-file-image"></i> No file chosen';
        updateWordCount('');
        updateCharacterCount('');
        
        // Refresh posts list
        loadPosts(currentCategoryFilter);
    } catch (error) {
        console.error("Error saving post:", error);
        showAlert('error', error.message || 'Error creating post. Please try again.');
    } finally {
        // Enable button
        submitBtn.disabled = false;
        submitSpinner.style.display = 'none';
    }
});

// Load posts from Supabase
async function loadPosts(categoryFilter = null) {
    const loadingElement = document.getElementById('loadingPosts');
    const tableElement = document.getElementById('postsTable');
    const gridElement = document.getElementById('postsGrid');
    const noPostsMessage = document.getElementById('noPostsMessage');
    
    loadingElement.style.display = 'flex';
    tableElement.style.display = 'none';
    gridElement.style.display = 'none';
    noPostsMessage.style.display = 'none';
    
    try {
        let query = supabase
            .from('posts')
            .select('*')
            .order('created_at', { ascending: false });
        
        // Apply category filter if provided
        if (categoryFilter) {
            query = query.eq('category', categoryFilter);
        }
        
        const { data, error } = await query;
        
        if (error) {
            throw new Error(error.message);
        }
        
        const tableBody = document.getElementById('postsTableBody');
        const gridContainer = document.getElementById('postsGrid');
        
        tableBody.innerHTML = '';
        gridContainer.innerHTML = '';
        
        if (data && data.length > 0) {
            data.forEach(post => {
                // Format date
                const date = new Date(post.created_at);
                const formattedDate = date.toLocaleDateString() + ' ' + date.toLocaleTimeString();
                
                // Category badge
                const categoryClass = post.category === 'article' ? 'badge-article' : 'badge-literary';
                const categoryIcon = post.category === 'article' ? 'newspaper' : 'book';
                const categoryText = post.category.charAt(0).toUpperCase() + post.category.slice(1);
                
                // Create table row
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>
                        <span class="badge ${categoryClass}">
                            <i class="fas fa-${categoryIcon}"></i> ${categoryText}
                        </span>
                    </td>
                    <td>${post.title || 'Untitled'}</td>
                    <td>${post.author}</td>
                    <td>${post.role || '-'}</td>
                    <td><i class="far fa-clock"></i> ${formattedDate}</td>
                    <td>
                        <div class="action-buttons">
                            <button class="action-btn action-btn-view tooltip" data-id="${post.id}" data-tooltip="View Post">
                                <i class="fas fa-eye"></i>
                            </button>
                            <button class="action-btn action-btn-edit tooltip" data-id="${post.id}" data-tooltip="Edit Post">
                                <i class="fas fa-edit"></i>
                            </button>
                            <button class="action-btn action-btn-delete tooltip" data-id="${post.id}" data-tooltip="Delete Post">
                                <i class="fas fa-trash-alt"></i>
                            </button>
                        </div>
                    </td>
                `;
                
                tableBody.appendChild(row);
                
                // Create grid card
                const card = document.createElement('div');
                card.className = 'post-card';
                
                // Default image if none provided
                const imageUrl = post.image_url || 'https://via.placeholder.com/300x180?text=No+Image';
                
                card.innerHTML = `
                    <img src="${imageUrl}" alt="${post.title}" class="post-image">
                    <div class="post-content">
                        <div class="post-category">
                            <span class="badge ${categoryClass}">
                                <i class="fas fa-${categoryIcon}"></i> ${categoryText}
                            </span>
                        </div>
                        <h3 class="post-title">${post.title || 'Untitled'}</h3>
                        <div class="post-meta">
                            <div class="post-meta-item">
                                <i class="fas fa-user-edit"></i> ${post.author}
                            </div>
                            <div class="post-meta-item">
                                <i class="far fa-clock"></i> ${formattedDate.split(' ')[0]}
                            </div>
                        </div>
                        <div class="post-actions">
                            <button class="btn btn-sm btn-secondary view-post-btn" data-id="${post.id}">
                                <i class="fas fa-eye"></i> View
                            </button>
                            <button class="btn btn-sm edit-post-btn" data-id="${post.id}">
                                <i class="fas fa-edit"></i> Edit
                            </button>
                            <button class="btn btn-sm btn-danger delete-post-btn" data-id="${post.id}">
                                <i class="fas fa-trash-alt"></i>
                            </button>
                        </div>
                    </div>
                `;
                
                gridContainer.appendChild(card);
            });
            
            // Show the current view mode
            if (currentViewMode === 'table') {
                tableElement.style.display = 'block';
            } else {
                gridElement.style.display = 'grid';
            }
            
            // Add event listeners to table view buttons
            document.querySelectorAll('.action-btn-view').forEach(button => {
                button.addEventListener('click', () => openViewModal(button.getAttribute('data-id')));
            });
            
            document.querySelectorAll('.action-btn-edit').forEach(button => {
                button.addEventListener('click', () => openEditModal(button.getAttribute('data-id')));
            });
            
            document.querySelectorAll('.action-btn-delete').forEach(button => {
                button.addEventListener('click', () => openDeleteModal(button.getAttribute('data-id')));
            });
            
            // Add event listeners to grid view buttons
            document.querySelectorAll('.view-post-btn').forEach(button => {
                button.addEventListener('click', () => openViewModal(button.getAttribute('data-id')));
            });
            
            document.querySelectorAll('.edit-post-btn').forEach(button => {
                button.addEventListener('click', () => openEditModal(button.getAttribute('data-id')));
            });
            
            document.querySelectorAll('.delete-post-btn').forEach(button => {
                button.addEventListener('click', () => openDeleteModal(button.getAttribute('data-id')));
            });
        } else {
            noPostsMessage.style.display = 'flex';
        }
    } catch (error) {
        console.error("Error loading posts:", error);
        showAlert('error', error.message || 'Error loading posts. Please try again.');
    } finally {
        loadingElement.style.display = 'none';
    }
}

// Open view modal
async function openViewModal(postId) {
    try {
        const { data, error } = await supabase
            .from('posts')
            .select('*')
            .eq('id', postId)
            .single();
        
        if (error) {
            throw new Error(error.message);
        }
        
        if (data) {
            const viewContent = document.getElementById('viewPostContent');
            
            // Format date
            const date = new Date(data.created_at);
            const formattedDate = date.toLocaleDateString() + ' ' + date.toLocaleTimeString();
            
            // Category badge
            const categoryClass = data.category === 'article' ? 'badge-article' : 'badge-literary';
            const categoryIcon = data.category === 'article' ? 'newspaper' : 'book';
            const categoryText = data.category.charAt(0).toUpperCase() + data.category.slice(1);
            
            let html = `
                <div style="margin-bottom: 16px;">
                    <span class="badge ${categoryClass}">
                        <i class="fas fa-${categoryIcon}"></i> ${categoryText}
                    </span>
                </div>
                
                <h2 style="font-size: 24px; margin-bottom: 16px; color: var(--text-dark); font-weight: 600;">
                    ${data.title || 'Untitled'}
                </h2>
            `;
            
            if (data.image_url) {
                html += `
                    <div style="margin-bottom: 20px; text-align: center;">
                        <img src="${data.image_url}" alt="Post Image" style="max-width: 100%; border-radius: var(--border-radius); box-shadow: var(--shadow);">
                    </div>
                `;
            }
            
            html += `
                <div style="margin-bottom: 20px;">
                    <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 8px;">
                        <i class="fas fa-user-edit" style="color: var(--primary);"></i>
                        <strong>Author:</strong> ${data.author}
                    </div>
                    
                    <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 8px;">
                        <i class="fas fa-${data.category === 'article' ? 'camera' : 'paint-brush'}" style="color: var(--primary);"></i>
                        <strong>${data.category === 'article' ? 'Photojournalist' : 'Cartoonist'}:</strong> ${data.role || '-'}
                    </div>
                    
                    <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 16px;">
                        <i class="far fa-clock" style="color: var(--primary);"></i>
                        <strong>Published:</strong> ${formattedDate}
                    </div>
                </div>
                
                <div style="border-top: 1px solid var(--border-color); padding-top: 20px;">
                    ${data.content}
                </div>
            `;
            
            viewContent.innerHTML = html;
            
            // Store post ID for edit button
            document.getElementById('editFromViewBtn').setAttribute('data-id', postId);
            
            // Show modal
            document.getElementById('viewModal').style.display = 'flex';
            document.getElementById('viewModal').classList.add('active');
        }
    } catch (error) {
        console.error("Error loading post for view:", error);
        showAlert('error', error.message || 'Error loading post. Please try again.');
    }
}

// Open edit modal
async function openEditModal(postId) {
    try {
        const { data, error } = await supabase
            .from('posts')
            .select('*')
            .eq('id', postId)
            .single();
        
        if (error) {
            throw new Error(error.message);
        }
        
        if (data) {
            document.getElementById('editPostId').value = data.id;
            document.getElementById('editCategory').value = data.category;
            document.getElementById('editTitle').value = data.title || '';
            document.getElementById('editAuthor').value = data.author;
            document.getElementById('editAdditionalField').value = data.role || '';
            
            // Update role label based on category
            let label = document.getElementById('editRoleLabel');
            let additionalField = document.getElementById('editAdditionalField');
            if (data.category === 'article') {
                label.innerHTML = '<i class="fas fa-camera"></i> Photojournalist:';
                additionalField.placeholder = "Enter photojournalist's name";
            } else {
                label.innerHTML = '<i class="fas fa-paint-brush"></i> Cartoonist:';
                additionalField.placeholder = "Enter cartoonist's name";
            }
            
            // Set content in TinyMCE
            tinymce.get('editContent').setContent(data.content || '');
            
            // Show image preview if available
            const imgPreview = document.getElementById('editImagePreview');
            if (data.image_url) {
                imgPreview.src = data.image_url;
                imgPreview.style.display = 'block';
            } else {
                imgPreview.style.display = 'none';
            }
            
            // Reset file name
            document.getElementById('editFileName').innerHTML = '<i class="fas fa-file-image"></i> No file chosen';
            
            // Show modal
            document.getElementById('editModal').style.display = 'flex';
            document.getElementById('editModal').classList.add('active');
        }
    } catch (error) {
        console.error("Error loading post for edit:", error);
        showAlert('error', error.message || 'Error loading post. Please try again.');
    }
}

// Handle edit form submission
document.getElementById('saveEditBtn').addEventListener('click', async function() {
    // Show spinner
    const saveBtn = document.getElementById('saveEditBtn');
    const editSpinner = document.getElementById('editSpinner');
    saveBtn.disabled = true;
    editSpinner.style.display = 'inline-block';
    
    try {
        const postId = document.getElementById('editPostId').value;
        const category = document.getElementById('editCategory').value;
        const title = document.getElementById('editTitle').value;
        const author = document.getElementById('editAuthor').value;
        const role = document.getElementById('editAdditionalField').value;
        const content = tinymce.get('editContent').getContent();
        const imageFile = document.getElementById('editImageUpload').files[0];
        
        let updateData = { 
            category, 
            title,
            author, 
            role, 
            content,
            updated_at: new Date().toISOString()
        };
        
        // Upload new image if selected
        if (imageFile) {
            const formData = new FormData();
            formData.append("file", imageFile);
            formData.append("upload_preset", "Ang Silakbo");
            
            const response = await fetch("https://api.cloudinary.com/v1_1/ddalveuw6/image/upload", {
                method: "POST",
                body: formData
            });

            const data = await response.json();
            if (data.error) {
                throw new Error(data.error.message);
            }
            updateData.image_url = data.secure_url;
        }

        const { error } = await supabase
            .from("posts")
            .update(updateData)
            .eq('id', postId);
        
        if (error) {
            throw new Error(error.message);
        }

        // Show success message
        showAlert('success', 'Post updated successfully!');
        
        // Close modal
        document.getElementById('editModal').style.display = 'none';
        document.getElementById('editModal').classList.remove('active');
        
        // Refresh posts list with current filter
        loadPosts(currentCategoryFilter);
    } catch (error) {
        console.error("Error updating post:", error);
        showAlert('error', error.message || 'Error updating post. Please try again.');
    } finally {
        // Hide spinner
        saveBtn.disabled = false;
        editSpinner.style.display = 'none';
    }
});

// Open delete modal
function openDeleteModal(postId) {
    document.getElementById('deletePostId').value = postId;
    document.getElementById('deleteModal').style.display = 'flex';
    document.getElementById('deleteModal').classList.add('active');
}

// Handle delete confirmation
document.getElementById('confirmDeleteBtn').addEventListener('click', async function() {
    // Show spinner
    const deleteBtn = document.getElementById('confirmDeleteBtn');
    const deleteSpinner = document.getElementById('deleteSpinner');
    deleteBtn.disabled = true;
    deleteSpinner.style.display = 'inline-block';
    
    try {
        const postId = document.getElementById('deletePostId').value;
        
        const { error } = await supabase
            .from("posts")
            .delete()
            .eq('id', postId);
        
        if (error) {
            throw new Error(error.message);
        }

        // Show success message
        showAlert('success', 'Post deleted successfully!');
        
        // Close modal
        document.getElementById('deleteModal').style.display = 'none';
        document.getElementById('deleteModal').classList.remove('active');
        
        // Refresh posts list with current filter
        loadPosts(currentCategoryFilter);
    } catch (error) {
        console.error("Error deleting post:", error);
        showAlert('error', error.message || 'Error deleting post. Please try again.');
    } finally {
        // Hide spinner
        deleteBtn.disabled = false;
        deleteSpinner.style.display = 'none';
    }
});

// Edit from view modal
document.getElementById('editFromViewBtn').addEventListener('click', function() {
    const postId = this.getAttribute('data-id');
    document.getElementById('viewModal').style.display = 'none';
    document.getElementById('viewModal').classList.remove('active');
    openEditModal(postId);
});

// Close modals
document.getElementById('closeEditModal').addEventListener('click', () => {
    document.getElementById('editModal').style.display = 'none';
    document.getElementById('editModal').classList.remove('active');
});

document.getElementById('cancelEditBtn').addEventListener('click', () => {
    document.getElementById('editModal').style.display = 'none';
    document.getElementById('editModal').classList.remove('active');
});

document.getElementById('closeDeleteModal').addEventListener('click', () => {
    document.getElementById('deleteModal').style.display = 'none';
    document.getElementById('deleteModal').classList.remove('active');
});

document.getElementById('cancelDeleteBtn').addEventListener('click', () => {
    document.getElementById('deleteModal').style.display = 'none';
    document.getElementById('deleteModal').classList.remove('active');
});

document.getElementById('closeViewModal').addEventListener('click', () => {
    document.getElementById('viewModal').style.display = 'none';
    document.getElementById('viewModal').classList.remove('active');
});

document.getElementById('closeViewBtn').addEventListener('click', () => {
    document.getElementById('viewModal').style.display = 'none';
    document.getElementById('viewModal').classList.remove('active');
});

// Show alert message
function showAlert(type, message) {
    const alertSuccess = document.getElementById('alertSuccess');
    const alertError = document.getElementById('alertError');
    const errorMessage = document.getElementById('errorMessage');
    
    if (type === 'success') {
        alertSuccess.querySelector('span').textContent = message;
        alertSuccess.style.display = 'flex';
        alertSuccess.style.opacity = '1';
        alertSuccess.style.transform = 'translateY(0)';
        alertError.style.display = 'none';
        
        setTimeout(() => {
            alertSuccess.style.opacity = '0';
            alertSuccess.style.transform = 'translateY(-5px)';
            setTimeout(() => {
                alertSuccess.style.display = 'none';
            }, 300);
        }, 5000);
    } else {
        errorMessage.textContent = message;
        alertError.style.display = 'flex';
        alertError.style.opacity = '1';
        alertError.style.transform = 'translateY(0)';
        alertSuccess.style.display = 'none';
        
        setTimeout(() => {
            alertError.style.opacity = '0';
            alertError.style.transform = 'translateY(-5px)';
            setTimeout(() => {
                alertError.style.display = 'none';
            }, 300);
        }, 5000);
    }
}

// Close alert when clicked
document.querySelectorAll('.alert-close').forEach(button => {
    button.addEventListener('click', function() {
        const alert = this.parentElement;
        alert.style.opacity = '0';
        alert.style.transform = 'translateY(-5px)';
        setTimeout(() => {
            alert.style.display = 'none';
        }, 300);
    });
});
    </script>
</body>
</html>
