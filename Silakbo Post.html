<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ANG SILAKBO - Workstation</title>
    <link rel="icon" href="SILAKBO (1).png">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Merriweather:wght@300;400;700&family=Playfair+Display:wght@400;500;600;700&family=Source+Sans+Pro:wght@300;400;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.tiny.cloud/1/n92j01vjprp9xy96v0uxd2kgqi5vnd50dwm5i47veg2u1bur/tinymce/6/tinymce.min.js" referrerpolicy="origin"></script>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            /* Orange color scheme */
            --primary: #E65100;
            --primary-light: #FF8A65;
            --primary-dark: #BF360C;
            --accent: #FF9800;
            --accent-light: #FFB74D;
            --accent-dark: #F57C00;
            
            /* Text colors */
            --text-dark: #212121;
            --text-medium: #505050;
            --text-light: #737373;
            
            /* Background colors */
            --bg-white: #FFFFFF;
            --bg-light: #F5F5F5;
            --bg-gray: #EEEEEE;
            --bg-dark: #333333;
            
            /* Neutral colors */
            --gray-50: #FAFAFA;
            --gray-100: #F5F5F5;
            --gray-200: #EEEEEE;
            --gray-300: #E0E0E0;
            --gray-400: #BDBDBD;
            --gray-500: #9E9E9E;
            --gray-600: #757575;
            --gray-700: #616161;
            --gray-800: #424242;
            --gray-900: #212121;
            
            /* Semantic colors */
            --success: #4CAF50;
            --error: #F44336;
            --warning: #FFC107;
            --info: #2196F3;
            
            /* Shadows */
            --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
            --shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06);
            --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
            
            /* Transitions */
            --transition-fast: 150ms cubic-bezier(0.4, 0, 0.2, 1);
            --transition: 200ms cubic-bezier(0.4, 0, 0.2, 1);
            --transition-slow: 300ms cubic-bezier(0.4, 0, 0.2, 1);
            
            /* Border radius */
            --radius-sm: 0.5rem;
            --radius: 0.75rem;
            --radius-md: 1rem;
            --radius-lg: 1.25rem;
            --radius-xl: 1.5rem;
            --radius-full: 9999px;
            
            /* Glass effect */
            --glass-bg: rgba(255, 255, 255, 0.8);
            --glass-bg-dark: rgba(33, 33, 33, 0.8);
            --glass-border: rgba(255, 255, 255, 0.2);
            --glass-border-dark: rgba(255, 255, 255, 0.08);
            --glass-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.1);
            --glass-blur: 8px;
        }

        /* Dark mode variables */
        .dark {
            --primary: #FF7043;
            --primary-light: #FFAB91;
            --primary-dark: #E64A19;
            --accent: #FFA726;
            --accent-light: #FFB74D;
            --accent-dark: #FB8C00;
            
            --text-dark: #F5F5F5;
            --text-medium: #E0E0E0;
            --text-light: #BDBDBD;
            
            --bg-white: #333333;
            --bg-light: #212121;
            --bg-gray: #424242;
            --bg-dark: #121212;
            
            --gray-50: #212121;
            --gray-100: #333333;
            --gray-200: #424242;
            --gray-300: #616161;
            --gray-400: #757575;
            --gray-500: #9E9E9E;
            --gray-600: #BDBDBD;
            --gray-700: #E0E0E0;
            --gray-800: #EEEEEE;
            --gray-900: #F5F5F5;
            
            --glass-bg: rgba(33, 33, 33, 0.8);
            --glass-bg-dark: rgba(18, 18, 18, 0.8);
            --glass-border: rgba(255, 255, 255, 0.08);
            --glass-border-dark: rgba(255, 255, 255, 0.04);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            scroll-behavior: smooth;
        }

        body {
            background: linear-gradient(135deg, var(--bg-light) 0%, var(--gray-100) 100%);
            color: var(--text-dark);
            line-height: 1.5;
            min-height: 100vh;
            overflow-x: hidden;
            background-attachment: fixed;
        }

        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI1MCIgaGVpZ2h0PSI1MCIgdmlld0JveD0iMCAwIDUwIDUwIj48cmVjdCB3aWR0aD0iNTAiIGhlaWdodD0iNTAiIGZpbGw9Im5vbmUiLz48cmVjdCB3aWR0aD0iMSIgaGVpZ2h0PSIxIiBmaWxsPSJyZ2JhKDAsIDAsIDAsIDAuMDIpIi8+PC9zdmc+');
            opacity: 0.5;
            z-index: -1;
            pointer-events: none;
        }

        .dark body {
            background: linear-gradient(135deg, var(--bg-dark) 0%, var(--gray-900) 100%);
        }

        h1, h2, h3 {
            font-family: 'Playfair Display', serif;
        }

        h4, h5, h6 {
            font-family: 'Merriweather', serif;
        }

        p, span, div, input, textarea, select, button {
            font-family: 'Source Sans Pro', sans-serif;
        }

        .brand-text {
            font-family: 'Poppins', sans-serif !important;
            font-weight: 700;
        }

        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }

        ::-webkit-scrollbar-track {
            background: transparent;
        }

        ::-webkit-scrollbar-thumb {
            background: var(--primary-light);
            border-radius: var(--radius-full);
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--primary);
        }

        /* ===== LAYOUT ===== */
        .app-container {
            display: grid;
            grid-template-columns: auto 1fr;
            grid-template-rows: auto 1fr auto;
            grid-template-areas:
                "sidebar header"
                "sidebar main"
                "sidebar footer";
            min-height: 100vh;
        }

        /* ===== SIDEBAR ===== */
        .sidebar {
            grid-area: sidebar;
            width: 280px;
            background: var(--glass-bg);
            backdrop-filter: blur(var(--glass-blur));
            -webkit-backdrop-filter: blur(var(--glass-blur));
            display: flex;
            flex-direction: column;
            position: fixed;
            top: 0;
            left: 0;
            bottom: 0;
            z-index: 100;
            transition: var(--transition);
            overflow-y: auto;
            border-right: 1px solid var(--glass-border);
            box-shadow: var(--glass-shadow);
            border-radius: 0 var(--radius-xl) var(--radius-xl) 0;
        }

        .sidebar-collapsed {
            width: 80px;
        }

        .sidebar-header {
            padding: 1.5rem;
            display: flex;
            align-items: center;
            justify-content: space-between;
            border-bottom: 1px solid var(--glass-border);
            background: linear-gradient(135deg, var(--primary) 0%, var(--accent) 100%);
            color: white;
            border-radius: 0 var(--radius-xl) 0 0;
        }

        .logo-container {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .logo {
            height: 40px;
            width: auto;
            transition: var(--transition);
            filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.2));
        }

        .logo:hover {
            transform: scale(1.05);
        }

        .logo-text {
            font-size: 1.25rem;
            font-weight: 700;
            color: white;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
            white-space: nowrap;
            transition: var(--transition);
        }

        .sidebar-collapsed .logo-text {
            display: none;
        }

        .sidebar-toggle {
            width: 36px;
            height: 36px;
            border-radius: var(--radius-full);
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: rgba(255, 255, 255, 0.2);
            color: white;
            cursor: pointer;
            transition: var(--transition);
            border: none;
        }

        .sidebar-toggle:hover {
            background-color: rgba(255, 255, 255, 0.3);
            transform: rotate(-180deg);
        }

        .sidebar-menu {
            padding: 1.5rem 0;
            flex: 1;
        }

        .menu-section {
            margin-bottom: 1.5rem;
        }

        .menu-title {
            padding: 0 1.5rem;
            font-size: 0.75rem;
            font-weight: 600;
            text-transform: uppercase;
            color: var(--text-light);
            margin-bottom: 0.75rem;
            letter-spacing: 0.05em;
            white-space: nowrap;
            transition: var(--transition);
            font-family: 'Poppins', sans-serif;
        }

        .sidebar-collapsed .menu-title {
            opacity: 0;
            height: 0;
            margin: 0;
            overflow: hidden;
        }

        .menu-item {
            list-style: none;
        }

        .menu-link {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 0.75rem 1.5rem;
            color: var(--text-medium);
            text-decoration: none;
            transition: var(--transition);
            position: relative;
            border-radius: var(--radius-lg);
            margin: 0.25rem 0.75rem;
            font-family: 'Poppins', sans-serif;
        }

        .menu-link:hover {
            background-color: rgba(255, 255, 255, 0.1);
            color: var(--primary);
            transform: translateX(5px);
        }

        .menu-link.active {
            background: linear-gradient(to right, var(--primary-light) 0%, rgba(255, 138, 101, 0.2) 100%);
            color: var(--primary);
            font-weight: 500;
            box-shadow: var(--shadow-sm);
        }

        .menu-icon {
            width: 1.5rem;
            text-align: center;
            font-size: 1.125rem;
            color: var(--text-light);
            transition: var(--transition);
        }

        .menu-link:hover .menu-icon,
        .menu-link.active .menu-icon {
            color: var(--primary);
        }

        .menu-text {
            white-space: nowrap;
            transition: var(--transition);
        }

        .sidebar-collapsed .menu-text {
            display: none;
        }

        .menu-badge {
            margin-left: auto;
            background-color: rgba(255, 255, 255, 0.1);
            color: var(--text-medium);
            font-size: 0.75rem;
            font-weight: 500;
            padding: 0.25rem 0.5rem;
            border-radius: var(--radius-full);
            transition: var(--transition);
        }

        .sidebar-collapsed .menu-badge {
            display: none;
        }

        .menu-link:hover .menu-badge,
        .menu-link.active .menu-badge {
            background-color: var(--primary-light);
            color: white;
        }

        .sidebar-footer {
            padding: 1rem 1.5rem;
            border-top: 1px solid var(--glass-border);
            display: flex;
            align-items: center;
            gap: 1rem;
            background-color: rgba(255, 255, 255, 0.05);
            border-radius: 0 0 var(--radius-xl) 0;
        }

        .user-avatar {
            width: 40px;
            height: 40px;
            border-radius: var(--radius-full);
            background: linear-gradient(135deg, var(--primary) 0%, var(--accent) 100%);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            flex-shrink: 0;
            box-shadow: var(--shadow);
            font-family: 'Poppins', sans-serif;
        }

        .user-info {
            flex: 1;
            min-width: 0;
            transition: var(--transition);
        }

        .sidebar-collapsed .user-info {
            display: none;
        }

        .user-name {
            font-weight: 600;
            color: var(--text-dark);
            font-size: 0.875rem;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            font-family: 'Poppins', sans-serif;
        }

        .user-role {
            font-size: 0.75rem;
            color: var(--text-light);
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            font-family: 'Source Sans Pro', sans-serif;
        }

        /* ===== HEADER ===== */
        .top-header {
            grid-area: header;
            background: var(--glass-bg);
            backdrop-filter: blur(var(--glass-blur));
            -webkit-backdrop-filter: blur(var(--glass-blur));
            padding: 1rem 2rem;
            display: flex;
            align-items: center;
            justify-content: space-between;
            position: sticky;
            top: 0;
            z-index: 50;
            margin-left: 280px;
            transition: var(--transition);
            border-bottom: 1px solid var(--glass-border);
            border-radius: 0 0 0 var(--radius-xl);
            box-shadow: var(--glass-shadow);
        }

        .sidebar-collapsed ~ .top-header {
            margin-left: 80px;
        }

        .page-title {
            font-size: 1.5rem;
            font-weight: 600;
            color: var(--text-dark);
            display: flex;
            align-items: center;
            gap: 0.75rem;
            font-family: 'Playfair Display', serif;
        }

        .page-title i {
            color: var(--primary);
            font-size: 1.25rem;
        }

        .header-actions {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .header-btn {
            width: 40px;
            height: 40px;
            border-radius: var(--radius-full);
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: rgba(255, 255, 255, 0.1);
            color: var(--text-medium);
            cursor: pointer;
            transition: var(--transition);
            border: 1px solid var(--glass-border);
            box-shadow: var(--shadow-sm);
        }

        .header-btn:hover {
            background-color: rgba(255, 255, 255, 0.2);
            color: var(--primary);
            transform: translateY(-2px) scale(1.05);
            box-shadow: var(--shadow-md);
        }

        .theme-toggle {
            width: 40px;
            height: 40px;
            border-radius: var(--radius-full);
            display: flex;
            align-items: center;
            justify-content: center;
            background: linear-gradient(135deg, var(--primary) 0%, var(--accent) 100%);
            color: white;
            cursor: pointer;
            transition: var(--transition);
            border: none;
            box-shadow: var(--shadow);
        }

        .theme-toggle:hover {
            transform: rotate(15deg) scale(1.1);
            box-shadow: var(--shadow-md);
        }

        .search-container {
            position: relative;
            width: 300px;
        }

        .search-input {
            width: 100%;
            padding: 0.75rem 1rem 0.75rem 2.75rem;
            border: 1px solid var(--glass-border);
            border-radius: var(--radius-full);
            font-size: 0.875rem;
            transition: var(--transition);
            background-color: rgba(255, 255, 255, 0.1);
            color: var(--text-dark);
            box-shadow: var(--shadow-sm);
            backdrop-filter: blur(var(--glass-blur));
            -webkit-backdrop-filter: blur(var(--glass-blur));
            font-family: 'Source Sans Pro', sans-serif;
        }

        .search-input:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(230, 81, 0, 0.2);
            background-color: rgba(255, 255, 255, 0.15);
        }

        .search-icon {
            position: absolute;
            left: 1rem;
            top: 50%;
            transform: translateY(-50%);
            color: var(--text-light);
            font-size: 0.875rem;
        }

        /* ===== MAIN CONTENT ===== */
        .main-content {
            grid-area: main;
            padding: 2rem;
            margin-left: 280px;
            transition: var(--transition);
            min-height: calc(100vh - 73px - 41px); /* 100vh - header height - footer height */
        }

        .sidebar-collapsed ~ .main-content {
            margin-left: 80px;
        }

        /* ===== CARDS ===== */
        .card {
            background: var(--glass-bg);
            backdrop-filter: blur(var(--glass-blur));
            -webkit-backdrop-filter: blur(var(--glass-blur));
            border-radius: var(--radius-xl);
            box-shadow: var(--glass-shadow);
            overflow: hidden;
            transition: var(--transition);
            height: 100%;
            border: 1px solid var(--glass-border);
        }

        .card:hover {
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.1);
            transform: translateY(-5px);
        }

        .card-header {
            padding: 1.25rem 1.5rem;
            border-bottom: 1px solid var(--glass-border);
            display: flex;
            align-items: center;
            justify-content: space-between;
            background: linear-gradient(to right, rgba(255, 255, 255, 0.1), transparent);
        }

        .card-title {
            font-size: 1.125rem;
            font-weight: 600;
            color: var(--text-dark);
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-family: 'Playfair Display', serif;
        }

        .card-title i {
            color: var(--primary);
        }

        .card-body {
            padding: 1.5rem;
        }

        .card-footer {
            padding: 1.25rem 1.5rem;
            border-top: 1px solid var(--glass-border);
            display: flex;
            justify-content: flex-end;
            gap: 1rem;
            background-color: rgba(255, 255, 255, 0.05);
        }

        /* ===== TABS ===== */
        .tabs {
            display: flex;
            border-bottom: 1px solid var(--glass-border);
            margin-bottom: 1.5rem;
            overflow-x: auto;
            scrollbar-width: none;
            background-color: rgba(255, 255, 255, 0.05);
            border-radius: var(--radius-xl) var(--radius-xl) 0 0;
            padding: 0 1rem;
        }

        .tabs::-webkit-scrollbar {
            display: none;
        }

        .tab {
            padding: 1rem 1.5rem;
            color: var(--text-medium);
            font-weight: 500;
            position: relative;
            cursor: pointer;
            transition: var(--transition);
            white-space: nowrap;
            border: none;
            background: none;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-family: 'Poppins', sans-serif;
        }

        .tab i {
            font-size: 0.875rem;
        }

        .tab::after {
            content: '';
            position: absolute;
            bottom: -1px;
            left: 0;
            width: 100%;
            height: 3px;
            background: linear-gradient(to right, var(--primary), var(--accent));
            transform: scaleX(0);
            transition: var(--transition);
            border-radius: var(--radius-full);
        }

        .tab:hover {
            color: var(--primary);
        }

        .tab.active {
            color: var(--primary);
        }

        .tab.active::after {
            transform: scaleX(1);
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        /* ===== FORMS ===== */
        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
            color: var(--text-dark);
            font-size: 0.875rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-family: 'Merriweather', serif;
        }

        .form-label i {
            color: var(--primary);
        }

        .form-control {
            width: 100%;
            padding: 0.75rem 1rem;
            border: 1px solid var(--glass-border);
            border-radius: var(--radius-lg);
            font-size: 0.9375rem;
            transition: var(--transition);
            background-color: rgba(255, 255, 255, 0.1);
            color: var(--text-dark);
            box-shadow: var(--shadow-sm);
            backdrop-filter: blur(4px);
            -webkit-backdrop-filter: blur(4px);
            font-family: 'Source Sans Pro', sans-serif;
        }

        .form-control:hover {
            border-color: rgba(255, 255, 255, 0.3);
        }

        .form-control:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(230, 81, 0, 0.2);
            background-color: rgba(255, 255, 255, 0.15);
        }

        select.form-control {
            appearance: none;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='%236B7280' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: right 12px center;
            padding-right: 2.5rem;
        }

        .form-hint {
            display: block;
            margin-top: 0.5rem;
            font-size: 0.75rem;
            color: var(--text-light);
            font-family: 'Source Sans Pro', sans-serif;
        }

        /* ===== SILAK-SALITAAN SPECIFIC STYLES ===== */
        .silak-fields {
            display: none;
            background: rgba(255, 255, 255, 0.1);
            border-radius: var(--radius-lg);
            padding: 1.25rem;
            border: 1px solid var(--glass-border);
            margin-bottom: 1.5rem;
            box-shadow: var(--shadow-sm);
            backdrop-filter: blur(4px);
            -webkit-backdrop-filter: blur(4px);
        }

        .silak-fields.active {
            display: block;
        }

        .parts-of-speech {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 0.75rem;
            margin-bottom: 1rem;
        }

        .part-of-speech-option {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            cursor: pointer;
            padding: 0.75rem;
            border-radius: var(--radius-lg);
            transition: var(--transition);
            background-color: rgba(255, 255, 255, 0.1);
            border: 1px solid var(--glass-border);
            box-shadow: var(--shadow-sm);
            font-family: 'Source Sans Pro', sans-serif;
        }

        .part-of-speech-option:hover {
            background-color: rgba(255, 255, 255, 0.2);
            transform: translateY(-2px);
            box-shadow: var(--shadow);
        }

        .part-of-speech-option input {
            cursor: pointer;
            accent-color: var(--primary);
            width: 16px;
            height: 16px;
        }

        /* ===== BUTTONS ===== */
        .btn {
            padding: 0.75rem 1.25rem;
            background: linear-gradient(135deg, var(--primary) 0%, var(--accent) 100%);
            color: white;
            border: none;
            border-radius: var(--radius-lg);
            cursor: pointer;
            font-size: 0.875rem;
            font-weight: 500;
            transition: var(--transition);
            display: inline-flex;
            align-items: center;
            gap: 0.625rem;
            position: relative;
            overflow: hidden;
            box-shadow: var(--shadow);
            font-family: 'Poppins', sans-serif;
        }

        .btn::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(to right, transparent, rgba(255, 255, 255, 0.2), transparent);
            transform: translateX(-100%);
            transition: transform 0.6s ease;
        }

        .btn:hover {
            transform: translateY(-3px) scale(1.02);
            box-shadow: var(--shadow-lg);
        }

        .btn:hover::after {
            transform: translateX(100%);
        }

        .btn:active {
            transform: translateY(0);
        }

        .btn:disabled {
            opacity: 0.7;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .btn-secondary {
            background: rgba(255, 255, 255, 0.1);
            color: var(--text-medium);
            border: 1px solid var(--glass-border);
            box-shadow: var(--shadow-sm);
            backdrop-filter: blur(4px);
            -webkit-backdrop-filter: blur(4px);
        }

        .btn-secondary:hover {
            background: rgba(255, 255, 255, 0.2);
            color: var(--text-dark);
            box-shadow: var(--shadow);
        }

        .btn-danger {
            background: linear-gradient(135deg, var(--error) 0%, #DC2626 100%);
            box-shadow: 0 2px 5px rgba(239, 68, 68, 0.2);
        }

        .btn-danger:hover {
            box-shadow: 0 4px 12px rgba(239, 68, 68, 0.3);
        }

        .btn-success {
            background: linear-gradient(135deg, var(--success) 0%, #059669 100%);
            box-shadow: 0 2px 5px rgba(16, 185, 129, 0.2);
        }

        .btn-success:hover {
            box-shadow: 0 4px 12px rgba(16, 185, 129, 0.3);
        }

        .btn-sm {
            padding: 0.5rem 0.875rem;
            font-size: 0.75rem;
        }

        .btn-lg {
            padding: 0.875rem 1.5rem;
            font-size: 1rem;
        }

        .btn-icon {
            width: 40px;
            height: 40px;
            padding: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: var(--radius-full);
            background-color: rgba(255, 255, 255, 0.1);
            color: var(--text-medium);
            border: 1px solid var(--glass-border);
            cursor: pointer;
            transition: var(--transition);
            font-size: 0.875rem;
        }

        .btn-icon-sm {
            width: 32px;
            height: 32px;
            font-size: 0.875rem;
        }

        .fab {
            position: fixed;
            bottom: 2rem;
            right: 2rem;
            width: 56px;
            height: 56px;
            border-radius: var(--radius-full);
            background: linear-gradient(135deg, var(--primary) 0%, var(--accent) 100%);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: var(--shadow-xl);
            cursor: pointer;
            transition: var(--transition);
            z-index: 100;
            border: none;
            font-size: 1.25rem;
        }

        .fab:hover {
            transform: scale(1.1) rotate(5deg);
            box-shadow: 0 8px 25px rgba(230, 81, 0, 0.4);
        }

        /* ===== POSTS GRID ===== */
        .posts-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 1.5rem;
        }

        .post-card {
            background: var(--glass-bg);
            backdrop-filter: blur(var(--glass-blur));
            -webkit-backdrop-filter: blur(var(--glass-blur));
            border-radius: var(--radius-xl);
            box-shadow: var(--glass-shadow);
            overflow: hidden;
            transition: var(--transition);
            height: 100%;
            display: flex;
            flex-direction: column;
            position: relative;
            border: 1px solid var(--glass-border);
        }

        .post-card:hover {
            transform: translateY(-5px) scale(1.02);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.1);
        }

        .post-image {
            width: 100%;
            height: 180px;
            object-fit: cover;
            transition: var(--transition);
        }

        .post-card:hover .post-image {
            transform: scale(1.05);
        }

        .post-content {
            padding: 1.25rem;
            flex: 1;
            display: flex;
            flex-direction: column;
        }

        .post-category {
            display: inline-flex;
            align-items: center;
            padding: 0.375rem 0.75rem;
            border-radius: var(--radius-full);
            font-size: 0.75rem;
            font-weight: 500;
            margin-bottom: 0.75rem;
            gap: 0.375rem;
            transition: var(--transition);
            font-family: 'Poppins', sans-serif;
        }

        .badge-article {
            background-color: rgba(230, 81, 0, 0.1);
            color: var(--primary);
        }

        .badge-literary {
            background-color: rgba(255, 152, 0, 0.1);
            color: var(--accent);
        }

        .badge-feature {
            background-color: rgba(33, 150, 243, 0.1);
            color: var(--info);
        }

        .badge-silak {
            background-color: rgba(139, 92, 246, 0.1);
            color: #8B5CF6;
        }

        .badge-photostory {
            background-color: rgba(76, 175, 80, 0.1);
            color: var(--success);
        }

        .post-title {
            font-size: 1.125rem;
            font-weight: 600;
            color: var(--text-dark);
            margin-bottom: 0.75rem;
            line-height: 1.4;
            transition: var(--transition);
            font-family: 'Playfair Display', serif;
        }

        .post-card:hover .post-title {
            color: var(--primary);
        }

        .post-meta {
            display: flex;
            flex-wrap: wrap;
            gap: 1rem;
            margin-bottom: 1rem;
            font-size: 0.75rem;
            color: var(--text-light);
            font-family: 'Source Sans Pro', sans-serif;
        }

        .post-meta-item {
            display: flex;
            align-items: center;
            gap: 0.375rem;
        }

        .post-meta-item i {
            color: var(--primary);
        }

        .post-actions {
            margin-top: auto;
            display: flex;
            gap: 0.5rem;
            padding-top: 1rem;
            border-top: 1px solid var(--glass-border);
        }

        /* ===== TABLE ===== */
        .table-container {
            overflow-x: auto;
            border-radius: var(--radius-xl);
            border: 1px solid var(--glass-border);
            background: var(--glass-bg);
            backdrop-filter: blur(var(--glass-blur));
            -webkit-backdrop-filter: blur(var(--glass-blur));
            box-shadow: var(--glass-shadow);
        }

        .table {
            width: 100%;
            border-collapse: collapse;
            background-color: transparent;
        }

        .table th,
        .table td {
            padding: 0.875rem 1.125rem;
            text-align: left;
            font-size: 0.875rem;
        }

        .table th {
            background: rgba(255, 255, 255, 0.1);
            color: var(--text-dark);
            font-weight: 600;
            white-space: nowrap;
            border-bottom: 1px solid var(--glass-border);
            position: sticky;
            top: 0;
            z-index: 1;
            font-family: 'Merriweather', serif;
        }

        .table th i {
            color: var(--primary);
            margin-right: 0.375rem;
        }

        .table tr {
            transition: var(--transition);
        }

        .table tr:nth-child(even) {
            background-color: rgba(255, 255, 255, 0.05);
        }

        .table tr:hover {
            background-color: rgba(255, 255, 255, 0.1);
        }

        .table td {
            border-bottom: 1px solid var(--glass-border);
            color: var(--text-medium);
            font-family: 'Source Sans Pro', sans-serif;
        }

        .table tr:last-child td {
            border-bottom: none;
        }

        .action-buttons {
            display: flex;
            gap: 0.5rem;
        }

        .action-btn {
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: var(--radius-full);
            background-color: rgba(255, 255, 255, 0.1);
            color: var(--text-medium);
            border: 1px solid var(--glass-border);
            cursor: pointer;
            transition: var(--transition);
            font-size: 0.875rem;
        }

        .action-btn:hover {
            transform: translateY(-3px) scale(1.1);
            box-shadow: var(--shadow);
        }

        .action-btn-edit {
            color: var(--info);
            border-color: rgba(33, 150, 243, 0.3);
        }

        .action-btn-edit:hover {
            background-color: rgba(33, 150, 243, 0.1);
        }

        .action-btn-delete {
            color: var(--error);
            border-color: rgba(244, 67, 54, 0.3);
        }

        .action-btn-delete:hover {
            background-color: rgba(244, 67, 54, 0.1);
        }

        .action-btn-view {
            color: var(--success);
            border-color: rgba(76, 175, 80, 0.3);
        }

        .action-btn-view:hover {
            background-color: rgba(76, 175, 80, 0.1);
        }

        /* ===== ALERTS ===== */
        .alert {
            padding: 1rem 1.25rem;
            border-radius: var(--radius-lg);
            margin-bottom: 1.5rem;
            display: none;
            align-items: center;
            gap: 0.875rem;
            font-size: 0.875rem;
            opacity: 0;
            transform: translateY(-5px);
            transition: var(--transition);
            position: relative;
            box-shadow: var(--shadow);
            backdrop-filter: blur(var(--glass-blur));
            -webkit-backdrop-filter: blur(var(--glass-blur));
            font-family: 'Source Sans Pro', sans-serif;
        }

        .alert-success {
            background-color: rgba(76, 175, 80, 0.1);
            border: 1px solid rgba(76, 175, 80, 0.2);
            color: var(--success);
        }

        .alert-error {
            background-color: rgba(244, 67, 54, 0.1);
            border: 1px solid rgba(244, 67, 54, 0.2);
            color: var(--error);
        }

        .alert-close {
            margin-left: auto;
            background: none;
            border: none;
            cursor: pointer;
            color: inherit;
            font-size: 1rem;
            transition: var(--transition);
            width: 28px;
            height: 28px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: var(--radius-full);
        }

        .alert-close:hover {
            background-color: rgba(0, 0, 0, 0.05);
            transform: rotate(90deg);
        }

        /* ===== LOADING STATES ===== */
        .spinner {
            display: inline-block;
            width: 18px;
            height: 18px;
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top-color: white;
            animation: spin 1s ease-in-out infinite;
            display: none;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .loading-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 3rem;
            text-align: center;
        }

        .loading-spinner {
            width: 48px;
            height: 48px;
            border: 3px solid rgba(230, 81, 0, 0.1);
            border-radius: 50%;
            border-top-color: var(--primary);
            animation: spin 1s ease-in-out infinite;
            margin-bottom: 1.25rem;
        }

        .loading-text {
            color: var(--text-light);
            font-weight: 500;
            font-size: 1rem;
            font-family: 'Poppins', sans-serif;
        }

        /* ===== EMPTY STATES ===== */
        .empty-state {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 3rem;
            text-align: center;
            color: var(--text-light);
        }

        .empty-icon {
            font-size: 3rem;
            margin-bottom: 1.25rem;
            color: var(--gray-400);
            animation: float 3s ease-in-out infinite;
        }

        @keyframes float {
            0% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
            100% { transform: translateY(0px); }
        }

        .empty-text {
            font-weight: 500;
            margin-bottom: 1.25rem;
            font-size: 1.125rem;
            font-family: 'Merriweather', serif;
        }

        /* ===== MODALS ===== */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0, 0, 0, 0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            display: none;
            backdrop-filter: blur(5px);
            opacity: 0;
            transition: opacity var(--transition);
        }

        .modal-overlay.active {
            opacity: 1;
        }

        .modal {
            background: var(--glass-bg);
            backdrop-filter: blur(var(--glass-blur));
            -webkit-backdrop-filter: blur(var(--glass-blur));
            border-radius: var(--radius-2xl);
            box-shadow: var(--glass-shadow);
            width: 90%;
            max-width: 700px;
            max-height: 90vh;
            overflow-y: auto;
            animation: modalFadeIn 0.3s ease-out;
            transform: scale(0.95);
            transition: transform var(--transition);
            border: 1px solid var(--glass-border);
        }

        .modal-overlay.active .modal {
            transform: scale(1);
        }

        @keyframes modalFadeIn {
            from { opacity: 0; transform: scale(0.9); }
            to { opacity: 1; transform: scale(1); }
        }

        .modal-header {
            padding: 1.25rem 1.5rem;
            border-bottom: 1px solid var(--glass-border);
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky;
            top: 0;
            background: var(--glass-bg);
            backdrop-filter: blur(var(--glass-blur));
            -webkit-backdrop-filter: blur(var(--glass-blur));
            z-index: 1;
            border-top-left-radius: var(--radius-2xl);
            border-top-right-radius: var(--radius-2xl);
        }

        .modal-title {
            font-size: 1.25rem;
            font-weight: 600;
            color: var(--text-dark);
            display: flex;
            align-items: center;
            gap: 0.75rem;
            font-family: 'Playfair Display', serif;
        }

        .modal-title i {
            color: var(--primary);
        }

        .modal-close {
            background: none;
            border: none;
            font-size: 1.25rem;
            cursor: pointer;
            color: var(--text-light);
            transition: var(--transition);
            width: 36px;
            height: 36px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: var(--radius-full);
        }

        .modal-close:hover {
            color: var(--text-dark);
            background-color: rgba(255, 255, 255, 0.1);
            transform: rotate(90deg);
        }

        .modal-body {
            padding: 1.5rem;
        }

        .modal-footer {
            padding: 1.25rem 1.5rem;
            border-top: 1px solid var(--glass-border);
            display: flex;
            justify-content: flex-end;
            gap: 0.75rem;
            position: sticky;
            bottom: 0;
            background: var(--glass-bg);
            backdrop-filter: blur(var(--glass-blur));
            -webkit-backdrop-filter: blur(var(--glass-blur));
            z-index: 1;
            border-bottom-left-radius: var(--radius-2xl);
            border-bottom-right-radius: var(--radius-2xl);
        }

        /* ===== TOOLTIPS ===== */
        .tooltip {
            position: relative;
        }

        .tooltip:hover::after {
            content: attr(data-tooltip);
            position: absolute;
            bottom: 125%;
            left: 50%;
            transform: translateX(-50%);
            background-color: var(--glass-bg-dark);
            color: white;
            padding: 0.5rem 0.75rem;
            border-radius: var(--radius);
            font-size: 0.75rem;
            white-space: nowrap;
            z-index: 10;
            margin-bottom: 5px;
            box-shadow: var(--shadow);
            backdrop-filter: blur(var(--glass-blur));
            -webkit-backdrop-filter: blur(var(--glass-blur));
            border: 1px solid var(--glass-border-dark);
            opacity: 0;
            animation: tooltipFadeIn 0.2s ease forwards;
            font-family: 'Source Sans Pro', sans-serif;
        }

        .tooltip:hover::before {
            content: '';
            position: absolute;
            bottom: 125%;
            left: 50%;
            transform: translateX(-50%);
            border: 6px solid transparent;
            border-top-color: var(--glass-bg-dark);
            margin-bottom: -6px;
            opacity: 0;
            animation: tooltipFadeIn 0.2s ease forwards;
        }

        @keyframes tooltipFadeIn {
            to { opacity: 1; }
        }

        /* ===== ANIMATIONS ===== */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* ===== TINYMCE CUSTOMIZATION ===== */
        .tox-tinymce {
            border-radius: var(--radius-lg) !important;
            border: 1px solid var(--glass-border) !important;
            overflow: hidden;
            box-shadow: var(--glass-shadow) !important;
            background: var(--glass-bg) !important;
        }

        .tox .tox-statusbar {
            border-top: 1px solid var(--glass-border) !important;
        }

        .tox .tox-toolbar, .tox .tox-toolbar__overflow, .tox .tox-toolbar__primary {
            background: var(--glass-bg) !important;
            backdrop-filter: blur(var(--glass-blur)) !important;
            -webkit-backdrop-filter: blur(var(--glass-blur)) !important;
        }

        .tox .tox-tbtn {
            border-radius: var(--radius) !important;
        }

        .tox .tox-tbtn:hover {
            background-color: rgba(255, 255, 255, 0.1) !important;
        }

        /* ===== STATUS BAR ===== */
        .status-bar {
            grid-area: footer;
            background: var(--glass-bg);
            backdrop-filter: blur(var(--glass-blur));
            -webkit-backdrop-filter: blur(var(--glass-blur));
            border-top: 1px solid var(--glass-border);
            padding: 0.75rem 2rem;
            display: flex;
            align-items: center;
            font-size: 0.75rem;
            color: var(--text-light);
            margin-left: 280px;
            transition: var(--transition);
            border-radius: var(--radius-xl) 0 0 0;
            box-shadow: var(--glass-shadow);
            font-family: 'Source Sans Pro', sans-serif;
        }

        .sidebar-collapsed ~ .status-bar {
            margin-left: 80px;
        }

        .status-item {
            margin-right: 1.5rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .status-item i {
            color: var(--primary);
        }

        .status-right {
            margin-left: auto;
            display: flex;
            gap: 1.5rem;
            align-items: center;
        }

        /* ===== AI ASSISTANT STYLES ===== */
        .ai-button {
            width: 40px;
            height: 40px;
            border-radius: var(--radius-full);
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: rgba(255, 255, 255, 0.1);
            cursor: pointer;
            transition: var(--transition);
            border: 1px solid var(--glass-border);
            box-shadow: var(--shadow-sm);
            overflow: hidden;
        }

        .ai-button img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: var(--transition);
        }

        .ai-button:hover {
            transform: translateY(-2px) scale(1.05);
            box-shadow: var(--shadow-md);
        }

        .ai-assistant-container {
            position: fixed;
            top: 0;
            right: -400px;
            width: 380px;
            height: 100vh;
            background: var(--glass-bg);
            backdrop-filter: blur(var(--glass-blur));
            -webkit-backdrop-filter: blur(var(--glass-blur));
            border-left: 1px solid var(--glass-border);
            box-shadow: var(--glass-shadow);
            z-index: 200;
            transition: right 0.3s ease-in-out;
            display: flex;
            flex-direction: column;
        }

        .ai-assistant-container.active {
            right: 0;
        }

        .ai-assistant-header {
            padding: 1rem;
            border-bottom: 1px solid var(--glass-border);
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .ai-assistant-title {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            font-weight: 600;
            color: var(--text-dark);
            font-family: 'Poppins', sans-serif;
        }

        .ai-assistant-avatar {
            width: 40px;
            height: 40px;
            border-radius: var(--radius-full);
            overflow: hidden;
        }

        .ai-assistant-avatar img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .ai-assistant-close {
            background: none;
            border: none;
            font-size: 1.25rem;
            cursor: pointer;
            color: var(--text-light);
            transition: var(--transition);
            width: 36px;
            height: 36px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: var(--radius-full);
        }

        .ai-assistant-close:hover {
            color: var(--text-dark);
            background-color: rgba(255, 255, 255, 0.1);
            transform: rotate(90deg);
        }

        .ai-assistant-body {
            flex: 1;
            overflow-y: auto;
            padding: 1rem;
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .ai-message {
            display: flex;
            gap: 0.75rem;
            max-width: 85%;
        }

        .ai-message.user {
            align-self: flex-end;
            flex-direction: row-reverse;
        }

        .ai-message-avatar {
            width: 32px;
            height: 32px;
            border-radius: var(--radius-full);
            overflow: hidden;
            flex-shrink: 0;
        }

        .ai-message-avatar img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .ai-message-content {
            background-color: rgba(255, 255, 255, 0.1);
            padding: 0.75rem 1rem;
            border-radius: var(--radius-lg);
            color: var(--text-dark);
            font-size: 0.875rem;
            box-shadow: var(--shadow-sm);
            border: 1px solid var(--glass-border);
            font-family: 'Source Sans Pro', sans-serif;
        }

        .ai-message.user .ai-message-content {
            background: linear-gradient(135deg, var(--primary-light) 0%, var(--accent-light) 100%);
            color: white;
            border: none;
        }

        .ai-assistant-footer {
            padding: 1rem;
            border-top: 1px solid var(--glass-border);
        }

        .ai-input-container {
            position: relative;
        }

        .ai-input {
            width: 100%;
            padding: 0.75rem 3rem 0.75rem 1rem;
            border: 1px solid var(--glass-border);
            border-radius: var(--radius-full);
            font-size: 0.875rem;
            transition: var(--transition);
            background-color: rgba(255, 255, 255, 0.1);
            color: var(--text-dark);
            box-shadow: var(--shadow-sm);
            font-family: 'Source Sans Pro', sans-serif;
        }

        .ai-input:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(230, 81, 0, 0.2);
        }

        .ai-send-btn {
            position: absolute;
            right: 0.5rem;
            top: 50%;
            transform: translateY(-50%);
            width: 32px;
            height: 32px;
            border-radius: var(--radius-full);
            display: flex;
            align-items: center;
            justify-content: center;
            background: linear-gradient(135deg, var(--primary) 0%, var(--accent) 100%);
            color: white;
            cursor: pointer;
            transition: var(--transition);
            border: none;
            box-shadow: var(--shadow-sm);
        }

        .ai-send-btn:hover {
            transform: translateY(-50%) scale(1.05);
            box-shadow: var(--shadow-md);
        }

        .editor-with-ai {
            display: flex;
            gap: 1.5rem;
            position: relative;
        }

        .editor-container {
            flex: 1;
        }

        .ai-sidebar {
            width: 380px;
            background: var(--glass-bg);
            backdrop-filter: blur(var(--glass-blur));
            -webkit-backdrop-filter: blur(var(--glass-blur));
            border-radius: var(--radius-xl);
            border: 1px solid var(--glass-border);
            box-shadow: var(--glass-shadow);
            display: flex;
            flex-direction: column;
            height: 500px;
            overflow: hidden;
        }

        /* ===== IMAGE UPLOAD MODAL ===== */
        .image-upload-modal .modal {
            max-width: 600px;
        }

        .image-upload-modal .modal-body {
            padding: 2rem;
        }

        .image-upload-area {
            border: 2px dashed var(--glass-border);
            border-radius: var(--radius-lg);
            padding: 2rem;
            text-align: center;
            transition: var(--transition);
            background: linear-gradient(135deg, var(--primary-light) 0%, var(--accent-light) 100%);
            cursor: pointer;
            color: white;
        }

        .image-upload-area:hover {
            border-color: white;
            transform: translateY(-5px);
            box-shadow: var(--shadow-lg);
        }

        .image-upload-icon {
            font-size: 3rem;
            color: white;
            margin-bottom: 1rem;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        }

        .image-upload-text {
            font-size: 1rem;
            color: white;
            margin-bottom: 0.5rem;
            font-weight: 500;
            font-family: 'Poppins', sans-serif;
        }

        .image-upload-hint {
            font-size: 0.75rem;
            color: rgba(255, 255, 255, 0.8);
            font-family: 'Source Sans Pro', sans-serif;
        }

        /* Coral popup notification */
        .coral-popup {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: linear-gradient(135deg, var(--primary) 0%, var(--accent) 100%);
            color: white;
            padding: 1rem 1.5rem;
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-lg);
            z-index: 1000;
            display: flex;
            align-items: center;
            gap: 1rem;
            transform: translateY(100px);
            opacity: 0;
            transition: all 0.3s ease-out;
        }

        .coral-popup.active {
            transform: translateY(0);
            opacity: 1;
        }

        .coral-popup-avatar {
            width: 40px;
            height: 40px;
            border-radius: var(--radius-full);
            overflow: hidden;
        }

        .coral-popup-avatar img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .coral-popup-content {
            flex: 1;
            font-family: 'Poppins', sans-serif;
        }

        .coral-popup-title {
            font-weight: 600;
            margin-bottom: 0.25rem;
        }

        .coral-popup-close {
            background: none;
            border: none;
            color: white;
            font-size: 1.25rem;
            cursor: pointer;
            width: 28px;
            height: 28px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: var(--radius-full);
            transition: var(--transition);
        }

        .coral-popup-close:hover {
            background-color: rgba(255, 255, 255, 0.2);
            transform: rotate(90deg);
        }

        /* AI Fullscreen Modal */
        .ai-fullscreen-modal .modal {
            max-width: 900px;
            height: 80vh;
            display: flex;
            flex-direction: column;
        }

        .ai-fullscreen-modal .modal-body {
            flex: 1;
            padding: 0;
            display: flex;
            flex-direction: column;
        }

        .ai-fullscreen-body {
            flex: 1;
            overflow-y: auto;
            padding: 1.5rem;
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .ai-fullscreen-footer {
            padding: 1rem 1.5rem;
            border-top: 1px solid var(--glass-border);
        }

        /* ===== RESPONSIVE STYLES ===== */
        @media (max-width: 1200px) {
            .editor-with-ai {
                flex-direction: column;
            }
            
            .ai-sidebar {
                width: 100%;
                height: 300px;
                margin-top: 1rem;
            }
            
            .ai-assistant-container {
                width: 100%;
                height: 50vh;
                right: 0;
                bottom: -50vh;
                top: auto;
                border-left: none;
                border-top: 1px solid var(--glass-border);
            }
            
            .ai-assistant-container.active {
                bottom: 0;
                right: 0;
            }
        }

        @media (max-width: 992px) {
            .sidebar {
                width: 80px;
            }
            
            .sidebar .logo-text,
            .sidebar .menu-text,
            .sidebar .menu-badge,
            .sidebar .menu-title,
            .sidebar .user-info {
                display: none;
            }
            
            .top-header,
            .main-content,
            .status-bar {
                margin-left: 80px;
            }
            
            .search-container {
                width: 200px;
            }
        }

        @media (max-width: 768px) {
            .app-container {
                grid-template-areas:
                    "header header"
                    "main main"
                    "footer footer";
            }
            
            .sidebar {
                transform: translateX(-100%);
                z-index: 1000;
            }
            
            .sidebar.active {
                transform: translateX(0);
                width: 280px;
            }
            
            .sidebar.active .logo-text,
            .sidebar.active .menu-text,
            .sidebar.active .menu-badge,
            .sidebar.active .menu-title,
            .sidebar.active .user-info {
                display: block;
            }
            
            .top-header,
            .main-content,
            .status-bar {
                margin-left: 0;
            }
            
            .top-header {
                padding: 1rem;
            }
            
            .main-content {
                padding: 1rem;
            }
            
            .search-container {
                display: none;
            }
            
            .mobile-menu-toggle {
                display: block;
            }
            
            .page-title {
                font-size: 1.25rem;
            }
        }

        @media (max-width: 576px) {
            .modal-footer {
                flex-direction: column;
            }
            
            .modal-footer .btn {
                width: 100%;
            }
            
            .form-group {
                margin-bottom: 1rem;
            }
            
            .card-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 0.75rem;
            }
            
            .card-header > div {
                width: 100%;
                display: flex;
                gap: 0.5rem;
            }
            
            .card-header .btn {
                flex: 1;
            }
        }
    </style>
</head>
<body>
    <div class="app-container">
        <!-- Sidebar -->
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <div class="logo-container">
                    <img src="SILAKBO (1).png" alt="Silakbo Logo" class="logo">
                    <span class="logo-text brand-text">ANG SILAKBO</span>
                </div>
                <button class="sidebar-toggle" id="sidebarToggle">
                    <i class="fas fa-chevron-left"></i>
                </button>
            </div>
            <div class="sidebar-menu">
                <div class="menu-section">
                    <h3 class="menu-title">Main</h3>
                    <ul>
                        <li class="menu-item">
                            <a href="#" class="menu-link active" id="navCreate">
                                <i class="fas fa-plus-circle menu-icon"></i>
                                <span class="menu-text">Create New Post</span>
                            </a>
                        </li>
                        <li class="menu-item">
                            <a href="#" class="menu-link" id="navManage">
                                <i class="fas fa-list menu-icon"></i>
                                <span class="menu-text">Published Works</span>
                                <span class="menu-badge">All</span>
                            </a>
                        </li>
                    </ul>
                </div>
                <div class="menu-section">
                    <h3 class="menu-title">Categories</h3>
                    <ul>
                        <li class="menu-item">
                            <a href="#" class="menu-link" id="navArticles">
                                <i class="fas fa-newspaper menu-icon"></i>
                                <span class="menu-text">Articles</span>
                            </a>
                        </li>
                        <li class="menu-item">
                            <a href="#" class="menu-link" id="navLiterary">
                                <i class="fas fa-book menu-icon"></i>
                                <span class="menu-text">Literary Works</span>
                            </a>
                        </li>
                        <li class="menu-item">
                            <a href="#" class="menu-link" id="navFeature">
                                <i class="fas fa-star menu-icon"></i>
                                <span class="menu-text">Feature</span>
                            </a>
                        </li>
                        <li class="menu-item">
                            <a href="#" class="menu-link" id="navSilak">
                                <i class="fas fa-language menu-icon"></i>
                                <span class="menu-text">Silak-salitaan</span>
                            </a>
                        </li>
                        <li class="menu-item">
                            <a href="#" class="menu-link" id="navPhotostory">
                                <i class="fas fa-camera menu-icon"></i>
                                <span class="menu-text">Photostory</span>
                            </a>
                        </li>
                    </ul>
                </div>
                <div class="menu-section">
                    <h3 class="menu-title">Tools</h3>
                    <ul>
                        <li class="menu-item">
                            <a href="#" class="menu-link" id="helpBtn">
                                <i class="fas fa-question-circle menu-icon"></i>
                                <span class="menu-text">Help Center</span>
                            </a>
                        </li>
                        <li class="menu-item">
                            <a href="#" class="menu-link">
                                <i class="fas fa-cog menu-icon"></i>
                                <span class="menu-text">Settings</span>
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
            <div class="sidebar-footer">
                <div class="user-avatar">A</div>
                <div class="user-info">
                    <div class="user-name">Admin</div>
                    <div class="user-role">Administrator</div>
                </div>
            </div>
        </aside>

        <!-- Header -->
        <header class="top-header">
            <h1 class="page-title" id="pageTitle"><i class="fas fa-pen-fancy"></i> Create New Post</h1>
            <div class="header-actions">
                <div class="search-container">
                    <i class="fas fa-search search-icon"></i>
                    <input type="text" class="search-input" placeholder="Search...">
                </div>
                <button class="ai-button" id="aiButton">
                    <img src="Coral.png" alt="Coral AI">
                </button>
                <button class="header-btn" id="createNewBtn">
                    <i class="fas fa-plus"></i>
                </button>
                <button class="theme-toggle" id="themeToggle">
                    <i class="fas fa-moon"></i>
                </button>
            </div>
        </header>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Alerts -->
            <div id="alertSuccess" class="alert alert-success">
                <i class="fas fa-check-circle"></i> 
                <span>Operation completed successfully!</span>
                <button class="alert-close">&times;</button>
            </div>
            <div id="alertError" class="alert alert-error">
                <i class="fas fa-exclamation-circle"></i> 
                <span id="errorMessage">An error occurred.</span>
                <button class="alert-close">&times;</button>
            </div>
            
            <!-- Create Tab Content -->
            <div id="createTab" class="tab-content active">
                <div class="card">
                    <div class="card-header">
                        <h2 class="card-title">
                            <i class="fas fa-pen-fancy"></i> Create a New Post
                        </h2>
                        <button class="btn btn-secondary" id="uploadImageBtn">
                            <i class="fas fa-image"></i> Upload Image
                        </button>
                    </div>
                    <div class="card-body">
                        <form id="postForm">
                            <div class="form-group">
                                <label class="form-label" for="category">
                                    <i class="fas fa-tag"></i> Category:
                                </label>
                                <select id="category" class="form-control" required>
                                    <option value="article">Article</option>
                                    <option value="literary">Literary</option>
                                    <option value="feature">Feature</option>
                                    <option value="silak">Silak-salitaan</option>
                                    <option value="photostory">Photostory</option>
                                </select>
                                <span class="form-hint">Select the type of content you're creating. Each category has specific formatting and requirements.</span>
                            </div>

                            <div class="form-group">
                                <label class="form-label" for="title">
                                    <i class="fas fa-heading"></i> Title:
                                </label>
                                <input type="text" id="title" class="form-control" required placeholder="Enter post title">
                                <span class="form-hint">Create a compelling title that captures the essence of your content (50-70 characters recommended).</span>
                            </div>

                            <div class="form-group">
                                <label class="form-label" for="author">
                                    <i class="fas fa-user-edit"></i> Author:
                                </label>
                                <input type="text" id="author" class="form-control" required placeholder="Enter author's name">
                            </div>

                            <div class="form-group" id="additionalFields">
                                <label class="form-label" id="roleLabel" for="additionalField">
                                    <i class="fas fa-camera"></i> Photojournalist:
                                </label>
                                <input type="text" id="additionalField" class="form-control" placeholder="Enter photojournalist's name">
                                <span class="form-hint">Credit the visual contributor appropriately based on the content type.</span>
                            </div>

                            <!-- Silak-salitaan specific fields -->
                            <div class="silak-fields" id="silakFields">
                                <div class="form-group">
                                    <label class="form-label">
                                        <i class="fas fa-language"></i> Part of Speech:
                                    </label>
                                    <div class="parts-of-speech">
                                        <label class="part-of-speech-option">
                                            <input type="radio" name="partOfSpeech" value="noun" checked> Noun
                                        </label>
                                        <label class="part-of-speech-option">
                                            <input type="radio" name="partOfSpeech" value="verb"> Verb
                                        </label>
                                        <label class="part-of-speech-option">
                                            <input type="radio" name="partOfSpeech" value="adjective"> Adjective
                                        </label>
                                        <label class="part-of-speech-option">
                                            <input type="radio" name="partOfSpeech" value="adverb"> Adverb
                                        </label>
                                        <label class="part-of-speech-option">
                                            <input type="radio" name="partOfSpeech" value="pronoun"> Pronoun
                                        </label>
                                        <label class="part-of-speech-option">
                                            <input type="radio" name="partOfSpeech" value="preposition"> Preposition
                                        </label>
                                        <label class="part-of-speech-option">
                                            <input type="radio" name="partOfSpeech" value="conjunction"> Conjunction
                                        </label>
                                        <label class="part-of-speech-option">
                                            <input type="radio" name="partOfSpeech" value="interjection"> Interjection
                                        </label>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="form-label" for="meaning">
                                        <i class="fas fa-book-open"></i> Meaning:
                                    </label>
                                    <textarea id="meaning" class="form-control" rows="4" placeholder="Enter the meaning of the word"></textarea>
                                    <span class="form-hint">Provide a clear, comprehensive definition that captures all nuances of the word.</span>
                                </div>
                                <div class="form-group">
                                    <label class="form-label" for="example">
                                        <i class="fas fa-quote-right"></i> Example Usage:
                                    </label>
                                    <textarea id="example" class="form-control" rows="3" placeholder="Enter an example sentence using this word"></textarea>
                                    <span class="form-hint">Include a contextual example that demonstrates proper usage of the word.</span>
                                </div>
                            </div>

                            <div class="form-group" id="contentContainer">
                                <label class="form-label" for="content">
                                    <i class="fas fa-paragraph"></i> Content:
                                </label>
                                <div class="editor-with-ai">
                                    <div class="editor-container">
                                        <textarea id="content" class="form-control"></textarea>
                                    </div>
                                </div>
                                <span class="form-hint">Write your content using the rich text editor. Use headings, lists, and formatting to improve readability.</span>
                            </div>
                        </form>
                    </div>
                    <div class="card-footer">
                        <button type="button" class="btn btn-secondary" id="resetBtn">
                            <i class="fas fa-undo"></i> Reset
                        </button>
                        <button type="button" class="btn" id="saveBtn">
                            <span class="spinner" id="submitSpinner"></span>
                            <i class="fas fa-save"></i> Save Draft
                        </button>
                        <button type="button" class="btn btn-success" id="publishBtn">
                            <i class="fas fa-paper-plane"></i> Publish Post
                        </button>
                    </div>
                </div>
            </div>
            
            <!-- Manage Tab Content -->
            <div id="manageTab" class="tab-content">
                <div class="card">
                    <div class="card-header">
                        <h2 class="card-title">
                            <i class="fas fa-list-alt"></i> Published Works
                        </h2>
                        <div>
                            <button class="btn btn-secondary" id="toggleViewBtn">
                                <i class="fas fa-th-large"></i> Toggle View
                            </button>
                            <button class="btn" id="refreshPostsBtn">
                                <i class="fas fa-sync-alt"></i> Refresh
                            </button>
                        </div>
                    </div>
                    <div class="card-body">
                        <div id="postsTableContainer">
                            <div id="loadingPosts" class="loading-container">
                                <div class="loading-spinner"></div>
                                <p class="loading-text">Loading posts...</p>
                            </div>
                            
                            <!-- Table View -->
                            <div class="table-container" id="postsTable" style="display: none;">
                                <table class="table">
                                    <thead>
                                        <tr>
                                            <th><i class="fas fa-tag"></i> Category</th>
                                            <th><i class="fas fa-heading"></i> Title</th>
                                            <th><i class="fas fa-user-edit"></i> Author</th>
                                            <th><i class="fas fa-user-tag"></i> Photo/Art</th>
                                            <th><i class="fas fa-calendar-alt"></i> Date</th>
                                            <th><i class="fas fa-cogs"></i> Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody id="postsTableBody">
                                        <!-- Posts will be loaded here -->
                                    </tbody>
                                </table>
                            </div>
                            
                            <!-- Grid View -->
                            <div class="posts-grid" id="postsGrid" style="display: none;">
                                <!-- Posts will be loaded here as cards -->
                            </div>
                            
                            <div id="noPostsMessage" class="empty-state" style="display: none;">
                                <i class="fas fa-inbox empty-icon"></i>
                                <p class="empty-text">No posts found.</p>
                                <button class="btn" id="createFirstPostBtn">
                                    <i class="fas fa-plus-circle"></i> Create Your First Post
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <!-- Status Bar -->
        <div class="status-bar">
            <div class="status-item">
                <i class="fas fa-check-circle"></i> Ready
            </div>
            <div class="status-right">
                <div class="status-item" id="wordCount">
                    <i class="fas fa-font"></i> Words: 0
                </div>
                <div class="status-item" id="characterCount">
                    <i class="fas fa-text-width"></i> Characters: 0
                </div>
                <div class="status-item">
                    <i class="far fa-clock"></i> <span id="currentTime">00:00</span>
                </div>
            </div>
        </div>

        <!-- Floating Action Button -->
        <button class="fab" id="createFab">
            <i class="fas fa-plus"></i>
        </button>
    </div>

    <!-- AI Assistant -->
    <div class="ai-assistant-container" id="aiAssistant">
        <div class="ai-assistant-header">
            <div class="ai-assistant-title">
                <div class="ai-assistant-avatar">
                    <img src="Coral.png" alt="Coral AI">
                </div>
                <span>Coral AI Assistant</span>
            </div>
            <div>
                <button class="ai-assistant-close" id="aiFullscreenBtn" title="Fullscreen Mode">
                    <i class="fas fa-expand"></i>
                </button>
                <button class="ai-assistant-close" id="aiClose">
                    <i class="fas fa-times"></i>
                </button>
            </div>
        </div>
        <div class="ai-assistant-body" id="aiMessages">
            <div class="ai-message">
                <div class="ai-message-avatar">
                    <img src="Coral.png" alt="Coral">
                </div>
                <div class="ai-message-content">
                    Hello! I'm Coral, your AI writing assistant. How can I help you with your content today?
                </div>
            </div>
        </div>
        <div class="ai-assistant-footer">
            <div class="ai-input-container">
                <textarea class="ai-input" id="aiInput" placeholder="Ask Coral something... (Ctrl+Enter for new line)"></textarea>
                <button class="ai-send-btn" id="aiSendBtn">
                    <i class="fas fa-paper-plane"></i>
                </button>
            </div>
        </div>
    </div>

    <!-- Coral Popup Notification -->
    <div class="coral-popup" id="coralPopup">
        <div class="coral-popup-avatar">
            <img src="Coral.png" alt="Coral AI">
        </div>
        <div class="coral-popup-content">
            <div class="coral-popup-title">Coral AI</div>
            <div>Try Coral with your work!</div>
        </div>
        <button class="coral-popup-close" id="coralPopupClose">
            <i class="fas fa-times"></i>
        </button>
    </div>

    <!-- Modals -->
    <div class="modal-overlay" id="editModal">
        <div class="modal">
            <div class="modal-header">
                <h3 class="modal-title">
                    <i class="fas fa-edit"></i> Edit Post
                </h3>
                <button class="modal-close" id="closeEditModal">&times;</button>
            </div>
            <div class="modal-body">
                <form id="editForm">
                    <input type="hidden" id="editPostId">
                    <div class="form-group">
                        <label class="form-label" for="editCategory">
                            <i class="fas fa-tag"></i> Category:
                        </label>
                        <select id="editCategory" class="form-control" required>
                            <option value="article">Article</option>
                            <option value="literary">Literary</option>
                            <option value="feature">Feature</option>
                            <option value="silak">Silak-salitaan</option>
                            <option value="photostory">Photostory</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label class="form-label" for="editTitle">
                            <i class="fas fa-heading"></i> Title:
                        </label>
                        <input type="text" id="editTitle" class="form-control" required placeholder="Enter post title">
                    </div>

                    <div class="form-group">
                        <label class="form-label" for="editAuthor">
                            <i class="fas fa-user-edit"></i> Author:
                        </label>
                        <input type="text" id="editAuthor" class="form-control" required placeholder="Enter author's name">
                    </div>

                    <div class="form-group" id="editAdditionalFields">
                        <label class="form-label" id="editRoleLabel" for="editAdditionalField">
                            <i class="fas fa-camera"></i> Photojournalist:
                        </label>
                        <input type="text" id="editAdditionalField" class="form-control" placeholder="Enter photojournalist's name">
                    </div>

                    <!-- Silak-salitaan specific fields for edit -->
                    <div class="silak-fields" id="editSilakFields">
                        <div class="form-group">
                            <label class="form-label">
                                <i class="fas fa-language"></i> Part of Speech:
                            </label>
                            <div class="parts-of-speech">
                                <label class="part-of-speech-option">
                                    <input type="radio" name="editPartOfSpeech" value="noun" checked> Noun
                                </label>
                                <label class="part-of-speech-option">
                                    <input type="radio" name="editPartOfSpeech" value="verb"> Verb
                                </label>
                                <label class="part-of-speech-option">
                                    <input type="radio" name="editPartOfSpeech" value="adjective"> Adjective
                                </label>
                                <label class="part-of-speech-option">
                                    <input type="radio" name="editPartOfSpeech" value="adverb"> Adverb
                                </label>
                                <label class="part-of-speech-option">
                                    <input type="radio" name="editPartOfSpeech" value="pronoun"> Pronoun
                                </label>
                                <label class="part-of-speech-option">
                                    <input type="radio" name="editPartOfSpeech" value="preposition"> Preposition
                                </label>
                                <label class="part-of-speech-option">
                                    <input type="radio" name="editPartOfSpeech" value="conjunction"> Conjunction
                                </label>
                                <label class="part-of-speech-option">
                                    <input type="radio" name="editPartOfSpeech" value="interjection"> Interjection
                                </label>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="form-label" for="editMeaning">
                                <i class="fas fa-book-open"></i> Meaning:
                            </label>
                            <textarea id="editMeaning" class="form-control" rows="4" placeholder="Enter the meaning of the word"></textarea>
                        </div>
                        <div class="form-group">
                            <label class="form-label" for="editExample">
                                <i class="fas fa-quote-right"></i> Example Usage:
                            </label>
                            <textarea id="editExample" class="form-control" rows="3" placeholder="Enter an example sentence using this word"></textarea>
                        </div>
                    </div>

                    <div class="form-group" id="editContentContainer">
                        <label class="form-label" for="editContent">
                            <i class="fas fa-paragraph"></i> Content:
                        </label>
                        <textarea id="editContent" class="form-control"></textarea>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" id="cancelEditBtn">
                    <i class="fas fa-times"></i> Cancel
                </button>
                <button class="btn" id="saveEditBtn">
                    <span class="spinner" id="editSpinner"></span>
                    <i class="fas fa-save"></i> Save Changes
                </button>
            </div>
        </div>
    </div>

    <div class="modal-overlay" id="deleteModal">
        <div class="modal">
            <div class="modal-header">
                <h3 class="modal-title">
                    <i class="fas fa-trash-alt"></i> Confirm Deletion
                </h3>
                <button class="modal-close" id="closeDeleteModal">&times;</button>
            </div>
            <div class="modal-body">
                <div style="text-align: center; margin-bottom: 20px;">
                    <i class="fas fa-exclamation-triangle" style="font-size: 48px; color: var(--error);"></i>
                </div>
                <p style="text-align: center; font-size: 18px; margin-bottom: 16px;">Are you sure you want to delete this post?</p>
                <p style="text-align: center; color: var(--text-light);">This action cannot be undone.</p>
                <input type="hidden" id="deletePostId">
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" id="cancelDeleteBtn">
                    <i class="fas fa-times"></i> Cancel
                </button>
                <button class="btn btn-danger" id="confirmDeleteBtn">
                    <span class="spinner" id="deleteSpinner"></span>
                    <i class="fas fa-trash-alt"></i> Delete
                </button>
            </div>
        </div>
    </div>

    <div class="modal-overlay" id="viewModal">
        <div class="modal">
            <div class="modal-header">
                <h3 class="modal-title">
                    <i class="fas fa-eye"></i> View Post
                </h3>
                <button class="modal-close" id="closeViewModal">&times;</button>
            </div>
            <div class="modal-body">
                <div id="viewPostContent">
                    <!-- Post content will be loaded here -->
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" id="closeViewBtn">
                    <i class="fas fa-times"></i> Close
                </button>
                <button class="btn" id="editFromViewBtn">
                    <i class="fas fa-edit"></i> Edit Post
                </button>
            </div>
        </div>
    </div>

    <!-- Help Modal -->
    <div class="modal-overlay" id="helpModal">
        <div class="modal">
            <div class="modal-header">
                <h3 class="modal-title">
                    <i class="fas fa-question-circle"></i> Help Center
                </h3>
                <button class="modal-close" id="closeHelpModal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="help-section">
                    <h3 class="help-title"><i class="fas fa-info-circle"></i> About Ang Silakbo Workstation</h3>
                    <p class="help-text">
                        Ang Silakbo Workstation is a comprehensive content management system designed for writers, journalists, and content creators. It provides a streamlined workflow for creating, editing, and managing various types of content including articles, literary works, features, photostories, and Filipino language entries.
                    </p>
                    <div class="help-card">
                        <div class="help-card-title"><i class="fas fa-keyboard"></i> Keyboard Shortcuts</div>
                        <div class="help-shortcut"><span class="help-key">Ctrl</span> + <span class="help-key">S</span> Save current work</div>
                        <div class="help-shortcut"><span class="help-key">Ctrl</span> + <span class="help-key">B</span> Bold text</div>
                        <div class="help-shortcut"><span class="help-key">Ctrl</span> + <span class="help-key">I</span> Italic text</div>
                        <div class="help-shortcut"><span class="help-key">Ctrl</span> + <span class="help-key">Z</span> Undo</div>
                        <div class="help-shortcut"><span class="help-key">Ctrl</span> + <span class="help-key">Y</span> Redo</div>
                    </div>
                </div>

                <div class="help-section">
                    <h3 class="help-title"><i class="fas fa-plus-circle"></i> Creating New Posts</h3>
                    <p class="help-text">
                        To create a new post, follow these steps:
                    </p>
                    <ul class="help-list">
                        <li class="help-list-item">Navigate to the "Create New Post" tab from the sidebar.</li>
                        <li class="help-list-item">Select a category (Article, Literary, Feature, Silak-salitaan, or Photostory) from the dropdown menu.</li>
                        <li class="help-list-item">Fill in the required fields: Title and Author.</li>
                        <li class="help-list-item">Add a photojournalist or cartoonist name if applicable.</li>
                        <li class="help-list-item">For Silak-salitaan, fill in the part of speech, meaning, and example usage.</li>
                        <li class="help-list-item">Upload a featured image by clicking "Upload Image".</li>
                        <li class="help-list-item">Write your content in the rich text editor (except for Silak-salitaan).</li>
                        <li class="help-list-item">Click "Save Draft" to save your work or "Publish Post" to make it live.</li>
                    </ul>
                    <div class="help-card">
                        <div class="help-card-title"><i class="fas fa-exclamation-circle"></i> Important Tips</div>
                        <p>For best results, prepare your content in advance and consider these guidelines:</p>
                        <ul class="help-list">
                            <li class="help-list-item">Articles should be 500-1500 words with a clear introduction, body, and conclusion.</li>
                            <li class="help-list-item">Literary works benefit from careful proofreading and attention to style.</li>
                            <li class="help-list-item">Features typically include more in-depth reporting and multiple sources.</li>
                            <li class="help-list-item">Photostories should have high-quality images with descriptive captions.</li>
                            <li class="help-list-item">Silak-salitaan entries should be thoroughly researched for accuracy.</li>
                        </ul>
                    </div>
                </div>

                <div class="help-section">
                    <h3 class="help-title"><i class="fas fa-list"></i> Managing Published Works</h3>
                    <p class="help-text">
                        The "Published Works" section allows you to view, edit, and manage all your content:
                    </p>
                    <ul class="help-list">
                        <li class="help-list-item">Switch between Table and Grid views using the "Toggle View" button.</li>
                        <li class="help-list-item">Use the "View" button to read the full post.</li>
                        <li class="help-list-item">Use the "Edit" button to modify an existing post.</li>
                        <li class="help-list-item">Use the "Delete" button to remove a post (requires confirmation).</li>
                        <li class="help-list-item">Click "Refresh" to update the list with the latest changes.</li>
                        <li class="help-list-item">Filter content by category using the sidebar navigation.</li>
                    </ul>
                </div>

                <div class="help-section">
                    <h3 class="help-title"><i class="fas fa-image"></i> Working with Images</h3>
                    <p class="help-text">
                        Images are an important part of your content. Here's how to work with them effectively:
                    </p>
                    <ul class="help-list">
                        <li class="help-list-item">Use high-resolution images (recommended: 1200x630 pixels).</li>
                        <li class="help-list-item">Supported formats include JPG, PNG, and GIF.</li>
                        <li class="help-list-item">Keep file sizes under 5MB for optimal performance.</li>
                        <li class="help-list-item">Use descriptive file names for better organization.</li>
                        <li class="help-list-item">Consider image composition and relevance to your content.</li>
                        <li class="help-list-item">For photostories, prepare a series of 5-10 related images.</li>
                    </ul>
                </div>
                
                <div class="help-section">
                    <h3 class="help-title"><i class="fas fa-robot"></i> Using Coral AI Assistant</h3>
                    <p class="help-text">
                        Coral AI is your intelligent writing assistant that can help with various content creation tasks:
                    </p>
                    <ul class="help-list">
                        <li class="help-list-item">Click the Coral icon in the header to open the AI assistant panel.</li>
                        <li class="help-list-item">Ask Coral for writing suggestions, ideas, or help with your content.</li>
                        <li class="help-list-item">Use Coral to generate outlines, improve your writing, or check grammar.</li>
                        <li class="help-list-item">Use Ctrl+Enter to add line breaks in your messages to Coral.</li>
                        <li class="help-list-item">Click the fullscreen button to expand Coral to a larger view.</li>
                        <li class="help-list-item">Your conversations with Coral are saved between sessions.</li>
                    </ul>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn" id="closeHelpBtn">
                    <i class="fas fa-check"></i> Got It
                </button>
            </div>
        </div>
    </div>

    <!-- Image Upload Modal -->
    <div class="modal-overlay image-upload-modal" id="imageUploadModal">
        <div class="modal">
            <div class="modal-header">
                <h3 class="modal-title">
                    <i class="fas fa-image"></i> Upload Image
                </h3>
                <button class="modal-close" id="closeImageUploadModal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="image-upload-area" id="dropArea">
                    <i class="fas fa-cloud-upload-alt image-upload-icon"></i>
                    <p class="image-upload-text">Drag & drop your image here or click to browse</p>
                    <p class="image-upload-hint">Supported formats: JPG, PNG, GIF (Max size: 5MB)</p>
                    <input type="file" id="imageUpload" accept="image/*" style="display: none;">
                </div>
                <div class="image-preview-container" style="margin-top: 1.5rem;">
                    <img id="imagePreview" alt="Image Preview" style="max-width: 100%; display: none; border-radius: var(--radius-lg);">
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" id="cancelImageUploadBtn">
                    <i class="fas fa-times"></i> Cancel
                </button>
                <button class="btn" id="confirmImageUploadBtn">
                    <i class="fas fa-check"></i> Use This Image
                </button>
            </div>
        </div>
    </div>

    <!-- AI Fullscreen Modal -->
    <div class="modal-overlay ai-fullscreen-modal" id="aiFullscreenModal">
        <div class="modal">
            <div class="modal-header">
                <h3 class="modal-title">
                    <div class="ai-assistant-avatar" style="width: 32px; height: 32px; margin-right: 8px;">
                        <img src="Coral.png" alt="Coral AI">
                    </div>
                    Coral AI Assistant
                </h3>
                <button class="modal-close" id="closeAiFullscreenModal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="ai-fullscreen-body" id="aiFullscreenMessages">
                    <!-- Messages will be copied here -->
                </div>
                <div class="ai-fullscreen-footer">
                    <div class="ai-input-container">
                        <textarea class="ai-input" id="aiFullscreenInput" placeholder="Ask Coral something... (Ctrl+Enter for new line)" rows="2"></textarea>
                        <button class="ai-send-btn" id="aiFullscreenSendBtn">
                            <i class="fas fa-paper-plane"></i>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
       // Initialize Supabase
const supabaseUrl = "https://uyxgsziyflquisckdwwc.supabase.co";
const supabaseKey = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InV5eGdzeml5ZmxxdWlzY2tkd3djIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDE1OTQyODUsImV4cCI6MjA1NzE3MDI4NX0.DoIEoWWuajDpBhD2UwLYzrKRyZNyBP4izasROCdIbkk";
const supabase = window.supabase.createClient(supabaseUrl, supabaseKey);

// Cohere API key
const cohereApiKey = "z99HUO9u2vu9E4YTRRfeue6hbdkdOcM8zWQDfbcq";

// Current view mode for posts (table or grid)
let currentViewMode = 'table';

// Dark mode toggle
let darkMode = false;

// Current category filter
let currentCategoryFilter = null;

// Sidebar collapsed state
let sidebarCollapsed = false;

// Selected image for upload
let selectedImage = null;

// AI conversation history
let aiConversation = [];

// Initialize document
document.addEventListener('DOMContentLoaded', function() {
    // Show Coral popup after 2 seconds
    setTimeout(function() {
        const coralPopup = document.getElementById('coralPopup');
        coralPopup.classList.add('active');
        
        // Auto-hide after 7 seconds
        setTimeout(function() {
            coralPopup.classList.remove('active');
        }, 7000);
    }, 2000);
    
    // Close Coral popup
    document.getElementById('coralPopupClose').addEventListener('click', function() {
        document.getElementById('coralPopup').classList.remove('active');
    });
    
    // Update current time
    updateTime();
    setInterval(updateTime, 60000);
    
    // Initialize TinyMCE for create form
    tinymce.init({
        selector: '#content',
        plugins: 'anchor autolink charmap codesample emoticons image link lists media searchreplace table visualblocks wordcount',
        toolbar: 'undo redo | blocks fontfamily fontsize | bold italic underline strikethrough | link image media table | align lineheight | numlist bullist indent outdent | emoticons charmap | removeformat',
        height: 500,
        menubar: false,
        statusbar: true,
        branding: false,
        promotion: false,
        skin: 'oxide',
        content_css: 'default',
        setup: function(editor) {
            // Update word count and character count
            editor.on('KeyUp', function() {
                const text = editor.getContent({ format: 'text' });
                updateWordCount(text);
                updateCharacterCount(text);
            });

            // Add keyboard shortcut for save
            editor.addShortcut('ctrl+s', 'Save draft', function() {
                document.getElementById('saveBtn').click();
                return false; // Prevent default browser save dialog
            });
        }
    });

    // Initialize TinyMCE for edit form
    tinymce.init({
        selector: '#editContent',
        plugins: 'anchor autolink charmap codesample emoticons image link lists media searchreplace table visualblocks wordcount',
        toolbar: 'undo redo | blocks fontfamily fontsize | bold italic underline strikethrough | link image media table | align lineheight | numlist bullist indent outdent | emoticons charmap | removeformat',
        height: 400,
        menubar: false,
        statusbar: true,
        branding: false,
        promotion: false,
        skin: 'oxide',
        content_css: 'default',
        setup: function(editor) {
            // Add keyboard shortcut for save
            editor.addShortcut('ctrl+s', 'Save changes', function() {
                document.getElementById('saveEditBtn').click();
                return false; // Prevent default browser save dialog
            });
        }
    });
    
    // Initialize category change event
    document.getElementById('category').addEventListener('change', function() {
        const category = this.value;
        let label = document.getElementById('roleLabel');
        let additionalField = document.getElementById('additionalField');
        let silakFields = document.getElementById('silakFields');
        let contentContainer = document.getElementById('contentContainer');
        
        // Reset visibility
        silakFields.classList.remove('active');
        contentContainer.style.display = 'block';
        
        if (category === 'article' || category === 'feature' || category === 'photostory') {
            label.innerHTML = '<i class="fas fa-camera"></i> Photojournalist:';
            additionalField.placeholder = "Enter photojournalist's name";
        } else if (category === 'literary') {
            label.innerHTML = '<i class="fas fa-paint-brush"></i> Cartoonist:';
            additionalField.placeholder = "Enter cartoonist's name";
        }
        
        // Special handling for Silak-salitaan
        if (category === 'silak') {
            silakFields.classList.add('active');
            contentContainer.style.display = 'none';
            label.innerHTML = '<i class="fas fa-user-edit"></i> Contributor:';
            additionalField.placeholder = "Enter contributor's name";
        }
    });
    
    // Initialize edit category change event
    document.getElementById('editCategory').addEventListener('change', function() {
        const category = this.value;
        let label = document.getElementById('editRoleLabel');
        let additionalField = document.getElementById('editAdditionalField');
        let silakFields = document.getElementById('editSilakFields');
        let contentContainer = document.getElementById('editContentContainer');
        
        // Reset visibility
        silakFields.classList.remove('active');
        contentContainer.style.display = 'block';
        
        if (category === 'article' || category === 'feature' || category === 'photostory') {
            label.innerHTML = '<i class="fas fa-camera"></i> Photojournalist:';
            additionalField.placeholder = "Enter photojournalist's name";
        } else if (category === 'literary') {
            label.innerHTML = '<i class="fas fa-paint-brush"></i> Cartoonist:';
            additionalField.placeholder = "Enter cartoonist's name";
        } else if (category === 'silak') {
            silakFields.classList.add('active');
            contentContainer.style.display = 'none';
            label.innerHTML = '<i class="fas fa-user-edit"></i> Contributor:';
            additionalField.placeholder = "Enter contributor's name";
        }
    });
    
    // Sidebar toggle
    document.getElementById('sidebarToggle').addEventListener('click', function() {
        sidebarCollapsed = !sidebarCollapsed;
        const sidebar = document.getElementById('sidebar');
        
        if (sidebarCollapsed) {
            sidebar.classList.add('sidebar-collapsed');
            this.innerHTML = '<i class="fas fa-chevron-right"></i>';
        } else {
            sidebar.classList.remove('sidebar-collapsed');
            this.innerHTML = '<i class="fas fa-chevron-left"></i>';
        }
    });
    
    // Sidebar navigation
    document.getElementById('navCreate').addEventListener('click', function(e) {
        e.preventDefault();
        showTab('create');
        updateActiveNavLink(this);
        document.getElementById('pageTitle').innerHTML = '<i class="fas fa-pen-fancy"></i> Create New Post';
    });
    
    document.getElementById('navManage').addEventListener('click', function(e) {
        e.preventDefault();
        showTab('manage');
        currentCategoryFilter = null; // Reset filter
        loadPosts(); // Load all posts
        updateActiveNavLink(this);
        document.getElementById('pageTitle').innerHTML = '<i class="fas fa-list-alt"></i> Published Works';
    });
    
    document.getElementById('navArticles').addEventListener('click', function(e) {
        e.preventDefault();
        showTab('manage');
        currentCategoryFilter = 'article';
        loadPosts('article'); // Load only articles
        updateActiveNavLink(this);
        document.getElementById('pageTitle').innerHTML = '<i class="fas fa-newspaper"></i> Articles';
    });
    
    document.getElementById('navLiterary').addEventListener('click', function(e) {
        e.preventDefault();
        showTab('manage');
        currentCategoryFilter = 'literary';
        loadPosts('literary'); // Load only literary works
        updateActiveNavLink(this);
        document.getElementById('pageTitle').innerHTML = '<i class="fas fa-book"></i> Literary Works';
    });

    document.getElementById('navFeature').addEventListener('click', function(e) {
        e.preventDefault();
        showTab('manage');
        currentCategoryFilter = 'feature';
        loadPosts('feature'); // Load only features
        updateActiveNavLink(this);
        document.getElementById('pageTitle').innerHTML = '<i class="fas fa-star"></i> Features';
    });

    document.getElementById('navSilak').addEventListener('click', function(e) {
        e.preventDefault();
        showTab('manage');
        currentCategoryFilter = 'silak';
        loadPosts('silak'); // Load only silak-salitaan
        updateActiveNavLink(this);
        document.getElementById('pageTitle').innerHTML = '<i class="fas fa-language"></i> Silak-salitaan';
    });

    document.getElementById('navPhotostory').addEventListener('click', function(e) {
        e.preventDefault();
        showTab('manage');
        currentCategoryFilter = 'photostory';
        loadPosts('photostory'); // Load only photostories
        updateActiveNavLink(this);
        document.getElementById('pageTitle').innerHTML = '<i class="fas fa-camera"></i> Photostories';
    });
    
    // Create new post button
    document.getElementById('createNewBtn').addEventListener('click', function() {
        showTab('create');
        updateActiveNavLink(document.getElementById('navCreate'));
        document.getElementById('pageTitle').innerHTML = '<i class="fas fa-pen-fancy"></i> Create New Post';
    });
    
    // Toggle view button (table/grid)
    document.getElementById('toggleViewBtn').addEventListener('click', function() {
        togglePostsView();
    });
    
    // Refresh posts button
    document.getElementById('refreshPostsBtn').addEventListener('click', function() {
        loadPosts(currentCategoryFilter);
    });
    
    // Save button
    document.getElementById('saveBtn').addEventListener('click', function() {
        document.getElementById('postForm').dispatchEvent(new Event('submit'));
    });
    
    // Publish button (same as save for now)
    document.getElementById('publishBtn').addEventListener('click', function() {
        document.getElementById('postForm').dispatchEvent(new Event('submit'));
    });
    
    // Reset button
    document.getElementById('resetBtn').addEventListener('click', function() {
        document.getElementById('postForm').reset();
        tinymce.get('content').setContent('');
        selectedImage = null;
        document.getElementById('silakFields').classList.remove('active');
        document.getElementById('contentContainer').style.display = 'block';
        updateWordCount('');
        updateCharacterCount('');
    });
    
    // Create first post button
    document.getElementById('createFirstPostBtn').addEventListener('click', function() {
        showTab('create');
        updateActiveNavLink(document.getElementById('navCreate'));
        document.getElementById('pageTitle').innerHTML = '<i class="fas fa-pen-fancy"></i> Create New Post';
    });

    // Floating action button
    document.getElementById('createFab').addEventListener('click', function() {
        showTab('create');
        updateActiveNavLink(document.getElementById('navCreate'));
        document.getElementById('pageTitle').innerHTML = '<i class="fas fa-pen-fancy"></i> Create New Post';
    });

    // Help button
    document.getElementById('helpBtn').addEventListener('click', function(e) {
        e.preventDefault();
        openHelpModal();
    });

    // Close help modal
    document.getElementById('closeHelpModal').addEventListener('click', function() {
        document.getElementById('helpModal').style.display = 'none';
        document.getElementById('helpModal').classList.remove('active');
    });

    document.getElementById('closeHelpBtn').addEventListener('click', function() {
        document.getElementById('helpModal').style.display = 'none';
        document.getElementById('helpModal').classList.remove('active');
    });
    
    // Theme toggle
    document.getElementById('themeToggle').addEventListener('click', function() {
        toggleDarkMode();
    });
    
    // AI Assistant toggle
    document.getElementById('aiButton').addEventListener('click', function() {
        toggleAIAssistant();
    });
    
    // Close AI Assistant
    document.getElementById('aiClose').addEventListener('click', function() {
        document.getElementById('aiAssistant').classList.remove('active');
    });
    
    // AI Send button
    document.getElementById('aiSendBtn').addEventListener('click', function() {
        sendMessageToAI();
    });
    
    // AI Input Enter key
    document.getElementById('aiInput').addEventListener('keydown', function(e) {
        if (e.key === 'Enter' && !e.ctrlKey) {
            e.preventDefault();
            sendMessageToAI();
        }
    });
    
    // AI Fullscreen button
    document.getElementById('aiFullscreenBtn').addEventListener('click', function() {
        openAIFullscreenModal();
    });
    
    // Close AI Fullscreen modal
    document.getElementById('closeAiFullscreenModal').addEventListener('click', function() {
        document.getElementById('aiFullscreenModal').style.display = 'none';
        document.getElementById('aiFullscreenModal').classList.remove('active');
    });
    
    // AI Fullscreen Send button
    document.getElementById('aiFullscreenSendBtn').addEventListener('click', function() {
        sendMessageToAIFullscreen();
    });
    
    // AI Fullscreen Input Enter key
    document.getElementById('aiFullscreenInput').addEventListener('keydown', function(e) {
        if (e.key === 'Enter' && !e.ctrlKey) {
            e.preventDefault();
            sendMessageToAIFullscreen();
        }
    });
    
    // Upload Image button
        document.getElementById('uploadImageBtn').addEventListener('click', function() {
            const modal = document.getElementById('imageUploadModal');
            modal.style.display = 'flex';
            setTimeout(() => {
                modal.classList.add('active');
            }, 10);
        });
    
    // Image Upload Modal events
    document.getElementById('closeImageUploadModal').addEventListener('click', function() {
        closeImageUploadModal();
    });
    
    document.getElementById('cancelImageUploadBtn').addEventListener('click', function() {
        closeImageUploadModal();
    });
    
    document.getElementById('confirmImageUploadBtn').addEventListener('click', function() {
        if (selectedImage) {
            closeImageUploadModal();
            showAlert('success', 'Image uploaded successfully!');
        } else {
            showAlert('error', 'Please select an image first.');
        }
    });
    
    // Setup drag and drop for image upload
    const dropArea = document.getElementById('dropArea');
    const fileInput = document.getElementById('imageUpload');
    
    dropArea.addEventListener('click', function() {
        fileInput.click();
    });
    
    dropArea.addEventListener('dragover', function(e) {
        e.preventDefault();
        dropArea.style.borderColor = 'white';
        dropArea.style.transform = 'translateY(-5px)';
        dropArea.style.boxShadow = 'var(--shadow-lg)';
    });
    
    dropArea.addEventListener('dragleave', function() {
        dropArea.style.borderColor = 'var(--glass-border)';
        dropArea.style.transform = 'none';
        dropArea.style.boxShadow = 'none';
    });
    
    dropArea.addEventListener('drop', function(e) {
        e.preventDefault();
        dropArea.style.borderColor = 'var(--glass-border)';
        dropArea.style.transform = 'none';
        dropArea.style.boxShadow = 'none';
        
        if (e.dataTransfer.files.length) {
            fileInput.files = e.dataTransfer.files;
            handleImageUpload(e.dataTransfer.files[0]);
        }
    });
    
    fileInput.addEventListener('change', function() {
        if (fileInput.files.length) {
            handleImageUpload(fileInput.files[0]);
        }
    });
    
     // Handle form submission
    document.getElementById('postForm').addEventListener('submit', handleFormSubmit);
    
    // Load AI conversation from localStorage
    loadAIConversation();
    
    // Load posts initially
    loadPosts();
});

// Load AI conversation from localStorage
function loadAIConversation() {
    const savedConversation = localStorage.getItem('aiConversation');
    if (savedConversation) {
        aiConversation = JSON.parse(savedConversation);
        
        // Display saved messages
        const messagesContainer = document.getElementById('aiMessages');
        messagesContainer.innerHTML = ''; // Clear default message
        
        aiConversation.forEach(message => {
            const messageElement = document.createElement('div');
            messageElement.className = `ai-message ${message.isUser ? 'user' : ''}`;
            
            const avatarElement = document.createElement('div');
            avatarElement.className = 'ai-message-avatar';
            
            const avatarImg = document.createElement('img');
            avatarImg.src = message.isUser ? 'SILAKBO (1).png' : 'Coral.png';
            avatarImg.alt = message.isUser ? 'User' : 'Coral';
            
            avatarElement.appendChild(avatarImg);
            
            const contentElement = document.createElement('div');
            contentElement.className = 'ai-message-content';
            contentElement.textContent = message.text;
            
            messageElement.appendChild(avatarElement);
            messageElement.appendChild(contentElement);
            
            messagesContainer.appendChild(messageElement);
        });
        
        // Scroll to bottom
        messagesContainer.scrollTop = messagesContainer.scrollHeight;
    } else {
        // Add default welcome message to conversation
        aiConversation.push({
            text: "Hello! I'm Coral, your AI writing assistant. How can I help you with your document today?",
            isUser: false
        });
        
        // Save to localStorage
        localStorage.setItem('aiConversation', JSON.stringify(aiConversation));
    }
}

// Toggle dark mode
function toggleDarkMode() {
    darkMode = !darkMode;
    if (darkMode) {
        document.body.classList.add('dark');
        document.getElementById('themeToggle').innerHTML = '<i class="fas fa-sun"></i>';
        localStorage.setItem('darkMode', 'true');
    } else {
        document.body.classList.remove('dark');
        document.getElementById('themeToggle').innerHTML = '<i class="fas fa-moon"></i>';
        localStorage.setItem('darkMode', 'false');
    }
    
    // Update TinyMCE skin
    if (tinymce.activeEditor) {
        tinymce.activeEditor.ui.styleSheetLoader.unload('default');
        tinymce.activeEditor.ui.styleSheetLoader.load(darkMode ? 'oxide-dark' : 'oxide');
    }
}

// Toggle AI Assistant
function toggleAIAssistant() {
    const aiAssistant = document.getElementById('aiAssistant');
    aiAssistant.classList.toggle('active');
    
    // If opening, focus on input
    if (aiAssistant.classList.contains('active')) {
        document.getElementById('aiInput').focus();
    }
}

// Send message to AI
async function sendMessageToAI() {
    const input = document.getElementById('aiInput');
    const message = input.value.trim();
    
    if (!message) return;
    
    // Clear input
    input.value = '';
    
    // Add user message to chat
    addMessageToChat(message, true);
    
    // Add to conversation history
    aiConversation.push({
        text: message,
        isUser: true
    });
    
    // Save conversation to localStorage
    localStorage.setItem('aiConversation', JSON.stringify(aiConversation));
    
    // Show loading indicator
    const loadingMessage = addMessageToChat('Thinking...', false);
    
    try {
        // Call Cohere API
        const response = await fetch('https://api.cohere.ai/v1/chat', {
            method: 'POST',
            headers: {
                'Authorization': `Bearer ${cohereApiKey}`,
                'Content-Type': 'application/json'
            },
            body: JSON.stringify({
                message: message,
                model: 'command',
                preamble: "You are Coral, an AI writing assistant for a content management system called ANG SILAKBO. You help users write and improve their content. Be friendly, helpful, and concise in your responses. Focus on providing writing tips, suggestions, and improvements.",
                chat_history: []
            })
        });
        
        const data = await response.json();
        
        // Remove loading message
        loadingMessage.remove();
        
        if (data.text) {
            // Add AI response to chat
            addMessageToChat(data.text, false);
            
            // Add to conversation history
            aiConversation.push({
                text: data.text,
                isUser: false
            });
            
            // Save conversation to localStorage
            localStorage.setItem('aiConversation', JSON.stringify(aiConversation));
        } else {
            // Handle error
            addMessageToChat("I'm sorry, I couldn't process your request. Please try again.", false);
            
            // Add to conversation history
            aiConversation.push({
                text: "I'm sorry, I couldn't process your request. Please try again.",
                isUser: false
            });
            
            // Save conversation to localStorage
            localStorage.setItem('aiConversation', JSON.stringify(aiConversation));
        }
    } catch (error) {
        console.error('Error calling Cohere API:', error);
        
        // Remove loading message
        loadingMessage.remove();
        
        // Add error message
        addMessageToChat("I'm sorry, there was an error processing your request. Please try again later.", false);
        
        // Add to conversation history
        aiConversation.push({
            text: "I'm sorry, there was an error processing your request. Please try again later.",
            isUser: false
        });
        
        // Save conversation to localStorage
        localStorage.setItem('aiConversation', JSON.stringify(aiConversation));
    }
}

// Send message to AI Fullscreen
async function sendMessageToAIFullscreen() {
    const input = document.getElementById('aiFullscreenInput');
    const message = input.value.trim();
    
    if (!message) return;
    
    // Clear input
    input.value = '';
    
    // Add user message to chat
    addMessageToChatFullscreen(message, true);
    
    // Add to conversation history
    aiConversation.push({
        text: message,
        isUser: true
    });
    
    // Save conversation to localStorage
    localStorage.setItem('aiConversation', JSON.stringify(aiConversation));
    
    // Show loading indicator
    const loadingMessage = addMessageToChatFullscreen('Thinking...', false);
    
    try {
        // Call Cohere API
        const response = await fetch('https://api.cohere.ai/v1/chat', {
            method: 'POST',
            headers: {
                'Authorization': `Bearer ${cohereApiKey}`,
                'Content-Type': 'application/json'
            },
            body: JSON.stringify({
                message: message,
                model: 'command',
                preamble: "You are Coral, an AI writing assistant for a content management system called ANG SILAKBO. You help users write and improve their content. Be friendly, helpful, and concise in your responses. Focus on providing writing tips, suggestions, and improvements.",
                chat_history: []
            })
        });
        
        const data = await response.json();
        
        // Remove loading message
        loadingMessage.remove();
        
        if (data.text) {
            // Add AI response to chat
            addMessageToChatFullscreen(data.text, false);
            
            // Add to conversation history
            aiConversation.push({
                text: data.text,
                isUser: false
            });
            
            // Save conversation to localStorage
            localStorage.setItem('aiConversation', JSON.stringify(aiConversation));
        } else {
            // Handle error
            addMessageToChatFullscreen("I'm sorry, I couldn't process your request. Please try again.", false);
            
            // Add to conversation history
            aiConversation.push({
                text: "I'm sorry, I couldn't process your request. Please try again.",
                isUser: false
            });
            
            // Save conversation to localStorage
            localStorage.setItem('aiConversation', JSON.stringify(aiConversation));
        }
    } catch (error) {
        console.error('Error calling Cohere API:', error);
        
        // Remove loading message
        loadingMessage.remove();
        
        // Add error message
        addMessageToChatFullscreen("I'm sorry, there was an error processing your request. Please try again later.", false);
        
        // Add to conversation history
        aiConversation.push({
            text: "I'm sorry, there was an error processing your request. Please try again later.",
            isUser: false
        });
        
        // Save conversation to localStorage
        localStorage.setItem('aiConversation', JSON.stringify(aiConversation));
    }
}

// Add message to chat
function addMessageToChat(message, isUser) {
    const messagesContainer = document.getElementById('aiMessages');
    
    const messageElement = document.createElement('div');
    messageElement.className = `ai-message ${isUser ? 'user' : ''}`;
    
    const avatarElement = document.createElement('div');
    avatarElement.className = 'ai-message-avatar';
    
    const avatarImg = document.createElement('img');
    avatarImg.src = isUser ? 'SILAKBO (1).png' : 'Coral.png';
    avatarImg.alt = isUser ? 'User' : 'Coral';
    
    avatarElement.appendChild(avatarImg);
    
    const contentElement = document.createElement('div');
    contentElement.className = 'ai-message-content';
    contentElement.textContent = message;
    
    messageElement.appendChild(avatarElement);
    messageElement.appendChild(contentElement);
    
    messagesContainer.appendChild(messageElement);
    
    // Scroll to bottom
    messagesContainer.scrollTop = messagesContainer.scrollHeight;
    
    return messageElement;
}

// Add message to chat Fullscreen
function addMessageToChatFullscreen(message, isUser) {
    const messagesContainer = document.getElementById('aiFullscreenMessages');
    
    const messageElement = document.createElement('div');
    messageElement.className = `ai-message ${isUser ? 'user' : ''}`;
    
    const avatarElement = document.createElement('div');
    avatarElement.className = 'ai-message-avatar';
    
    const avatarImg = document.createElement('img');
    avatarImg.src = isUser ? 'SILAKBO (1).png' : 'Coral.png';
    avatarImg.alt = isUser ? 'User' : 'Coral';
    
    avatarElement.appendChild(avatarImg);
    
    const contentElement = document.createElement('div');
    contentElement.className = 'ai-message-content';
    contentElement.textContent = message;
    
    messageElement.appendChild(avatarElement);
    messageElement.appendChild(contentElement);
    
    messagesContainer.appendChild(messageElement);
    
    // Scroll to bottom
    messagesContainer.scrollTop = messagesContainer.scrollHeight;
    
    return messageElement;
}

// Open AI Fullscreen Modal
function openAIFullscreenModal() {
    // Copy messages from AI Assistant to Fullscreen Modal
    const aiMessages = document.getElementById('aiMessages');
    const aiFullscreenMessages = document.getElementById('aiFullscreenMessages');
    aiFullscreenMessages.innerHTML = aiMessages.innerHTML;
    
    // Copy input from AI Assistant to Fullscreen Modal
    const aiInput = document.getElementById('aiInput');
    const aiFullscreenInput = document.getElementById('aiFullscreenInput');
    aiFullscreenInput.value = aiInput.value;
    
    document.getElementById('aiFullscreenModal').style.display = 'flex';
    document.getElementById('aiFullscreenModal').classList.add('active');
}

// Open help modal
function openHelpModal() {
    document.getElementById('helpModal').style.display = 'flex';
    document.getElementById('helpModal').classList.add('active');
}

// Close image upload modal
function closeImageUploadModal() {
    document.getElementById('imageUploadModal').style.display = 'none';
    document.getElementById('imageUploadModal').classList.remove('active');
}

// Handle image upload
function handleImageUpload(file) {
    if (!file || !file.type.startsWith('image/')) {
        showAlert('error', 'Please select a valid image file.');
        return;
    }
    
    if (file.size > 5 * 1024 * 1024) {
        showAlert('error', 'Image size should be less than 5MB.');
        return;
    }
    
    const reader = new FileReader();
    reader.onload = function(e) {
        const imgPreview = document.getElementById('imagePreview');
        imgPreview.src = e.target.result;
        imgPreview.style.display = 'block';
        selectedImage = file;
    };
    reader.readAsDataURL(file);
}

// Update word count
function updateWordCount(text) {
    const wordCount = text ? text.split(/\s+/).filter(word => word.length > 0).length : 0;
    document.getElementById('wordCount').innerHTML = `<i class="fas fa-font"></i> Words: ${wordCount}`;
}

// Update character count
function updateCharacterCount(text) {
    const charCount = text ? text.length : 0;
    document.getElementById('characterCount').innerHTML = `<i class="fas fa-text-width"></i> Characters: ${charCount}`;
}

// Update time
function updateTime() {
    const now = new Date();
    const hours = now.getHours().toString().padStart(2, '0');
    const minutes = now.getMinutes().toString().padStart(2, '0');
    document.getElementById('currentTime').textContent = `${hours}:${minutes}`;
}

// Show tab
function showTab(tabName) {
    // Hide all tabs
    const tabs = document.querySelectorAll('.tab-content');
    tabs.forEach(tab => {
        tab.classList.remove('active');
    });
    
    // Show selected tab
    document.getElementById(tabName + 'Tab').classList.add('active');
}

// Update active navigation link
function updateActiveNavLink(activeLink) {
    const navLinks = document.querySelectorAll('.menu-link');
    navLinks.forEach(link => {
        link.classList.remove('active');
    });
    activeLink.classList.add('active');
}

// Toggle posts view (table/grid)
function togglePostsView() {
    const postsTable = document.getElementById('postsTable');
    const postsGrid = document.getElementById('postsGrid');
    
    if (currentViewMode === 'table') {
        currentViewMode = 'grid';
        postsTable.style.display = 'none';
        postsGrid.style.display = 'grid';
    } else {
        currentViewMode = 'table';
        postsTable.style.display = 'block';
        postsGrid.style.display = 'none';
    }
}

// Load posts from Supabase
async function loadPosts(category = null) {
    const postsTableContainer = document.getElementById('postsTableContainer');
    const postsTable = document.getElementById('postsTable');
    const postsTableBody = document.getElementById('postsTableBody');
    const postsGrid = document.getElementById('postsGrid');
    const loadingPosts = document.getElementById('loadingPosts');
    const noPostsMessage = document.getElementById('noPostsMessage');
    
    // Show loading state
    postsTableContainer.style.display = 'block';
    postsTable.style.display = 'none';
    postsGrid.style.display = 'none';
    noPostsMessage.style.display = 'none';
    loadingPosts.style.display = 'flex';
    
    try {
        let query = supabase.from("posts").select("*").order('created_at', { ascending: false });
        
        if (category) {
            query = query.eq('category', category);
        }
        
        const { data, error } = await query;
        
        if (error) {
            throw new Error(error.message);
        }
        
        // Hide loading state
        loadingPosts.style.display = 'none';
        
        if (data && data.length > 0) {
            // Populate table
            postsTableBody.innerHTML = '';
            data.forEach(post => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td><span class="post-category badge-${post.category}">${post.category}</span></td>
                    <td>${post.title}</td>
                    <td>${post.author}</td>
                    <td>${post.role || 'N/A'}</td>
                    <td>${new Date(post.created_at).toLocaleDateString()}</td>
                    <td class="action-buttons">
                        <button class="action-btn action-btn-view" data-id="${post.id}" title="View Post"><i class="fas fa-eye"></i></button>
                        <button class="action-btn action-btn-edit" data-id="${post.id}" title="Edit Post"><i class="fas fa-edit"></i></button>
                        <button class="action-btn action-btn-delete" data-id="${post.id}" title="Delete Post"><i class="fas fa-trash-alt"></i></button>
                    </td>
                `;
                postsTableBody.appendChild(row);
                
                // Add event listeners to action buttons
                row.querySelector('.action-btn-view').addEventListener('click', () => openViewModal(post.id));
                row.querySelector('.action-btn-edit').addEventListener('click', () => openEditModal(post.id));
                row.querySelector('.action-btn-delete').addEventListener('click', () => openDeleteModal(post.id));
            });
            
            // Populate grid
            postsGrid.innerHTML = '';
            data.forEach(post => {
                const card = document.createElement('div');
                card.className = 'post-card';
                card.innerHTML = `
                    <img src="${post.image_url || 'placeholder.jpg'}" alt="${post.title}" class="post-image">
                    <div class="post-content">
                        <span class="post-category badge-${post.category}">${post.category}</span>
                        <h3 class="post-title">${post.title}</h3>
                        <div class="post-meta">
                            <div class="post-meta-item"><i class="fas fa-user-edit"></i> ${post.author}</div>
                            <div class="post-meta-item"><i class="fas fa-calendar-alt"></i> ${new Date(post.created_at).toLocaleDateString()}</div>
                        </div>
                        <div class="post-actions">
                            <button class="btn btn-sm btn-view" data-id="${post.id}"><i class="fas fa-eye"></i> View</button>
                            <button class="btn btn-sm btn-edit" data-id="${post.id}"><i class="fas fa-edit"></i> Edit</button>
                            <button class="btn btn-sm btn-danger btn-delete" data-id="${post.id}"><i class="fas fa-trash-alt"></i> Delete</button>
                        </div>
                    </div>
                `;
                postsGrid.appendChild(card);
                
                // Add event listeners to card buttons
                card.querySelector('.btn-view').addEventListener('click', () => openViewModal(post.id));
                card.querySelector('.btn-edit').addEventListener('click', () => openEditModal(post.id));
                card.querySelector('.btn-delete').addEventListener('click', () => openDeleteModal(post.id));
            });
            
            // Show appropriate view
            if (currentViewMode === 'table') {
                postsTable.style.display = 'block';
                postsGrid.style.display = 'none';
            } else {
                postsTable.style.display = 'none';
                postsGrid.style.display = 'grid';
            }
        } else {
            // Show no posts message
            noPostsMessage.style.display = 'flex';
        }
    } catch (error) {
        console.error("Error loading posts:", error);
        showAlert('error', error.message || 'Error loading posts. Please try again.');
    }
}

// Open view modal
async function openViewModal(postId) {
    const viewModal = document.getElementById('viewModal');
    const viewPostContent = document.getElementById('viewPostContent');
    
    // Clear previous content
    viewPostContent.innerHTML = '<div class="loading-container"><div class="loading-spinner"></div><p class="loading-text">Loading post...</p></div>';
    
    // Show modal
    viewModal.style.display = 'flex';
    viewModal.classList.add('active');
    
    try {
        const { data, error } = await supabase
            .from("posts")
            .select("*")
            .eq('id', postId)
            .single();
        
        if (error) {
            throw new Error(error.message);
        }
        
        if (data) {
            // Format content based on category
            let formattedContent = '';
            if (data.category === 'silak') {
                try {
                    const silakData = JSON.parse(data.content);
                    formattedContent = `
                        <h3>Meaning:</h3>
                        <p>${silakData.meaning}</p>
                        <h3>Example Usage:</h3>
                        <p>${silakData.example}</p>
                    `;
                } catch (e) {
                    formattedContent = '<p>Error parsing Silak-salitaan content.</p>';
                }
            } else {
                formattedContent = data.content;
            }
            
            viewPostContent.innerHTML = `
                <h2>${data.title}</h2>
                <p>By ${data.author}</p>
                ${formattedContent}
            `;
        } else {
            viewPostContent.innerHTML = '<p>Post not found.</p>';
        }
    } catch (error) {
        console.error("Error loading post:", error);
        viewPostContent.innerHTML = `<p>Error loading post: ${error.message}</p>`;
    }
}

// Close view modal
document.getElementById('closeViewModal').addEventListener('click', function() {
    document.getElementById('viewModal').style.display = 'none';
    document.getElementById('viewModal').classList.remove('active');
});

document.getElementById('closeViewBtn').addEventListener('click', function() {
    document.getElementById('viewModal').style.display = 'none';
    document.getElementById('viewModal').classList.remove('active');
});

// Open edit modal
async function openEditModal(postId) {
    const editModal = document.getElementById('editModal');
    const editForm = document.getElementById('editForm');
    
    // Clear previous values
    editForm.reset();
    
    // Show modal
    editModal.style.display = 'flex';
    editModal.classList.add('active');
    
    try {
        const { data, error } = await supabase
            .from("posts")
            .select("*")
            .eq('id', postId)
            .single();
        
        if (error) {
            throw new Error(error.message);
        }
        
        if (data) {
            // Populate form fields
            document.getElementById('editPostId').value = data.id;
            document.getElementById('editCategory').value = data.category;
            document.getElementById('editTitle').value = data.title;
            document.getElementById('editAuthor').value = data.author;
            document.getElementById('editAdditionalField').value = data.role || '';
            
            // Handle Silak-salitaan specific fields
            let silakData = null;
            if (data.category === 'silak') {
                try {
                    silakData = JSON.parse(data.content);
                    document.querySelector(`input[name="editPartOfSpeech"][value="${silakData.partOfSpeech}"]`).checked = true;
                    document.getElementById('editMeaning').value = silakData.meaning;
                    document.getElementById('editExample').value = silakData.example;
                } catch (e) {
                    console.error("Error parsing Silak-salitaan content:", e);
                    showAlert('error', 'Error parsing Silak-salitaan content.');
                }
            }
            
            // Show/hide appropriate fields
            const category = data.category;
            let label = document.getElementById('editRoleLabel');
            let additionalField = document.getElementById('editAdditionalField');
            let silakFields = document.getElementById('editSilakFields');
            let contentContainer = document.getElementById('editContentContainer');
            
            // Reset visibility
            silakFields.classList.remove('active');
            contentContainer.style.display = 'block';
            
            if (category === 'article' || category === 'feature' || category === 'photostory') {
                label.innerHTML = '<i class="fas fa-camera"></i> Photojournalist:';
                additionalField.placeholder = "Enter photojournalist's name";
            } else if (category === 'literary') {
                label.innerHTML = '<i class="fas fa-paint-brush"></i> Cartoonist:';
                additionalField.placeholder = "Enter cartoonist's name";
            } else if (category === 'silak') {
                silakFields.classList.add('active');
                contentContainer.style.display = 'none';
                label.innerHTML = '<i class="fas fa-user-edit"></i> Contributor:';
                additionalField.placeholder = "Enter contributor's name";
            }
            
            // Set content for TinyMCE
            tinymce.get('editContent').setContent(data.content);
        } else {
            showAlert('error', 'Post not found.');
        }
    } catch (error) {
        console.error("Error loading post:", error);
        showAlert('error', error.message || 'Error loading post. Please try again.');
    }
}

// Close edit modal
document.getElementById('closeEditModal').addEventListener('click', function() {
    document.getElementById('editModal').style.display = 'none';
    document.getElementById('editModal').classList.remove('active');
});

document.getElementById('cancelEditBtn').addEventListener('click', function() {
    document.getElementById('editModal').style.display = 'none';
    document.getElementById('editModal').classList.remove('active');
});

// Save edit changes
document.getElementById('saveEditBtn').addEventListener('click', async function() {
    // Show spinner
    const editSpinner = document.getElementById('editSpinner');
    const saveEditBtn = document.getElementById('saveEditBtn');
    editSpinner.style.display = 'inline-block';
    saveEditBtn.disabled = true;
    
    try {
        const postId = document.getElementById('editPostId').value;
        const category = document.getElementById('editCategory').value;
        const title = document.getElementById('editTitle').value;
        const author = document.getElementById('editAuthor').value;
        const role = document.getElementById('editAdditionalField').value;
        
        // Get content based on category
        let content = '';
        let partOfSpeech = '';
        let meaning = '';
        let example = '';
        
        if (category === 'silak') {
            partOfSpeech = document.querySelector('input[name="editPartOfSpeech"]:checked').value;
            meaning = document.getElementById('editMeaning').value;
            example = document.getElementById('editExample').value;
            // For silak-salitaan, store the data in a structured format
            content = JSON.stringify({
                partOfSpeech,
                meaning,
                example
            });
        } else {
            content = tinymce.get('editContent').getContent();
        }
        
        const { data, error } = await supabase
            .from("posts")
            .update({ 
                category, 
                title,
                author, 
                role, 
                content
            })
            .eq('id', postId);
        
        if (error) {
            throw new Error(error.message);
        }
        
        // Show success message
        showAlert('success', 'Post updated successfully!');
        
        // Close modal
        document.getElementById('editModal').style.display = 'none';
        document.getElementById('editModal').classList.remove('active');
        
        // Refresh posts
        loadPosts(currentCategoryFilter);
    } catch (error) {
        console.error("Error updating post:", error);
        showAlert('error', error.message || 'Error updating post. Please try again.');
    } finally {
        // Hide spinner
        editSpinner.style.display = 'none';
        saveEditBtn.disabled = false;
    }
});

// Open delete modal
function openDeleteModal(postId) {
    const deleteModal = document.getElementById('deleteModal');
    document.getElementById('deletePostId').value = postId;
    deleteModal.style.display = 'flex';
    deleteModal.classList.add('active');
}

// Close delete modal
document.getElementById('closeDeleteModal').addEventListener('click', function() {
    document.getElementById('deleteModal').style.display = 'none';
    document.getElementById('deleteModal').classList.remove('active');
});

document.getElementById('cancelDeleteBtn').addEventListener('click', function() {
    document.getElementById('deleteModal').style.display = 'none';
    document.getElementById('deleteModal').classList.remove('active');
});

// Confirm delete
document.getElementById('confirmDeleteBtn').addEventListener('click', async function() {
    // Show spinner
    const deleteSpinner = document.getElementById('deleteSpinner');
    const confirmDeleteBtn = document.getElementById('confirmDeleteBtn');
    deleteSpinner.style.display = 'inline-block';
    confirmDeleteBtn.disabled = true;
    
    try {
        const postId = document.getElementById('deletePostId').value;
        
        const { data, error } = await supabase
            .from("posts")
            .delete()
            .eq('id', postId);
        
        if (error) {
            throw new Error(error.message);
        }
        
        // Show success message
        showAlert('success', 'Post deleted successfully!');
        
        // Close modal
        document.getElementById('deleteModal').style.display = 'none';
        document.getElementById('deleteModal').classList.remove('active');
        
        // Refresh posts
        loadPosts(currentCategoryFilter);
    } catch (error) {
        console.error("Error deleting post:", error);
        showAlert('error', error.message || 'Error deleting post. Please try again.');
    } finally {
        // Hide spinner
        deleteSpinner.style.display = 'none';
        confirmDeleteBtn.disabled = false;
    }
});

// Show alert message
function showAlert(type, message) {
    const alertSuccess = document.getElementById('alertSuccess');
    const alertError = document.getElementById('alertError');
    const errorMessage = document.getElementById('errorMessage');
    
    if (type === 'success') {
        alertSuccess.querySelector('span').textContent = message;
        alertSuccess.style.display = 'flex';
        alertSuccess.style.opacity = 1;
        alertSuccess.style.transform = 'translateY(0)';
        alertError.style.display = 'none';
        
        setTimeout(() => {
            alertSuccess.style.opacity = 0;
            alertSuccess.style.transform = 'translateY(-5px)';
            setTimeout(() => {
                alertSuccess.style.display = 'none';
            }, 300);
        }, 5000);
    } else {
        errorMessage.textContent = message;
        alertError.style.display = 'flex';
        alertError.style.opacity = 1;
        alertError.style.transform = 'translateY(0)';
        alertSuccess.style.display = 'none';
        
        setTimeout(() => {
            alertError.style.opacity = 0;
            alertError.style.transform = 'translateY(-5px)';
            setTimeout(() => {
                alertError.style.display = 'none';
            }, 300);
        }, 5000);
    }
}

// Close alert when clicked
document.querySelectorAll('.alert-close').forEach(button => {
    button.addEventListener('click', function() {
        this.parentElement.style.opacity = 0;
        this.parentElement.style.transform = 'translateY(-5px)';
        setTimeout(() => {
            this.parentElement.style.display = 'none';
        }, 300);
    });
});

// Check for dark mode preference in localStorage
if (localStorage.getItem('darkMode') === 'true') {
    toggleDarkMode();
}

// Handle form submission
async function handleFormSubmit(e) {
    e.preventDefault();

    // Show spinner
    const submitSpinner = document.getElementById('submitSpinner');
    const saveBtn = document.getElementById('saveBtn');
    const publishBtn = document.getElementById('publishBtn');
    submitSpinner.style.display = 'inline-block';
    saveBtn.disabled = true;
    publishBtn.disabled = true;

    try {
        const category = document.getElementById('category').value;
        const title = document.getElementById('title').value;
        const author = document.getElementById('author').value;
        const role = document.getElementById('additionalField').value;

        // Get content based on category
        let content = '';
        let partOfSpeech = '';
        let meaning = '';
        let example = '';

        if (category === 'silak') {
            partOfSpeech = document.querySelector('input[name="partOfSpeech"]:checked').value;
            meaning = document.getElementById('meaning').value;
            example = document.getElementById('example').value;

            // For silak-salitaan, store the data in a structured format
            content = JSON.stringify({
                partOfSpeech,
                meaning,
                example
            });
        } else {
            content = tinymce.get('content').getContent();
        }

        const { data, error } = await supabase
            .from("posts")
            .insert([{
                category,
                title,
                author,
                role,
                content
            }]);

        if (error) {
            throw new Error(error.message);
        }

        // Show success message
        showAlert('success', 'Post saved successfully!');

        // Reset form
        document.getElementById('postForm').reset();
        tinymce.get('content').setContent('');
        selectedImage = null;
        document.getElementById('silakFields').classList.remove('active');
        document.getElementById('contentContainer').style.display = 'block';
        updateWordCount('');
        updateCharacterCount('');

        // Refresh posts if on manage tab
        if (document.getElementById('manageTab').classList.contains('active')) {
            loadPosts(currentCategoryFilter);
        }
    } catch (error) {
        console.error("Error saving post:", error);
        showAlert('error', error.message || 'Error saving post. Please try again.');
    } finally {
        // Hide spinner
    }
}
    </script>
</body>
</html>
    
