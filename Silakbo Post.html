<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ang Silakbo - Workstation</title>
    <link rel="icon" href="SILAKBO (1).png">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.tiny.cloud/1/n92j01vjprp9xy96v0uxd2kgqi5vnd50dwm5i47veg2u1bur/tinymce/6/tinymce.min.js" referrerpolicy="origin"></script>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: #E64A19;
            --primary-light: #FF7043;
            --primary-dark: #BF360C;
            --secondary: #F2F4F3;
            --accent: #A65E44;
            --text-dark: #2B2D42;
            --text-light: #8D99AE;
            --white: #FFFFFF;
            --gray-light: #F8F9FA;
            --gray: #E9ECEF;
            --gray-dark: #CED4DA;
            --success: #2E7D32;
            --error: #C62828;
            --warning: #F9A825;
            --info: #1565C0;
            --border-radius: 8px;
            --border-radius-sm: 4px;
            --border-radius-lg: 16px;
            --shadow-sm: 0 2px 8px rgba(0, 0, 0, 0.05);
            --shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
            --shadow-lg: 0 10px 25px rgba(0, 0, 0, 0.12);
            --transition: all 0.3s ease;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Poppins', sans-serif;
        }

        body {
            background-color: #f5f5f7;
            color: var(--text-dark);
            line-height: 1.6;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        ::-webkit-scrollbar {
            width: 6px;
            height: 6px;
        }

        ::-webkit-scrollbar-track {
            background: var(--gray-light);
        }

        ::-webkit-scrollbar-thumb {
            background: var(--primary-light);
            border-radius: 10px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--primary);
        }

        header {
            background-color: var(--primary);
            color: var(--white);
            box-shadow: var(--shadow);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .header-container {
            max-width: 1400px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0.75rem 2rem;
        }

        .logo-container {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .logo-img {
            height: 40px;
            width: auto;
            filter: brightness(0) invert(1);
            transition: transform 0.3s ease;
        }

        .logo-container:hover .logo-img {
            transform: scale(1.05);
        }

        .logo-text {
            font-size: 1.3rem;
            font-weight: 600;
            color: var(--white);
            text-decoration: none;
            letter-spacing: 0.5px;
        }

        .nav-links {
            display: flex;
            gap: 0.5rem;
        }

        .nav-link {
            color: var(--white);
            text-decoration: none;
            font-weight: 500;
            transition: var(--transition);
            padding: 0.6rem 1rem;
            border-radius: var(--border-radius);
            display: flex;
            align-items: center;
            gap: 0.5rem;
            position: relative;
        }

        .nav-link::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 3px;
            background-color: var(--white);
            transform: scaleX(0);
            transition: transform 0.3s ease;
            transform-origin: center;
        }

        .nav-link:hover::after {
            transform: scaleX(1);
        }

        .nav-link.active {
            background-color: rgba(255, 255, 255, 0.2);
        }

        .nav-link.active::after {
            transform: scaleX(1);
        }

        .mobile-menu-toggle {
            display: none;
            background: none;
            border: none;
            color: var(--white);
            font-size: 1.5rem;
            cursor: pointer;
            transition: var(--transition);
        }

        .mobile-menu-toggle:hover {
            transform: scale(1.1);
        }

        main {
            max-width: 1400px;
            margin: 2rem auto;
            padding: 0 2rem;
            flex: 1;
        }

        .page-title {
            font-size: 1.8rem;
            margin-bottom: 1rem;
            color: var(--primary-dark);
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .dashboard-layout {
            display: grid;
            grid-template-columns: 1fr 300px;
            gap: 2rem;
        }

        .tabs-container {
            position: relative;
            margin-bottom: 2rem;
        }

        .tabs {
            display: flex;
            gap: 1rem;
            position: relative;
            z-index: 1;
            background-color: var(--white);
            padding: 0.5rem;
            border-radius: var(--border-radius-lg);
            box-shadow: var(--shadow-sm);
        }

        .tab {
            padding: 0.75rem 1.5rem;
            cursor: pointer;
            background-color: transparent;
            border: none;
            font-weight: 500;
            transition: var(--transition);
            color: var(--text-dark);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.75rem;
            position: relative;
            font-size: 0.95rem;
            border-radius: var(--border-radius);
            flex: 1;
        }

        .tab.active {
            background-color: var(--primary);
            color: var(--white);
            box-shadow: var(--shadow);
        }

        .tab:not(.active):hover {
            background-color: var(--gray-light);
            color: var(--primary);
        }

        .tab-content {
            display: none;
            animation: fadeIn 0.4s ease-in-out;
        }

        .tab-content.active {
            display: block;
        }

        .card {
            background-color: var(--white);
            border-radius: var(--border-radius-lg);
            box-shadow: var(--shadow);
            padding: 2rem;
            margin-bottom: 2rem;
            transition: var(--transition);
            border: 1px solid var(--gray);
        }

        .card:hover {
            box-shadow: var(--shadow-lg);
            transform: translateY(-3px);
        }

        .card-title {
            font-size: 1.5rem;
            margin-bottom: 1.5rem;
            color: var(--primary-dark);
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 0.75rem;
            position: relative;
            padding-bottom: 0.75rem;
            border-bottom: 2px solid var(--gray);
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
            color: var(--text-dark);
            font-size: 0.95rem;
        }

        input[type="text"],
        select,
        textarea {
            width: 100%;
            padding: 0.75rem 1rem;
            border: 1px solid var(--gray);
            border-radius: var(--border-radius);
            font-size: 0.95rem;
            transition: var(--transition);
            background-color: var(--white);
        }

        input[type="text"]:hover,
        select:hover,
        textarea:hover {
            border-color: var(--gray-dark);
        }

        input[type="text"]:focus,
        select:focus,
        textarea:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(230, 74, 25, 0.2);
        }

        select {
            appearance: none;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='%238D99AE' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: right 1rem center;
            padding-right: 2.5rem;
        }

        .file-input-container {
            position: relative;
            overflow: hidden;
            display: inline-block;
            cursor: pointer;
        }

        .file-input-label {
            display: inline-flex;
            align-items: center;
            gap: 0.75rem;
            padding: 0.75rem 1.25rem;
            background-color: var(--primary);
            color: var(--white);
            border-radius: var(--border-radius);
            cursor: pointer;
            transition: var(--transition);
            font-weight: 500;
            box-shadow: var(--shadow-sm);
            font-size: 0.9rem;
        }

        .file-input-label:hover {
            background-color: var(--primary-dark);
            transform: translateY(-2px);
            box-shadow: var(--shadow);
        }

        input[type="file"] {
            position: absolute;
            left: 0;
            top: 0;
            opacity: 0;
            cursor: pointer;
        }

        .file-name {
            margin-left: 1rem;
            font-size: 0.9rem;
            color: var(--text-light);
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            background-color: var(--gray-light);
            padding: 0.5rem 1rem;
            border-radius: var(--border-radius);
            transition: var(--transition);
        }

        .file-name:hover {
            background-color: var(--gray);
        }

        .image-preview-container {
            margin-top: 1rem;
            border-radius: var(--border-radius);
            overflow: hidden;
            max-width: 400px;
            box-shadow: var(--shadow-sm);
            border: 1px solid var(--gray);
            transition: var(--transition);
        }

        .image-preview-container:hover {
            box-shadow: var(--shadow);
        }

        #imagePreview, #editImagePreview {
            max-width: 100%;
            max-height: 250px;
            display: none;
            object-fit: cover;
            width: 100%;
            transition: var(--transition);
        }

        .btn {
            padding: 0.75rem 1.5rem;
            background-color: var(--primary);
            color: var(--white);
            border: none;
            border-radius: var(--border-radius);
            cursor: pointer;
            font-size: 0.95rem;
            font-weight: 500;
            transition: var(--transition);
            display: inline-flex;
            align-items: center;
            gap: 0.75rem;
            box-shadow: var(--shadow-sm);
        }

        .btn:hover {
            background-color: var(--primary-dark);
            transform: translateY(-2px);
            box-shadow: var(--shadow);
        }

        .btn:active {
            transform: translateY(-1px);
        }

        .btn:disabled {
            opacity: 0.7;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .btn-secondary {
            background-color: var(--gray);
            color: var(--text-dark);
        }

        .btn-secondary:hover {
            background-color: var(--gray-dark);
        }

        .btn-danger {
            background-color: var(--error);
        }

        .btn-danger:hover {
            background-color: #b71c1c;
        }

        .btn-success {
            background-color: var(--success);
        }

        .btn-success:hover {
            background-color: #1b5e20;
        }

        .table-container {
            overflow-x: auto;
            border-radius: var(--border-radius-lg);
            box-shadow: var(--shadow);
            transition: var(--transition);
            border: 1px solid var(--gray);
            background-color: var(--white);
            max-height: 700px;
            overflow-y: auto;
        }

        .table-container:hover {
            box-shadow: var(--shadow-lg);
        }

        .posts-table {
            width: 100%;
            border-collapse: collapse;
            background-color: var(--white);
        }

        .posts-table th,
        .posts-table td {
            padding: 1.25rem;
            text-align: left;
        }

        .posts-table th {
            background-color: var(--primary);
            color: var(--white);
            font-weight: 600;
            white-space: nowrap;
            position: sticky;
            top: 0;
            z-index: 10;
            font-size: 0.9rem;
        }

        .posts-table th:first-child {
            border-top-left-radius: var(--border-radius);
        }

        .posts-table th:last-child {
            border-top-right-radius: var(--border-radius);
        }

        .posts-table tr {
            transition: var(--transition);
        }

        .posts-table tr:nth-child(even) {
            background-color: var(--gray-light);
        }

        .posts-table tr:hover {
            background-color: rgba(230, 74, 25, 0.05);
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.05);
        }

        .posts-table td {
            border-bottom: 1px solid var(--gray);
            font-size: 0.95rem;
        }

        .action-buttons {
            display: flex;
            gap: 0.5rem;
        }

        .btn-icon {
            width: 36px;
            height: 36px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            background-color: var(--white);
            color: var(--text-dark);
            border: 1px solid var(--gray);
            cursor: pointer;
            transition: var(--transition);
            font-size: 0.9rem;
        }

        .btn-icon:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow);
        }

        .btn-edit {
            color: var(--info);
            border-color: var(--info);
        }

        .btn-edit:hover {
            background-color: var(--info);
            color: var(--white);
            border-color: var(--info);
        }

        .btn-delete {
            color: var(--error);
            border-color: var(--error);
        }

        .btn-delete:hover {
            background-color: var(--error);
            color: var(--white);
            border-color: var(--error);
        }

        .btn-view {
            color: var(--success);
            border-color: var(--success);
        }

        .btn-view:hover {
            background-color: var(--success);
            color: var(--white);
            border-color: var(--success);
        }

        .alert {
            padding: 1rem;
            border-radius: var(--border-radius);
            margin-bottom: 1.5rem;
            display: none;
            animation: slideInDown 0.4s ease-in-out;
            display: flex;
            align-items: center;
            gap: 1rem;
            box-shadow: var(--shadow);
            transform: translateY(-5px);
            opacity: 0;
            position: relative;
            overflow: hidden;
        }

        .alert::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 4px;
            height: 100%;
        }

        .alert-success {
            background-color: rgba(46, 125, 50, 0.1);
            border: 1px solid rgba(46, 125, 50, 0.2);
            color: var(--success);
        }

        .alert-success::before {
            background-color: var(--success);
        }

        .alert-error {
            background-color: rgba(198, 40, 40, 0.1);
            border: 1px solid rgba(198, 40, 40, 0.2);
            color: var(--error);
        }

        .alert-error::before {
            background-color: var(--error);
        }

        .alert-close {
            margin-left: auto;
            background: none;
            border: none;
            cursor: pointer;
            color: inherit;
            font-size: 1.1rem;
            transition: var(--transition);
            width: 24px;
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
        }

        .alert-close:hover {
            background-color: rgba(0, 0, 0, 0.05);
            transform: rotate(90deg);
        }

        .spinner {
            display: inline-block;
            width: 18px;
            height: 18px;
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top-color: var(--white);
            animation: spin 1s ease-in-out infinite;
            display: none;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .loading-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 3rem;
            text-align: center;
        }

        .loading-spinner {
            width: 50px;
            height: 50px;
            border: 3px solid rgba(230, 74, 25, 0.1);
            border-radius: 50%;
            border-top-color: var(--primary);
            animation: spin 1s ease-in-out infinite;
            margin-bottom: 1.5rem;
        }

        .loading-text {
            color: var(--text-light);
            font-weight: 500;
            font-size: 1rem;
        }

        .empty-state {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 3rem;
            text-align: center;
            color: var(--text-light);
        }

        .empty-icon {
            font-size: 3rem;
            margin-bottom: 1.5rem;
            color: var(--gray-dark);
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.1); opacity: 0.8; }
            100% { transform: scale(1); opacity: 1; }
        }

        .empty-text {
            font-weight: 500;
            margin-bottom: 1.5rem;
            font-size: 1.1rem;
        }

        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0, 0, 0, 0.6);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            display: none;
            backdrop-filter: blur(5px);
            animation: fadeIn 0.3s ease-in-out;
        }

        .modal {
            background-color: var(--white);
            border-radius: var(--border-radius-lg);
            box-shadow: var(--shadow-lg);
            width: 90%;
            max-width: 800px;
            max-height: 90vh;
            overflow-y: auto;
            animation: zoomIn 0.4s ease-in-out;
            border: 1px solid var(--gray);
        }

        .modal-header {
            padding: 1.25rem 1.5rem;
            border-bottom: 1px solid var(--gray);
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky;
            top: 0;
            background-color: var(--white);
            z-index: 1;
            border-top-left-radius: var(--border-radius-lg);
            border-top-right-radius: var(--border-radius-lg);
        }

        .modal-title {
            font-size: 1.4rem;
            font-weight: 600;
            color: var(--primary-dark);
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .modal-close {
            background: none;
            border: none;
            font-size: 1.3rem;
            cursor: pointer;
            color: var(--text-light);
            transition: var(--transition);
            width: 36px;
            height: 36px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
        }

        .modal-close:hover {
            background-color: var(--gray-light);
            color: var(--error);
            transform: rotate(90deg);
        }

        .modal-body {
            padding: 1.5rem;
        }

        .modal-footer {
            padding: 1.25rem 1.5rem;
            border-top: 1px solid var(--gray);
            display: flex;
            justify-content: flex-end;
            gap: 1rem;
            position: sticky;
            bottom: 0;
            background-color: var(--white);
            z-index: 1;
            border-bottom-left-radius: var(--border-radius-lg);
            border-bottom-right-radius: var(--border-radius-lg);
        }

        footer {
            background-color: var(--primary-dark);
            color: var(--white);
            padding: 2.5rem 2rem;
            margin-top: auto;
        }

        .footer-content {
            max-width: 1400px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 2.5rem;
        }

        .footer-section h3 {
            font-size: 1.2rem;
            margin-bottom: 1.25rem;
            color: var(--white);
            font-weight: 600;
            position: relative;
            padding-bottom: 0.75rem;
        }

        .footer-section h3::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 40px;
            height: 3px;
            background-color: var(--white);
            border-radius: 2px;
        }

        .footer-links {
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
        }

        .footer-link {
            color: rgba(255, 255, 255, 0.8);
            text-decoration: none;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 0.4rem 0;
        }

        .footer-link:hover {
            color: var(--white);
            transform: translateX(5px);
        }

        .footer-bottom {
            text-align: center;
            padding-top: 2rem;
            margin-top: 2rem;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            color: rgba(255, 255, 255, 0.7);
            font-size: 0.9rem;
        }

        .sidebar-card {
            background-color: var(--white);
            border-radius: var(--border-radius-lg);
            box-shadow: var(--shadow);
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            border: 1px solid var(--gray);
            transition: var(--transition);
        }

        .sidebar-card:hover {
            box-shadow: var(--shadow-lg);
            transform: translateY(-3px);
        }

        .sidebar-title {
            font-size: 1.2rem;
            margin-bottom: 1.25rem;
            color: var(--primary-dark);
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 0.75rem;
            position: relative;
            padding-bottom: 0.75rem;
            border-bottom: 2px solid var(--gray);
        }

        .writing-tip {
            margin-bottom: 1rem;
            padding-left: 1.5rem;
            position: relative;
            font-size: 0.9rem;
            color: var(--text-dark);
            line-height: 1.7;
        }

        .writing-tip::before {
            content: '\f0eb';
            font-family: 'Font Awesome 5 Free';
            font-weight: 900;
            position: absolute;
            left: 0;
            top: 0;
            color: var(--primary);
        }

        .writing-tip:last-child {
            margin-bottom: 0;
        }

        .font-preview {
            margin-bottom: 1.25rem;
            padding: 1rem;
            border-radius: var(--border-radius);
            background-color: var(--gray-light);
            transition: var(--transition);
            cursor: pointer;
        }

        .font-preview:hover {
            background-color: var(--gray);
            transform: translateY(-2px);
        }

        .font-preview:last-child {
            margin-bottom: 0;
        }

        .font-name {
            font-weight: 600;
            margin-bottom: 0.5rem;
            color: var(--primary-dark);
            font-size: 0.9rem;
        }

        .font-sample {
            line-height: 1.6;
            font-size: 0.9rem;
        }

        .category-badge {
            display: inline-flex;
            align-items: center;
            padding: 0.3rem 0.8rem;
            border-radius: 50px;
            font-size: 0.8rem;
            font-weight: 500;
            gap: 0.4rem;
            transition: var(--transition);
            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
        }

        .category-badge:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);
        }

        .category-article {
            background-color: rgba(21, 101, 192, 0.1);
            color: var(--info);
            border: 1px solid rgba(21, 101, 192, 0.2);
        }

        .category-literary {
            background-color: rgba(166, 94, 68, 0.1);
            color: var(--accent);
            border: 1px solid rgba(166, 94, 68, 0.2);
        }

        .tooltip {
            position: relative;
        }

        .tooltip:hover::after {
            content: attr(data-tooltip);
            position: absolute;
            bottom: 125%;
            left: 50%;
            transform: translateX(-50%);
            background-color: var(--text-dark);
            color: var(--white);
            padding: 0.5rem 0.8rem;
            border-radius: var(--border-radius);
            font-size: 0.8rem;
            white-space: nowrap;
            z-index: 10;
            margin-bottom: 5px;
            box-shadow: var(--shadow);
        }

        .tooltip:hover::before {
            content: '';
            position: absolute;
            bottom: 125%;
            left: 50%;
            transform: translateX(-50%);
            border: 5px solid transparent;
            border-top-color: var(--text-dark);
            margin-bottom: -5px;
            animation: fadeIn 0.2s ease-in-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes zoomIn {
            from { 
                opacity: 0; 
                transform: scale(0.95);
            }
            to { 
                opacity: 1;
                transform: scale(1);
            }
        }

        @keyframes slideInDown {
            from { 
                opacity: 0; 
                transform: translateY(-20px);
            }
            to { 
                opacity: 1;
                transform: translateY(0);
            }
        }

        .tox-tinymce {
            border-radius: var(--border-radius) !important;
            border: 1px solid var(--gray) !important;
            transition: var(--transition) !important;
        }

        .tox-tinymce:hover {
            border-color: var(--gray-dark) !important;
        }

        .tox-tinymce:focus-within {
            border-color: var(--primary) !important;
            box-shadow: 0 0 0 3px rgba(230, 74, 25, 0.2) !important;
        }

        .tox .tox-statusbar {
            border-top: 1px solid var(--gray) !important;
        }

        .tox .tox-toolbar, .tox .tox-toolbar__overflow, .tox .tox-toolbar__primary {
            background-color: var(--white) !important;
        }

        @media (max-width: 1200px) {
            .dashboard-layout {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 992px) {
            .header-container {
                padding: 0.75rem 1.5rem;
            }
            
            main {
                padding: 0 1.5rem;
                margin: 1.5rem auto;
            }
            
            .card {
                padding: 1.5rem;
            }
        }

        @media (max-width: 768px) {
            .header-container {
                flex-direction: column;
                gap: 1rem;
                padding: 1rem;
            }

            .nav-links {
                width: 100%;
                justify-content: center;
                flex-wrap: wrap;
            }
            
            .mobile-menu-toggle {
                display: block;
                position: absolute;
                right: 1rem;
                top: 1.5rem;
            }
            
            .nav-links {
                display: none;
                flex-direction: column;
                width: 100%;
                padding: 1rem 0;
            }
            
            .nav-links.active {
                display: flex;
            }
            
            .nav-link {
                width: 100%;
                text-align: center;
                justify-content: center;
            }

            .tabs {
                flex-direction: column;
                gap: 0.5rem;
            }

            .footer-content {
                grid-template-columns: 1fr;
                text-align: center;
            }

            .footer-links {
                align-items: center;
            }

            .footer-section h3::after {
                left: 50%;
                transform: translateX(-50%);
            }

            .footer-link:hover {
                transform: none;
            }

            .modal {
                width: 95%;
                max-height: 80vh;
            }
            
            .modal-footer {
                flex-direction: column;
            }
            
            .modal-footer .btn {
                width: 100%;
                justify-content: center;
                margin-bottom: 0.5rem;
            }
            
            .modal-footer .btn:last-child {
                margin-bottom: 0;
            }
        }

        @media (max-width: 576px) {
            .page-title {
                font-size: 1.5rem;
            }
            
            main {
                padding: 0 1rem;
                margin: 1.5rem auto;
            }

            .card {
                padding: 1.25rem;
            }
            
            .card-title {
                font-size: 1.3rem;
            }

            .btn {
                width: 100%;
                justify-content: center;
            }
            
            .file-input-container, .file-name {
                width: 100%;
                margin-left: 0;
                margin-top: 0.5rem;
            }
            
            .file-input-label {
                width: 100%;
                justify-content: center;
            }
            
            .action-buttons {
                flex-wrap: wrap;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="header-container">
            <div class="logo-container">
                <img src="SILAKBO (1).png" alt="Silakbo Logo" class="logo-img">
                <a href="#" class="logo-text">ANG SILAKBO WORKSTATION</a>
            </div>
            <button class="mobile-menu-toggle" id="mobileMenuToggle">
                <i class="fas fa-bars"></i>
            </button>
            <nav>
                <div class="nav-links" id="navLinks">
                    <a href="#" class="nav-link active" id="nav-create">
                        <i class="fas fa-plus-circle"></i> Create Post
                    </a>
                    <a href="#" class="nav-link" id="nav-manage">
                        <i class="fas fa-tasks"></i> Manage Posts
                    </a>
                </div>
            </nav>
        </div>
    </header>

    <main>
        <h1 class="page-title">
            <i class="fas fa-newspaper"></i> Content Management System
        </h1>
        
        <div id="alertSuccess" class="alert alert-success">
            <i class="fas fa-check-circle"></i> 
            <span>Operation completed successfully!</span>
            <button class="alert-close">&times;</button>
        </div>
        <div id="alertError" class="alert alert-error">
            <i class="fas fa-exclamation-circle"></i> 
            <span id="errorMessage">An error occurred.</span>
            <button class="alert-close">&times;</button>
        </div>
        
        <div class="tabs-container">
            <div class="tabs">
                <button class="tab active" data-tab="create">
                    <i class="fas fa-plus-circle"></i> Create New Post
                </button>
                <button class="tab" data-tab="manage">
                    <i class="fas fa-tasks"></i> Manage Posts
                </button>
            </div>
        </div>

        <div class="tab-content active" id="createTab">
            <div class="dashboard-layout">
                <div class="main-content">
                    <div class="card">
                        <h2 class="card-title">
                            <i class="fas fa-pen-fancy"></i> Create a New Post
                        </h2>
                        <form id="postForm">
                            <div class="form-group">
                                <label for="category">
                                    <i class="fas fa-tag"></i> Category:
                                </label>
                                <select id="category" required>
                                    <option value="article">Article</option>
                                    <option value="literary">Literary</option>
                                </select>
                            </div>

                            <div class="form-group">
                                <label for="title">
                                    <i class="fas fa-heading"></i> Title:
                                </label>
                                <input type="text" id="title" required placeholder="Enter post title">
                            </div>

                            <div class="form-group">
                                <label for="author">
                                    <i class="fas fa-user-edit"></i> Author:
                                </label>
                                <input type="text" id="author" required placeholder="Enter author's name">
                            </div>

                            <div class="form-group" id="additionalFields">
                                <label id="roleLabel" for="additionalField">
                                    <i class="fas fa-camera"></i> Photojournalist:
                                </label>
                                <input type="text" id="additionalField" placeholder="Enter photojournalist's name">
                            </div>

                            <div class="form-group">
                                <label for="imageUpload">
                                    <i class="fas fa-image"></i> Upload Image:
                                </label>
                                <div class="file-input-container">
                                    <label class="file-input-label">
                                        <i class="fas fa-upload"></i> Choose File
                                        <input type="file" id="imageUpload" accept="image/*">
                                    </label>
                                    <span class="file-name" id="fileName">
                                        <i class="fas fa-file-image"></i> No file chosen
                                    </span>
                                </div>
                                <div class="image-preview-container">
                                    <img id="imagePreview" alt="Image Preview">
                                </div>
                            </div>

                            <div class="form-group">
                                <label for="content">
                                    <i class="fas fa-paragraph"></i> Content:
                                </label>
                                <textarea id="content"></textarea>
                            </div>

                            <button type="submit" class="btn" id="submitBtn">
                                <span class="spinner" id="submitSpinner"></span>
                                <i class="fas fa-paper-plane"></i> Publish Post
                            </button>
                        </form>
                    </div>
                </div>
                
                <div class="sidebar">
                    <div class="sidebar-card" id="writingTipsPanel">
                        <h3 class="sidebar-title">
                            <i class="fas fa-lightbulb"></i> Writing Tips
                        </h3>
                        <div id="writingTipsContent">
                            <!-- Tips will be loaded dynamically based on category -->
                        </div>
                    </div>
                    
                    <div class="sidebar-card">
                        <h3 class="sidebar-title">
                            <i class="fas fa-font"></i> Font Preview
                        </h3>
                        <div class="font-preview" data-font="Poppins" onclick="applyFont('Poppins')">
                            <div class="font-name">Poppins</div>
                            <div class="font-sample">The quick brown fox jumps over the lazy dog.</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="tab-content" id="manageTab">
            <div class="card">
                <h2 class="card-title">
                    <i class="fas fa-list-alt"></i> Manage Published Posts
                </h2>
                <div id="postsTableContainer">
                    <div id="loadingPosts" class="loading-container">
                        <div class="loading-spinner"></div>
                        <p class="loading-text">Loading posts...</p>
                    </div>
                    <div class="table-container" id="postsTable" style="display: none;">
                        <table class="posts-table">
                            <thead>
                                <tr>
                                    <th><i class="fas fa-tag"></i> Category</th>
                                    <th><i class="fas fa-heading"></i> Title</th>
                                    <th><i class="fas fa-user-edit"></i> Author</th>
                                    <th><i class="fas fa-user-tag"></i> Role</th>
                                    <th><i class="fas fa-calendar-alt"></i> Date</th>
                                    <th><i class="fas fa-cogs"></i> Actions</th>
                                </tr>
                            </thead>
                            <tbody id="postsTableBody">
                                <!-- Posts will be loaded here -->
                            </tbody>
                        </table>
                    </div>
                    <div id="noPostsMessage" class="empty-state" style="display: none;">
                        <i class="fas fa-inbox empty-icon"></i>
                        <p class="empty-text">No posts found.</p>
                        <button class="btn" id="createFirstPostBtn">
                            <i class="fas fa-plus-circle"></i> Create Your First Post
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <div class="modal-overlay" id="editModal">
        <div class="modal">
            <div class="modal-header">
                <h3 class="modal-title">
                    <i class="fas fa-edit"></i> Edit Post
                </h3>
                <button class="modal-close" id="closeEditModal">&times;</button>
            </div>
            <div class="modal-body">
                <form id="editForm">
                    <input type="hidden" id="editPostId">
                    <div class="form-group">
                        <label for="editCategory">
                            <i class="fas fa-tag"></i> Category:
                        </label>
                        <select id="editCategory" required>
                            <option value="article">Article</option>
                            <option value="literary">Literary</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="editTitle">
                            <i class="fas fa-heading"></i> Title:
                        </label>
                        <input type="text" id="editTitle" required placeholder="Enter post title">
                    </div>

                    <div class="form-group">
                        <label for="editAuthor">
                            <i class="fas fa-user-edit"></i> Author:
                        </label>
                        <input type="text" id="editAuthor" required placeholder="Enter author's name">
                    </div>

                    <div class="form-group" id="editAdditionalFields">
                        <label id="editRoleLabel" for="editAdditionalField">
                            <i class="fas fa-camera"></i> Photojournalist:
                        </label>
                        <input type="text" id="editAdditionalField" placeholder="Enter photojournalist's name">
                    </div>

                    <div class="form-group">
                        <label for="editImageUpload">
                            <i class="fas fa-image"></i> Upload New Image:
                        </label>
                        <div class="file-input-container">
                            <label class="file-input-label">
                                <i class="fas fa-upload"></i> Choose File
                                <input type="file" id="editImageUpload" accept="image/*">
                            </label>
                            <span class="file-name" id="editFileName">
                                <i class="fas fa-file-image"></i> No file chosen
                            </span>
                        </div>
                        <div class="image-preview-container">
                            <img id="editImagePreview" alt="Image Preview">
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="editContent">
                            <i class="fas fa-paragraph"></i> Content:
                        </label>
                        <textarea id="editContent"></textarea>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" id="cancelEditBtn">
                    <i class="fas fa-times"></i> Cancel
                </button>
                <button class="btn" id="saveEditBtn">
                    <span class="spinner" id="editSpinner"></span>
                    <i class="fas fa-save"></i> Save Changes
                </button>
            </div>
        </div>
    </div>

    <div class="modal-overlay" id="deleteModal">
        <div class="modal">
            <div class="modal-header">
                <h3 class="modal-title">
                    <i class="fas fa-trash-alt"></i> Confirm Deletion
                </h3>
                <button class="modal-close" id="closeDeleteModal">&times;</button>
            </div>
            <div class="modal-body">
                <div style="text-align: center; margin-bottom: 1.5rem;">
                    <i class="fas fa-exclamation-triangle" style="font-size: 3rem; color: var(--error);"></i>
                </div>
                <p style="text-align: center; font-size: 1.1rem; margin-bottom: 1.5rem;">Are you sure you want to delete this post?</p>
                <p style="text-align: center; color: var(--text-light);">This action cannot be undone.</p>
                <input type="hidden" id="deletePostId">
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" id="cancelDeleteBtn">
                    <i class="fas fa-times"></i> Cancel
                </button>
                <button class="btn btn-danger" id="confirmDeleteBtn">
                    <span class="spinner" id="deleteSpinner"></span>
                    <i class="fas fa-trash-alt"></i> Delete
                </button>
            </div>
        </div>
    </div>

    <div class="modal-overlay" id="viewModal">
        <div class="modal">
            <div class="modal-header">
                <h3 class="modal-title">
                    <i class="fas fa-eye"></i> View Post
                </h3>
                <button class="modal-close" id="closeViewModal">&times;</button>
            </div>
            <div class="modal-body">
                <div id="viewPostContent">
                    <!-- Post content will be loaded here -->
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" id="closeViewBtn">
                    <i class="fas fa-times"></i> Close
                </button>
                <button class="btn" id="editFromViewBtn">
                    <i class="fas fa-edit"></i> Edit Post
                </button>
            </div>
        </div>
    </div>

    <footer>
        <div class="footer-content">
            <div class="footer-section">
                <h3>About Us</h3>
                <p style="margin-bottom: 1.5rem; color: rgba(255, 255, 255, 0.8); line-height: 1.7;">
                    ANG SILAKBO WORKSTATION is a comprehensive content management system for publishing articles and literary works.
                </p>
            </div>
            <div class="footer-section">
                <h3>Quick Links</h3>
                <div class="footer-links">
                    <a href="#" class="footer-link"><i class="fas fa-home"></i> Home</a>
                    <a href="#" class="footer-link"><i class="fas fa-info-circle"></i> About</a>
                    <a href="#" class="footer-link"><i class="fas fa-envelope"></i> Contact</a>
                    <a href="#" class="footer-link"><i class="fas fa-shield-alt"></i> Privacy Policy</a>
                </div>
            </div>
            <div class="footer-section">
                <h3>Contact Us</h3>
                <div class="footer-links">
                    <a href="mailto:info@silakbo.com" class="footer-link"><i class="fas fa-envelope"></i> info@silakbo.com</a>
                    <a href="tel:+1234567890" class="footer-link"><i class="fas fa-phone"></i> +123 456 7890</a>
                    <a href="#" class="footer-link"><i class="fas fa-map-marker-alt"></i> Manila, Philippines</a>
                </div>
            </div>
        </div>
        <div class="footer-bottom">
            <p>&copy; <span id="currentYear"></span> ANG SILAKBO WORKSTATION. All rights reserved.</p>
        </div>
    </footer>

    <script>
        // Initialize Supabase
        const supabaseUrl = "https://uyxgsziyflquisckdwwc.supabase.co";
        const supabaseKey = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InV5eGdzeml5ZmxxdWlzY2tkd3djIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDE1OTQyODUsImV4cCI6MjA1NzE3MDI4NX0.DoIEoWWuajDpBhD2UwLYzrKRyZNyBP4izasROCdIbkk";
        const supabase = window.supabase.createClient(supabaseUrl, supabaseKey);

        // Writing Tips Data
        const writingTips = {
            article: [
                "Start with a compelling headline that grabs attention and summarizes your main point.",
                "Use the inverted pyramid structure: put the most important information first.",
                "Include relevant statistics and data to support your claims.",
                "Break up long paragraphs into shorter ones for better readability.",
                "Use subheadings to organize your content and guide readers through your article.",
                "Incorporate quotes from experts or relevant sources to add credibility.",
                "End with a strong conclusion that reinforces your main message."
            ],
            literary: [
                "Show, don't tell. Use descriptive language to create vivid imagery.",
                "Develop complex, multi-dimensional characters with unique voices.",
                "Experiment with different literary devices like metaphor, simile, and symbolism.",
                "Pay attention to rhythm and pacing in your narrative.",
                "Create a strong sense of setting that immerses readers in your world.",
                "Use dialogue to reveal character and advance the plot naturally.",
                "Revise and edit ruthlessly, focusing on language precision and emotional impact."
            ]
        };

        // Initialize TinyMCE for both editors
        document.addEventListener('DOMContentLoaded', function() {
            // Set current year in footer
            document.getElementById('currentYear').textContent = new Date().getFullYear();

            // Initialize TinyMCE for create form
            tinymce.init({
                selector: '#content',
                plugins: 'anchor autolink charmap codesample emoticons image link lists media searchreplace table visualblocks wordcount',
                toolbar: 'undo redo | blocks fontfamily fontsize | bold italic underline strikethrough | link image media table | align lineheight | numlist bullist indent outdent | emoticons charmap | removeformat',
                height: 400,
                menubar: false,
                statusbar: true,
                branding: false,
                promotion: false,
                skin: 'oxide',
                content_css: 'default',
                setup: function(editor) {
                    editor.on('init', function() {
                        updateWritingTips('article'); // Default to article tips
                    });
                }
            });

            // Initialize TinyMCE for edit form
            tinymce.init({
                selector: '#editContent',
                plugins: 'anchor autolink charmap codesample emoticons image link lists media searchreplace table visualblocks wordcount',
                toolbar: 'undo redo | blocks fontfamily fontsize | bold italic underline strikethrough | link image media table | align lineheight | numlist bullist indent outdent | emoticons charmap | removeformat',
                height: 400,
                menubar: false,
                statusbar: true,
                branding: false,
                promotion: false,
                skin: 'oxide',
                content_css: 'default'
            });

            // Load posts when the page loads
            loadPosts();
            
            // Initialize writing tips
            updateWritingTips('article');
            
            // Initialize category change event
            document.getElementById('category').addEventListener('change', function() {
                let label = document.getElementById('roleLabel');
                let additionalField = document.getElementById('additionalField');
                
                if (this.value === 'article') {
                    label.innerHTML = '<i class="fas fa-camera"></i> Photojournalist:';
                    additionalField.placeholder = "Enter photojournalist's name";
                } else {
                    label.innerHTML = '<i class="fas fa-paint-brush"></i> Cartoonist:';
                    additionalField.placeholder = "Enter cartoonist's name";
                }
                
                // Update writing tips
                updateWritingTips(this.value);
            });
        });

        // Update writing tips based on category
        function updateWritingTips(category) {
            const tipsContainer = document.getElementById('writingTipsContent');
            tipsContainer.innerHTML = '';
            
            const tips = writingTips[category] || writingTips.article;
            
            tips.forEach(tip => {
                const tipElement = document.createElement('div');
                tipElement.className = 'writing-tip';
                tipElement.textContent = tip;
                tipsContainer.appendChild(tipElement);
            });
        }

        // Apply font to TinyMCE editor
        function applyFont(fontFamily) {
            const editor = tinymce.get('content');
            if (editor) {
                editor.execCommand('fontName', false, fontFamily);
                showAlert('success', `Font "${fontFamily}" applied to selected text`);
            }
        }

        // Initialize navigation elements
        let tabs, tabContents;
        const navLinksElements = document.querySelectorAll('.nav-link');

        document.addEventListener('DOMContentLoaded', () => {
            // Get navigation elements
            tabs = document.querySelectorAll('.tab');
            tabContents = document.querySelectorAll('.tab-content');
            const navLinks = document.querySelectorAll('.nav-link');

            // Tab Navigation
            tabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    const tabId = tab.getAttribute('data-tab');
                    
                    // Update tabs
                    tabs.forEach(t => t.classList.remove('active'));
                    tab.classList.add('active');
                    
                    // Update tab contents
                    tabContents.forEach(content => content.classList.remove('active'));
                    document.getElementById(`${tabId}Tab`).classList.add('active');
                    
                    // Update nav links
                    navLinks.forEach(link => link.classList.remove('active'));
                    document.getElementById(`nav-${tabId}`).classList.add('active');

                    // If switching to manage tab, refresh the posts
                    if (tabId === 'manage') {
                        loadPosts();
                    }
                    
                    // Close mobile menu if open
                    const navLinksMenu = document.getElementById('navLinks');
                    if (navLinksMenu.classList.contains('active')) {
                        navLinksMenu.classList.remove('active');
                        document.getElementById('mobileMenuToggle').innerHTML = '<i class="fas fa-bars"></i>';
                    }
                });
            });

            // Nav Links
            navLinksElements.forEach(link => {
                link.addEventListener('click', (e) => {
                    e.preventDefault();
                    const tabId = link.id.replace('nav-', '');
                    
                    // Update nav links
                    navLinks.forEach(l => l.classList.remove('active'));
                    link.classList.add('active');
                    
                    // Update tabs
                    tabs.forEach(tab => {
                        if (tab.getAttribute('data-tab') === tabId) {
                            tab.click();
                        }
                    });
                    
                    // Close mobile menu if open
                    const navLinksMenu = document.getElementById('navLinks');
                    if (navLinksMenu.classList.contains('active')) {
                        navLinksMenu.classList.remove('active');
                        document.getElementById('mobileMenuToggle').innerHTML = '<i class="fas fa-bars"></i>';
                    }
                });
            });

            // Create first post button
            const createFirstPostBtn = document.getElementById('createFirstPostBtn');
            if (createFirstPostBtn) {
                createFirstPostBtn.addEventListener('click', () => {
                    document.getElementById('nav-create').click();
                });
            }

            // Mobile Menu Toggle
            const mobileMenuToggle = document.getElementById('mobileMenuToggle');
            if (mobileMenuToggle) {
                mobileMenuToggle.addEventListener('click', function() {
                    const navLinksMenu = document.getElementById('navLinks');
                    navLinksMenu.classList.toggle('active');
                    this.innerHTML = navLinksMenu.classList.contains('active') ? 
                        '<i class="fas fa-times"></i>' : '<i class="fas fa-bars"></i>';
                });
            }
        });

        // Update edit role label when category changes
        document.getElementById('editCategory').addEventListener('change', function() {
            let label = document.getElementById('editRoleLabel');
            let additionalField = document.getElementById('editAdditionalField');
            
            if (this.value === 'article') {
                label.innerHTML = '<i class="fas fa-camera"></i> Photojournalist:';
                additionalField.placeholder = "Enter photojournalist's name";
            } else {
                label.innerHTML = '<i class="fas fa-paint-brush"></i> Cartoonist:';
                additionalField.placeholder = "Enter cartoonist's name";
            }
        });

        // Image Preview Feature
        document.getElementById('imageUpload').addEventListener('change', function(event) {
            const file = event.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    const imgPreview = document.getElementById('imagePreview');
                    imgPreview.src = e.target.result;
                    imgPreview.style.display = 'block';
                    document.getElementById('fileName').innerHTML = '<i class="fas fa-file-image"></i> ' + file.name;
                };
                reader.readAsDataURL(file);
            }
        });

        // Edit Image Preview Feature
        document.getElementById('editImageUpload').addEventListener('change', function(event) {
            const file = event.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    const imgPreview = document.getElementById('editImagePreview');
                    imgPreview.src = e.target.result;
                    imgPreview.style.display = 'block';
                    document.getElementById('editFileName').innerHTML = '<i class="fas fa-file-image"></i> ' + file.name;
                };
                reader.readAsDataURL(file);
            }
        });

        // Handle form submission
        document.getElementById('postForm').addEventListener('submit', async function(event) {
            event.preventDefault();
            
            // Show spinner
            const submitBtn = document.getElementById('submitBtn');
            const submitSpinner = document.getElementById('submitSpinner');
            submitBtn.disabled = true;
            submitSpinner.style.display = 'inline-block';
            
            try {
                const category = document.getElementById('category').value;
                const title = document.getElementById('title').value;
                const author = document.getElementById('author').value;
                const role = document.getElementById('additionalField').value;
                const content = tinymce.get('content').getContent();
                const imageFile = document.getElementById('imageUpload').files[0];
                
                let imageUrl = '';
                if (imageFile) {
                    const formData = new FormData();
                    formData.append("file", imageFile);
                    formData.append("upload_preset", "Ang Silakbo");
                    
                    const response = await fetch("https://api.cloudinary.com/v1_1/ddalveuw6/image/upload", {
                        method: "POST",
                        body: formData
                    });

                    const data = await response.json();
                    if (data.error) {
                        throw new Error(data.error.message);
                    }
                    imageUrl = data.secure_url;
                }

                const { data, error } = await supabase
                    .from("posts")
                    .insert([{ 
                        category, 
                        title,
                        author, 
                        role, 
                        content, 
                        image_url: imageUrl,
                        created_at: new Date().toISOString()
                    }]);
                
                if (error) {
                    throw new Error(error.message);
                }

                // Show success message
                showAlert('success', 'Post created successfully!');
                
                // Reset form
                document.getElementById('postForm').reset();
                tinymce.get('content').setContent('');
                document.getElementById('imagePreview').style.display = 'none';
                document.getElementById('fileName').innerHTML = '<i class="fas fa-file-image"></i> No file chosen';
                
                // Refresh posts list if on manage tab
                if (document.getElementById('manageTab').classList.contains('active')) {
                    loadPosts();
                }
            } catch (error) {
                console.error("Error saving post:", error);
                showAlert('error', error.message || 'Error creating post. Please try again.');
            } finally {
                // Hide spinner
                submitBtn.disabled = false;
                submitSpinner.style.display = 'none';
            }
        });

        // Load posts from Supabase
        async function loadPosts() {
            const loadingElement = document.getElementById('loadingPosts');
            const tableElement = document.getElementById('postsTable');
            const noPostsMessage = document.getElementById('noPostsMessage');
            
            loadingElement.style.display = 'flex';
            tableElement.style.display = 'none';
            noPostsMessage.style.display = 'none';
            
            try {
                const { data, error } = await supabase
                    .from('posts')
                    .select('*')
                    .order('created_at', { ascending: false });
                
                if (error) {
                    throw new Error(error.message);
                }
                
                const tableBody = document.getElementById('postsTableBody');
                tableBody.innerHTML = '';
                
                if (data && data.length > 0) {
                    data.forEach(post => {
                        const row = document.createElement('tr');
                        
                        // Format date
                        const date = new Date(post.created_at);
                        const formattedDate = date.toLocaleDateString() + ' ' + date.toLocaleTimeString();
                        
                        // Category badge
                        const categoryClass = post.category === 'article' ? 'category-article' : 'category-literary';
                        const categoryIcon = post.category === 'article' ? 'newspaper' : 'book';
                        
                        row.innerHTML = `
                            <td>
                                <span class="category-badge ${categoryClass}">
                                    <i class="fas fa-${categoryIcon}"></i> ${post.category.charAt(0).toUpperCase() + post.category.slice(1)}
                                </span>
                            </td>
                            <td>${post.title || 'Untitled'}</td>
                            <td>${post.author}</td>
                            <td>${post.role || '-'}</td>
                            <td><i class="far fa-clock"></i> ${formattedDate}</td>
                            <td>
                                <div class="action-buttons">
                                    <button class="btn-icon btn-view tooltip" data-id="${post.id}" data-tooltip="View Post">
                                        <i class="fas fa-eye"></i>
                                    </button>
                                    <button class="btn-icon btn-edit tooltip" data-id="${post.id}" data-tooltip="Edit Post">
                                        <i class="fas fa-edit"></i>
                                    </button>
                                    <button class="btn-icon btn-delete tooltip" data-id="${post.id}" data-tooltip="Delete Post">
                                        <i class="fas fa-trash-alt"></i>
                                    </button>
                                </div>
                            </td>
                        `;
                        
                        tableBody.appendChild(row);
                    });
                    
                    tableElement.style.display = 'block';
                    
                    // Add event listeners to view, edit and delete buttons
                    document.querySelectorAll('.btn-view').forEach(button => {
                        button.addEventListener('click', () => openViewModal(button.getAttribute('data-id')));
                    });
                    
                    document.querySelectorAll('.btn-edit').forEach(button => {
                        button.addEventListener('click', () => openEditModal(button.getAttribute('data-id')));
                    });
                    
                    document.querySelectorAll('.btn-delete').forEach(button => {
                        button.addEventListener('click', () => openDeleteModal(button.getAttribute('data-id')));
                    });
                } else {
                    noPostsMessage.style.display = 'flex';
                }
            } catch (error) {
                console.error("Error loading posts:", error);
                showAlert('error', error.message || 'Error loading posts. Please try again.');
            } finally {
                loadingElement.style.display = 'none';
            }
        }

        // Open view modal
        async function openViewModal(postId) {
            try {
                const { data, error } = await supabase
                    .from('posts')
                    .select('*')
                    .eq('id', postId)
                    .single();
                
                if (error) {
                    throw new Error(error.message);
                }
                
                if (data) {
                    const viewContent = document.getElementById('viewPostContent');
                    
                    // Format date
                    const date = new Date(data.created_at);
                    const formattedDate = date.toLocaleDateString() + ' ' + date.toLocaleTimeString();
                    
                    // Category badge
                    const categoryClass = data.category === 'article' ? 'category-article' : 'category-literary';
                    const categoryIcon = data.category === 'article' ? 'newspaper' : 'book';
                    
                    let html = `
                        <div style="margin-bottom: 1.5rem;">
                            <span class="category-badge ${categoryClass}">
                                <i class="fas fa-${categoryIcon}"></i> ${data.category.charAt(0).toUpperCase() + data.category.slice(1)}
                            </span>
                        </div>
                        
                        <h2 style="font-size: 1.8rem; margin-bottom: 1.5rem; color: var(--primary-dark); font-weight: 600;">
                            ${data.title || 'Untitled'}
                        </h2>
                    `;
                    
                    if (data.image_url) {
                        html += `
                            <div style="margin-bottom: 1.5rem; text-align: center;">
                                <img src="${data.image_url}" alt="Post Image" style="max-width: 100%; border-radius: var(--border-radius); box-shadow: var(--shadow);">
                            </div>
                        `;
                    }
                    
                    html += `
                        <div style="margin-bottom: 1.5rem;">
                            <div style="display: flex; align-items: center; gap: 0.5rem; margin-bottom: 0.75rem;">
                                <i class="fas fa-user-edit" style="color: var(--primary);"></i>
                                <strong>Author:</strong> ${data.author}
                            </div>
                            
                            <div style="display: flex; align-items: center; gap: 0.5rem; margin-bottom: 0.75rem;">
                                <i class="fas fa-${data.category === 'article' ? 'camera' : 'paint-brush'}" style="color: var(--primary);"></i>
                                <strong>${data.category === 'article' ? 'Photojournalist' : 'Cartoonist'}:</strong> ${data.role || '-'}
                            </div>
                            
                            <div style="display: flex; align-items: center; gap: 0.5rem; margin-bottom: 1.5rem;">
                                <i class="far fa-clock" style="color: var(--primary);"></i>
                                <strong>Published:</strong> ${formattedDate}
                            </div>
                        </div>
                        
                        <div style="border-top: 1px solid var(--gray); padding-top: 1.5rem;">
                            ${data.content}
                        </div>
                    `;
                    
                    viewContent.innerHTML = html;
                    
                    // Store post ID for edit button
                    document.getElementById('editFromViewBtn').setAttribute('data-id', postId);
                    
                    // Show modal
                    document.getElementById('viewModal').style.display = 'flex';
                }
            } catch (error) {
                console.error("Error loading post for view:", error);
                showAlert('error', error.message || 'Error loading post. Please try again.');
            }
        }

        // Open edit modal
        async function openEditModal(postId) {
            try {
                const { data, error } = await supabase
                    .from('posts')
                    .select('*')
                    .eq('id', postId)
                    .single();
                
                if (error) {
                    throw new Error(error.message);
                }
                
                if (data) {
                    document.getElementById('editPostId').value = data.id;
                    document.getElementById('editCategory').value = data.category;
                    document.getElementById('editTitle').value = data.title || '';
                    document.getElementById('editAuthor').value = data.author;
                    document.getElementById('editAdditionalField').value = data.role || '';
                    
                    // Update role label based on category
                    let label = document.getElementById('editRoleLabel');
                    let additionalField = document.getElementById('editAdditionalField');
                    if (data.category === 'article') {
                        label.innerHTML = '<i class="fas fa-camera"></i> Photojournalist:';
                        additionalField.placeholder = "Enter photojournalist's name";
                    } else {
                        label.innerHTML = '<i class="fas fa-paint-brush"></i> Cartoonist:';
                        additionalField.placeholder = "Enter cartoonist's name";
                    }
                    
                    // Set content in TinyMCE
                    tinymce.get('editContent').setContent(data.content || '');
                    
                    // Show image preview if available
                    const imgPreview = document.getElementById('editImagePreview');
                    if (data.image_url) {
                        imgPreview.src = data.image_url;
                        imgPreview.style.display = 'block';
                    } else {
                        imgPreview.style.display = 'none';
                    }
                    
                    // Reset file name
                    document.getElementById('editFileName').innerHTML = '<i class="fas fa-file-image"></i> No file chosen';
                    
                    // Show modal
                    document.getElementById('editModal').style.display = 'flex';
                }
            } catch (error) {
                console.error("Error loading post for edit:", error);
                showAlert('error', error.message || 'Error loading post. Please try again.');
            }
        }

        // Handle edit form submission
        document.getElementById('saveEditBtn').addEventListener('click', async function() {
            // Show spinner
            const saveBtn = document.getElementById('saveEditBtn');
            const editSpinner = document.getElementById('editSpinner');
            saveBtn.disabled = true;
            editSpinner.style.display = 'inline-block';
            
            try {
                const postId = document.getElementById('editPostId').value;
                const category = document.getElementById('editCategory').value;
                const title = document.getElementById('editTitle').value;
                const author = document.getElementById('editAuthor').value;
                const role = document.getElementById('editAdditionalField').value;
                const content = tinymce.get('editContent').getContent();
                const imageFile = document.getElementById('editImageUpload').files[0];
                
                let updateData = { 
                    category, 
                    title,
                    author, 
                    role, 
                    content,
                    updated_at: new Date().toISOString()
                };
                
                // Upload new image if selected
                if (imageFile) {
                    const formData = new FormData();
                    formData.append("file", imageFile);
                    formData.append("upload_preset", "Ang Silakbo");
                    
                    const response = await fetch("https://api.cloudinary.com/v1_1/ddalveuw6/image/upload", {
                        method: "POST",
                        body: formData
                    });

                    const data = await response.json();
                    if (data.error) {
                        throw new Error(data.error.message);
                    }
                    updateData.image_url = data.secure_url;
                }

                const { error } = await supabase
                    .from("posts")
                    .update(updateData)
                    .eq('id', postId);
                
                if (error) {
                    throw new Error(error.message);
                }

                // Show success message
                showAlert('success', 'Post updated successfully!');
                
                // Close modal
                document.getElementById('editModal').style.display = 'none';
                
                // Refresh posts list
                loadPosts();
            } catch (error) {
                console.error("Error updating post:", error);
                showAlert('error', error.message || 'Error updating post. Please try again.');
            } finally {
                // Hide spinner
                saveBtn.disabled = false;
                editSpinner.style.display = 'none';
            }
        });

        // Open delete modal
        function openDeleteModal(postId) {
            document.getElementById('deletePostId').value = postId;
            document.getElementById('deleteModal').style.display = 'flex';
        }

        // Handle delete confirmation
        document.getElementById('confirmDeleteBtn').addEventListener('click', async function() {
            // Show spinner
            const deleteBtn = document.getElementById('confirmDeleteBtn');
            const deleteSpinner = document.getElementById('deleteSpinner');
            deleteBtn.disabled = true;
            deleteSpinner.style.display = 'inline-block';
            
            try {
                const postId = document.getElementById('deletePostId').value;
                
                const { error } = await supabase
                    .from("posts")
                    .delete()
                    .eq('id', postId);
                
                if (error) {
                    throw new Error(error.message);
                }

                // Show success message
                showAlert('success', 'Post deleted successfully!');
                
                // Close modal
                document.getElementById('deleteModal').style.display = 'none';
                
                // Refresh posts list
                loadPosts();
            } catch (error) {
                console.error("Error deleting post:", error);
                showAlert('error', error.message || 'Error deleting post. Please try again.');
            } finally {
                // Hide spinner
                deleteBtn.disabled = false;
                deleteSpinner.style.display = 'none';
            }
        });

        // Edit from view modal
        document.getElementById('editFromViewBtn').addEventListener('click', function() {
            const postId = this.getAttribute('data-id');
            document.getElementById('viewModal').style.display = 'none';
            openEditModal(postId);
        });

        // Close modals
        document.getElementById('closeEditModal').addEventListener('click', () => {
            document.getElementById('editModal').style.display = 'none';
        });
        
        document.getElementById('cancelEditBtn').addEventListener('click', () => {
            document.getElementById('editModal').style.display = 'none';
        });
        
        document.getElementById('closeDeleteModal').addEventListener('click', () => {
            document.getElementById('deleteModal').style.display = 'none';
        });
        
        document.getElementById('cancelDeleteBtn').addEventListener('click', () => {
            document.getElementById('deleteModal').style.display = 'none';
        });
        
        document.getElementById('closeViewModal').addEventListener('click', () => {
            document.getElementById('viewModal').style.display = 'none';
        });
        
        document.getElementById('closeViewBtn').addEventListener('click', () => {
            document.getElementById('viewModal').style.display = 'none';
        });

        // Show alert message
        function showAlert(type, message) {
            const alertSuccess = document.getElementById('alertSuccess');
            const alertError = document.getElementById('alertError');
            const errorMessage = document.getElementById('errorMessage');
            
            if (type === 'success') {
                alertSuccess.querySelector('span').textContent = message;
                alertSuccess.style.display = 'flex';
                alertSuccess.style.opacity = '1';
                alertSuccess.style.transform = 'translateY(0)';
                alertError.style.display = 'none';
                
                setTimeout(() => {
                    alertSuccess.style.opacity = '0';
                    alertSuccess.style.transform = 'translateY(-5px)';
                    setTimeout(() => {
                        alertSuccess.style.display = 'none';
                    }, 300);
                }, 5000);
            } else {
                errorMessage.textContent = message;
                alertError.style.display = 'flex';
                alertError.style.opacity = '1';
                alertError.style.transform = 'translateY(0)';
                alertSuccess.style.display = 'none';
                
                setTimeout(() => {
                    alertError.style.opacity = '0';
                    alertError.style.transform = 'translateY(-5px)';
                    setTimeout(() => {
                        alertError.style.display = 'none';
                    }, 300);
                }, 5000);
            }
        }

        // Close alert when clicked
        document.querySelectorAll('.alert-close').forEach(button => {
            button.addEventListener('click', function() {
                const alert = this.parentElement;
                alert.style.opacity = '0';
                alert.style.transform = 'translateY(-5px)';
                setTimeout(() => {
                    alert.style.display = 'none';
                }, 300);
            });
        });
    </script>
</body>
</html>
