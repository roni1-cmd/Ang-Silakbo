<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ang Silakbo â€¢ The Official Publication of UCLM-SHS</title>
<link rel="icon" href="SILAKBO (1).png">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<!-- Journalism-focused font selection -->
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,500;0,600;0,700;0,800;0,900;1,400;1,500;1,600;1,700&family=Merriweather:ital,wght@0,300;0,400;0,700;0,900;1,300;1,400;1,700&family=Source+Sans+Pro:ital,wght@0,300;0,400;0,600;0,700;1,400&display=swap" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
<link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
<style>
    :root {
        /* Orange journalism color palette */
        --primary: #121212;
        --primary-light: #2A2A2A;
        --primary-dark: #000000;
        --secondary: #FF6B00; /* Main orange */
        --secondary-light: #FF8A3D;
        --secondary-dark: #E05A00;
        --text-dark: #121212;
        --text-light: #5F5F5F;
        --background: #FFFFFF;
        --white: #FFFFFF;
        --gray-light: #F5F5F5;
        --gray: #E0E0E0;
        --accent: #1976D2;
        --accent-light: #63A4FF;
        --success: #4CAF50;
        --success-light: #E8F5E9;
        --modal-bg: rgba(0, 0, 0, 0.85);
        --animation-duration: 0.3s;
        
        /* Category colors */
        --feature-color: #FF6B00;
        --feature-light: rgba(255, 107, 0, 0.1);
        --feature-border: rgba(255, 107, 0, 0.2);
        --silak-color: #6A1B9A;
        --silak-light: rgba(106, 27, 154, 0.1);
        --silak-border: rgba(106, 27, 154, 0.2);
        --photostory-color: #00796B;
        --photostory-light: rgba(0, 121, 107, 0.1);
        --photostory-border: rgba(0, 121, 107, 0.2);
        --literary-color: #C2185B;
        --literary-light: rgba(194, 24, 91, 0.1);
        --literary-border: rgba(194, 24, 91, 0.2);
        
        /* Newspaper-style font families */
        --headline-font: 'Playfair Display', serif;
        --body-font: 'Source Sans Pro', sans-serif;
        --article-font: 'Merriweather', serif;
        
        /* Skeleton loading colors */
        --skeleton-base: #E9ECEF;
        --skeleton-highlight: #F8F9FA;
    }

    * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
    }

    body {
        font-family: var(--article-font);
        background-color: var(--background);
        color: var(--text-dark);
        line-height: 1.6;
        padding: 0;
        margin: 0;
        overflow-x: hidden;
    }

    ::-webkit-scrollbar {
        width: 8px;
        height: 8px;
    }

    ::-webkit-scrollbar-track {
        background: var(--background);
        border-radius: 0;
    }

    ::-webkit-scrollbar-thumb {
        background: var(--gray);
        border-radius: 0;
        border: 2px solid var(--background);
    }

    ::-webkit-scrollbar-thumb:hover {
        background: var(--text-light);
    }

    /* ===== HEADER STYLES ===== */
    .top-bar {
        background-color: var(--primary);
        color: white;
        padding: 0.5rem 0;
        font-size: 0.85rem;
        font-family: var(--body-font);
    }

    .top-bar-container {
        max-width: 1400px;
        margin: 0 auto;
        padding: 0 1.5rem;
        display: flex;
        justify-content: space-between;
        align-items: center;
    }

    .top-bar-left {
        display: flex;
        align-items: center;
        gap: 1.5rem;
    }

    .current-date {
        font-weight: 500;
        text-transform: uppercase;
        letter-spacing: 1px;
        font-size: 0.75rem;
    }

    .top-bar-right {
        display: flex;
        align-items: center;
        gap: 1.5rem;
    }

    .social-links-mini {
        display: flex;
        gap: 1rem;
    }

    .social-link-mini {
        color: white;
        text-decoration: none;
        font-size: 0.9rem;
        transition: opacity 0.3s;
    }

    .social-link-mini:hover {
        opacity: 0.8;
    }

    .header-main {
        background-color: var(--white);
        padding: 1.5rem 0;
        border-bottom: 3px double var(--gray); /* Newspaper style border */
    }

    .header-container {
        max-width: 1400px;
        margin: 0 auto;
        padding: 0 1.5rem;
        display: flex;
        justify-content: space-between;
        align-items: center;
    }

    .masthead {
        display: flex;
        flex-direction: column;
        align-items: center;
        text-align: center;
    }

    .logo-container {
        display: flex;
        align-items: center;
        gap: 1rem;
    }

    .logo-img {
        height: 60px;
        width: auto;
    }

    .publication-name {
        font-family: var(--headline-font);
        font-size: 3.5rem;
        font-weight: 900;
        color: var(--primary);
        text-decoration: none;
        letter-spacing: -0.5px;
        line-height: 1;
        margin-bottom: 0.5rem;
        text-transform: uppercase;
    }

    .publication-tagline {
        font-family: var(--body-font);
        font-size: 0.9rem;
        color: var(--text-light);
        font-style: italic;
        letter-spacing: 1px;
        text-transform: uppercase;
        border-top: 1px solid var(--gray);
        border-bottom: 1px solid var(--gray);
        padding: 0.3rem 0;
        margin-top: 0.5rem;
    }

    .header-actions {
        display: flex;
        align-items: center;
        gap: 1.5rem;
    }

    .subscribe-btn {
        background-color: var(--secondary);
        color: white;
        border: none;
        padding: 0.6rem 1.2rem;
        font-family: var(--body-font);
        font-weight: 600;
        font-size: 0.9rem;
        cursor: pointer;
        transition: all 0.3s;
        border-radius: 0;
        text-transform: uppercase;
        letter-spacing: 0.5px;
    }

    .subscribe-btn:hover {
        background-color: var(--secondary-dark);
        transform: translateY(-2px);
        box-shadow: 0 4px 8px rgba(224, 90, 0, 0.2);
    }

    .search-toggle {
        background: none;
        border: none;
        color: var(--text-dark);
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: transform 0.3s;
    }

    .search-toggle:hover {
        transform: scale(1.1);
    }

    .search-toggle svg {
        width: 20px;
        height: 20px;
    }

    .nav-main {
        background-color: var(--white);
        border-bottom: 1px solid var(--gray);
        position: sticky;
        top: 0;
        z-index: 100;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
    }

    .nav-container {
        max-width: 1400px;
        margin: 0 auto;
        padding: 0;
        display: flex;
        justify-content: space-between;
        align-items: center;
    }

    .nav-list {
        display: flex;
        list-style: none;
        margin: 0;
        padding: 0;
        width: 100%;
        justify-content: center;
    }

    .nav-item {
        position: relative;
    }

    .nav-link {
        display: block;
        padding: 1rem 1.5rem;
        color: var(--text-dark);
        text-decoration: none;
        font-weight: 500;
        font-size: 0.95rem;
        text-transform: uppercase;
        letter-spacing: 0.5px;
        transition: all 0.3s;
        font-family: var(--body-font);
    }

    .nav-link:hover {
        color: var(--secondary);
    }

    .nav-link.active {
        color: var(--secondary);
        font-weight: 600;
    }

    .nav-link.active::after {
        content: '';
        position: absolute;
        bottom: 0;
        left: 0;
        width: 100%;
        height: 3px;
        background-color: var(--secondary);
        transform: scaleX(1);
        transition: transform 0.3s;
    }

    .nav-link:not(.active)::after {
        content: '';
        position: absolute;
        bottom: 0;
        left: 0;
        width: 100%;
        height: 3px;
        background-color: var(--secondary);
        transform: scaleX(0);
        transition: transform 0.3s;
    }

    .nav-link:hover::after {
        transform: scaleX(1);
    }

    .mobile-menu-btn {
        display: none;
        background: none;
        border: none;
        color: var(--text-dark);
        cursor: pointer;
        padding: 0.5rem;
    }

    .mobile-menu-btn svg {
        width: 24px;
        height: 24px;
    }

    /* ===== SEARCH OVERLAY ===== */
    .search-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.9);
        z-index: 1000;
        display: none;
        justify-content: center;
        align-items: center;
        opacity: 0;
        transition: opacity 0.3s ease;
    }

    .search-overlay.active {
        display: flex;
        opacity: 1;
    }

    .search-form {
        width: 80%;
        max-width: 800px;
        position: relative;
    }

    .search-input {
        width: 100%;
        padding: 1.5rem 2rem;
        font-size: 1.5rem;
        border: none;
        border-bottom: 2px solid var(--secondary);
        background: transparent;
        font-family: var(--body-font);
        color: white;
        border-radius: 0;
    }

    .search-input:focus {
        outline: none;
    }

    .search-input::placeholder {
        color: rgba(255, 255, 255, 0.7);
    }

    .search-submit {
        position: absolute;
        right: 0;
        top: 50%;
        transform: translateY(-50%);
        background: none;
        border: none;
        color: var(--secondary);
        cursor: pointer;
        font-size: 1.5rem;
    }

    .search-close {
        position: absolute;
        top: 2rem;
        right: 2rem;
        background: none;
        border: none;
        color: white;
        font-size: 2rem;
        cursor: pointer;
        transition: transform 0.3s;
    }

    .search-close:hover {
        transform: rotate(90deg);
    }

    /* ===== MAIN CONTENT STYLES ===== */
    .main-content {
        padding: 2rem 0;
    }

    .container {
        max-width: 1400px;
        margin: 0 auto;
        padding: 0 1.5rem;
    }

    /* Breaking news banner */
    .breaking-news {
        background-color: var(--secondary);
        color: white;
        padding: 0.8rem 1.5rem;
        margin-bottom: 2rem;
        display: flex;
        align-items: center;
        gap: 1rem;
        border-radius: 0;
        box-shadow: 0 4px 12px rgba(255, 107, 0, 0.2);
    }

    .breaking-label {
        font-weight: 700;
        text-transform: uppercase;
        letter-spacing: 1px;
        padding: 0.3rem 0.8rem;
        background-color: white;
        color: var(--secondary);
        border-radius: 0;
        font-size: 0.8rem;
    }

    .breaking-title {
        font-weight: 500;
        flex-grow: 1;
    }

    /* Hero section - Newspaper style */
    .hero-section {
        margin-bottom: 3rem;
        display: grid;
        grid-template-columns: 2fr 1fr;
        gap: 2rem;
        border-bottom: 3px double var(--gray); /* Newspaper style border */
        padding-bottom: 2rem;
    }

    .main-story {
        position: relative;
        overflow: hidden;
        border-bottom: none;
        padding-bottom: 2rem;
        cursor: pointer;
        transition: transform 0.3s;
    }

    .main-story:hover {
        transform: translateY(-5px);
    }

    .main-story-image-container {
        position: relative;
        overflow: hidden;
        margin-bottom: 1.5rem;
        height: 500px;
    }

    .main-story-image {
        width: 100%;
        height: 100%;
        object-fit: cover;
        transition: transform 0.5s;
    }

    .main-story:hover .main-story-image {
        transform: scale(1.05);
    }

    .category-tag {
        display: inline-block;
        padding: 0.3rem 0.8rem;
        background-color: var(--secondary);
        color: white;
        font-size: 0.8rem;
        font-weight: 600;
        text-transform: uppercase;
        letter-spacing: 0.5px;
        margin-bottom: 1rem;
        border-radius: 0;
        font-family: var(--body-font);
    }

    .main-story-title {
        font-family: var(--headline-font);
        font-size: 2.8rem;
        line-height: 1.2;
        margin-bottom: 1rem;
        color: var(--text-dark);
        transition: color 0.3s;
        font-weight: 800;
    }

    .main-story:hover .main-story-title {
        color: var(--secondary);
    }

    .main-story-excerpt {
        font-family: var(--article-font);
        font-size: 1.2rem;
        line-height: 1.6;
        color: var(--text-light);
        margin-bottom: 1.5rem;
    }

    .story-meta {
        display: flex;
        align-items: center;
        gap: 1.5rem;
        color: var(--text-light);
        font-size: 0.9rem;
        font-family: var(--body-font);
        border-top: 1px solid var(--gray);
        padding-top: 1rem;
    }

    .meta-author {
        font-weight: 600;
        color: var(--text-dark);
        text-transform: uppercase;
        letter-spacing: 0.5px;
    }

    .meta-date {
        display: flex;
        align-items: center;
        gap: 0.3rem;
    }

    .meta-date svg {
        width: 16px;
        height: 16px;
    }

    .meta-time {
        display: flex;
        align-items: center;
        gap: 0.3rem;
    }

    .meta-time svg {
        width: 16px;
        height: 16px;
    }

    .secondary-stories {
        display: flex;
        flex-direction: column;
        gap: 1.5rem;
    }

    .secondary-story {
        display: flex;
        gap: 1rem;
        padding-bottom: 1.5rem;
        border-bottom: 1px solid var(--gray-light);
        cursor: pointer;
        transition: all 0.3s;
    }

    .secondary-story:hover {
        transform: translateY(-5px);
    }

    .secondary-story-image-container {
        position: relative;
        overflow: hidden;
        width: 120px;
        height: 120px;
        flex-shrink: 0;
    }

    .secondary-story-image {
        width: 100%;
        height: 100%;
        object-fit: cover;
        transition: transform 0.5s;
    }

    .secondary-story:hover .secondary-story-image {
        transform: scale(1.1);
    }

    .secondary-story-content {
        display: flex;
        flex-direction: column;
    }

    .secondary-story-category {
        font-size: 0.8rem;
        font-weight: 600;
        color: var(--secondary);
        text-transform: uppercase;
        margin-bottom: 0.5rem;
        font-family: var(--body-font);
        letter-spacing: 0.5px;
    }

    .secondary-story-title {
        font-family: var(--headline-font);
        font-size: 1.2rem;
        line-height: 1.3;
        margin-bottom: 0.5rem;
        transition: color 0.3s;
        font-weight: 700;
    }

    .secondary-story:hover .secondary-story-title {
        color: var(--secondary);
    }

    .secondary-story-meta {
        margin-top: auto;
        font-size: 0.8rem;
        color: var(--text-light);
        font-family: var(--body-font);
    }

    /* News grid section - Newspaper style */
    .section-title {
        font-family: var(--headline-font);
        font-size: 2rem;
        margin-bottom: 1.5rem;
        padding-bottom: 0.8rem;
        border-bottom: 2px solid var(--secondary);
        position: relative;
        text-transform: uppercase;
        letter-spacing: 1px;
        font-weight: 800;
    }

    .section-title::after {
        content: '';
        position: absolute;
        bottom: -2px;
        left: 0;
        width: 100px;
        height: 2px;
        background-color: var(--text-dark);
    }

    .news-grid {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 2rem;
        margin-bottom: 3rem;
    }

    .news-card {
        display: flex;
        flex-direction: column;
        background-color: var(--white);
        transition: all 0.3s;
        cursor: pointer;
        overflow: hidden;
        border: 1px solid var(--gray-light);
        height: 100%;
        box-shadow: none;
    }

    .news-card:hover {
        transform: translateY(-10px);
        box-shadow: 0 15px 30px rgba(0, 0, 0, 0.1);
    }

    .news-card-image-container {
        position: relative;
        overflow: hidden;
        height: 200px;
    }

    .news-card-image {
        width: 100%;
        height: 100%;
        object-fit: cover;
        transition: transform 0.5s;
    }

    .news-card:hover .news-card-image {
        transform: scale(1.1);
    }

    .news-card-content {
        padding: 1.5rem;
        flex-grow: 1;
        display: flex;
        flex-direction: column;
    }

    .news-card-category {
        font-size: 0.8rem;
        font-weight: 600;
        color: var(--secondary);
        text-transform: uppercase;
        margin-bottom: 0.5rem;
        font-family: var(--body-font);
        letter-spacing: 0.5px;
    }

    .news-card-title {
        font-family: var(--headline-font);
        font-size: 1.4rem;
        line-height: 1.3;
        margin-bottom: 1rem;
        transition: color 0.3s;
        font-weight: 700;
    }

    .news-card:hover .news-card-title {
        color: var(--secondary);
    }

    .news-card-excerpt {
        font-family: var(--article-font);
        font-size: 0.95rem;
        line-height: 1.6;
        color: var(--text-light);
        margin-bottom: 1.5rem;
        flex-grow: 1;
    }

    .news-card-meta {
        display: flex;
        justify-content: space-between;
        align-items: center;
        font-size: 0.8rem;
        color: var(--text-light);
        margin-top: auto;
        padding-top: 1rem;
        border-top: 1px solid var(--gray-light);
        font-family: var(--body-font);
    }

    .news-card-author {
        font-weight: 600;
        text-transform: uppercase;
        letter-spacing: 0.5px;
    }

    .news-card-date {
        display: flex;
        align-items: center;
        gap: 0.3rem;
    }

    .news-card-date svg {
        width: 14px;
        height: 14px;
    }

    /* Featured section - Newspaper style */
    .featured-section {
        margin-bottom: 3rem;
        background-color: var(--gray-light);
        padding: 2rem;
        border-top: 3px solid var(--secondary);
        border-bottom: 3px solid var(--secondary);
    }

    .featured-grid {
        display: grid;
        grid-template-columns: repeat(4, 1fr);
        gap: 1.5rem;
    }

    .featured-card {
        background-color: var(--white);
        transition: all 0.3s;
        cursor: pointer;
        overflow: hidden;
        border: 1px solid var(--gray-light);
        height: 100%;
        box-shadow: none;
    }

    .featured-card:hover {
        transform: translateY(-10px);
        box-shadow: 0 15px 30px rgba(0, 0, 0, 0.1);
    }

    .featured-card-image-container {
        position: relative;
        overflow: hidden;
        height: 180px;
    }

    .featured-card-image {
        width: 100%;
        height: 100%;
        object-fit: cover;
        transition: transform 0.5s;
    }

    .featured-card:hover .featured-card-image {
        transform: scale(1.1);
    }

    .featured-card-content {
        padding: 1.2rem;
    }

    .featured-card-title {
        font-family: var(--headline-font);
        font-size: 1.1rem;
        line-height: 1.3;
        margin-bottom: 0.5rem;
        transition: color 0.3s;
        font-weight: 700;
    }

    .featured-card:hover .featured-card-title {
        color: var(--secondary);
    }

    .featured-card-meta {
        font-size: 0.8rem;
        color: var(--text-light);
        font-family: var(--body-font);
    }

    /* Two column section - Newspaper style */
    .two-column-section {
        display: grid;
        grid-template-columns: 2fr 1fr;
        gap: 2rem;
        margin-bottom: 3rem;
    }

    .column-left {
        display: flex;
        flex-direction: column;
        gap: 2rem;
    }

    .column-right {
        display: flex;
        flex-direction: column;
        gap: 2rem;
    }

    .opinion-card {
        background-color: var(--white);
        padding: 1.5rem;
        transition: all 0.3s;
        cursor: pointer;
        border-left: 4px solid var(--secondary);
        border-top: 1px solid var(--gray);
        border-right: 1px solid var(--gray);
        border-bottom: 1px solid var(--gray);
    }

    .opinion-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 15px 30px rgba(0, 0, 0, 0.1);
    }

    .opinion-label {
        font-size: 0.8rem;
        font-weight: 600;
        color: var(--secondary);
        text-transform: uppercase;
        margin-bottom: 0.5rem;
        font-family: var(--body-font);
        letter-spacing: 0.5px;
    }

    .opinion-title {
        font-family: var(--headline-font);
        font-size: 1.4rem;
        line-height: 1.3;
        margin-bottom: 1rem;
        transition: color 0.3s;
        font-weight: 700;
    }

    .opinion-card:hover .opinion-title {
        color: var(--secondary);
    }

    .opinion-author {
        display: flex;
        align-items: center;
        gap: 1rem;
        border-top: 1px solid var(--gray-light);
        padding-top: 1rem;
        margin-top: 1rem;
    }

    .opinion-author-image-container {
        width: 50px;
        height: 50px;
        border-radius: 50%;
        overflow: hidden;
    }

    .opinion-author-image {
        width: 100%;
        height: 100%;
        object-fit: cover;
    }

    .opinion-author-info {
        display: flex;
        flex-direction: column;
    }

    .opinion-author-name {
        font-weight: 600;
        font-size: 0.9rem;
        text-transform: uppercase;
        letter-spacing: 0.5px;
        font-family: var(--body-font);
    }

    .opinion-author-title {
        font-size: 0.8rem;
        color: var(--text-light);
        font-style: italic;
        font-family: var(--body-font);
    }

    .sidebar-widget {
        background-color: var(--white);
        padding: 1.5rem;
        margin-bottom: 2rem;
        border: 1px solid var(--gray);
        border-top: 3px solid var(--secondary);
    }

    .widget-title {
        font-family: var(--headline-font);
        font-size: 1.2rem;
        margin-bottom: 1.2rem;
        padding-bottom: 0.8rem;
        border-bottom: 1px solid var(--gray);
        text-transform: uppercase;
        letter-spacing: 0.5px;
        font-weight: 700;
    }

    .trending-list {
        display: flex;
        flex-direction: column;
        gap: 1rem;
    }

    .trending-item {
        display: flex;
        gap: 1rem;
        padding-bottom: 1rem;
        border-bottom: 1px solid var(--gray-light);
        cursor: pointer;
        transition: transform 0.3s;
    }

    .trending-item:hover {
        transform: translateX(5px);
    }

    .trending-item:last-child {
        border-bottom: none;
        padding-bottom: 0;
    }

    .trending-number {
        font-family: var(--headline-font);
        font-size: 1.8rem;
        font-weight: 700;
        color: var(--secondary);
        line-height: 1;
    }

    .trending-content {
        flex-grow: 1;
    }

    .trending-title {
        font-family: var(--headline-font);
        font-size: 1rem;
        line-height: 1.3;
        margin-bottom: 0.3rem;
        transition: color 0.3s;
        font-weight: 700;
    }

    .trending-item:hover .trending-title {
        color: var(--secondary);
    }

    .trending-meta {
        font-size: 0.8rem;
        color: var(--text-light);
        font-family: var(--body-font);
    }

    .newsletter-form {
        display: flex;
        flex-direction: column;
        gap: 1rem;
    }

    .newsletter-input {
        padding: 0.8rem 1rem;
        border: 1px solid var(--gray);
        font-family: var(--body-font);
        font-size: 0.9rem;
        transition: border-color 0.3s, box-shadow 0.3s;
    }

    .newsletter-input:focus {
        outline: none;
        border-color: var(--secondary);
        box-shadow: 0 0 0 3px rgba(255, 107, 0, 0.1);
    }

    .newsletter-btn {
        background-color: var(--secondary);
        color: white;
        border: none;
        padding: 0.8rem;
        font-family: var(--body-font);
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s;
        text-transform: uppercase;
        letter-spacing: 0.5px;
    }

    .newsletter-btn:hover {
        background-color: var(--secondary-dark);
        transform: translateY(-2px);
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    }

    .tags-cloud {
        display: flex;
        flex-wrap: wrap;
        gap: 0.5rem;
    }

    .tag {
        background-color: var(--gray-light);
        color: var(--text-dark);
        padding: 0.3rem 0.8rem;
        font-size: 0.8rem;
        transition: all 0.3s;
        cursor: pointer;
        font-family: var(--body-font);
    }

    .tag:hover {
        background-color: var(--secondary-light);
        color: var(--white);
        transform: translateY(-2px);
    }

    /* Load more button */
    .load-more-container {
        display: flex;
        justify-content: center;
        margin: 2rem 0 3rem;
    }

    .load-more-btn {
        background-color: var(--white);
        color: var(--secondary);
        border: 2px solid var(--secondary);
        padding: 0.8rem 2rem;
        font-weight: 600;
        font-size: 1rem;
        cursor: pointer;
        transition: all 0.3s;
        display: flex;
        align-items: center;
        gap: 0.5rem;
        text-transform: uppercase;
        letter-spacing: 0.5px;
        font-family: var(--body-font);
    }

    .load-more-btn:hover {
        background-color: var(--secondary);
        color: var(--white);
        transform: translateY(-3px);
        box-shadow: 0 6px 12px rgba(255, 107, 0, 0.2);
    }

    .load-more-btn svg {
        width: 18px;
        height: 18px;
    }

    /* ===== FOOTER STYLES ===== */
    .footer {
        background-color: var(--primary);
        color: white;
        padding: 3rem 0 1rem;
        border-top: 5px solid var(--secondary);
    }

    .footer-container {
        max-width: 1400px;
        margin: 0 auto;
        padding: 0 1.5rem;
    }

    .footer-grid {
        display: grid;
        grid-template-columns: 2fr 1fr 1fr 1fr;
        gap: 2rem;
        margin-bottom: 2rem;
    }

    .footer-logo {
        font-family: var(--headline-font);
        font-size: 2rem;
        font-weight: 900;
        color: white;
        margin-bottom: 1rem;
        display: flex;
        align-items: center;
        gap: 1rem;
        text-transform: uppercase;
    }

    .footer-logo img {
        height: 40px;
        width: auto;
    }

    .footer-description {
        margin-bottom: 1.5rem;
        color: rgba(255, 255, 255, 0.7);
        line-height: 1.6;
        font-family: var(--body-font);
    }

    .footer-social {
        display: flex;
        gap: 1rem;
    }

    .footer-social-link {
        display: flex;
        align-items: center;
        justify-content: center;
        width: 36px;
        height: 36px;
        background-color: rgba(255, 255, 255, 0.1);
        color: white;
        border-radius: 50%;
        transition: all 0.3s;
    }

    .footer-social-link:hover {
        background-color: var(--secondary);
        transform: translateY(-3px);
    }

    .footer-social-link svg {
        width: 18px;
        height: 18px;
    }

    .footer-title {
        font-family: var(--headline-font);
        font-size: 1.2rem;
        margin-bottom: 1.5rem;
        color: white;
        text-transform: uppercase;
        letter-spacing: 0.5px;
        font-weight: 700;
    }

    .footer-links {
        display: flex;
        flex-direction: column;
        gap: 0.8rem;
    }

    .footer-link {
        color: rgba(255, 255, 255, 0.7);
        text-decoration: none;
        transition: all 0.3s;
        position: relative;
        padding-left: 0;
        font-family: var(--body-font);
    }

    .footer-link:hover {
        color: white;
        padding-left: 8px;
    }

    .footer-link::before {
        content: '';
        position: absolute;
        left: 0;
        top: 50%;
        width: 0;
        height: 2px;
        background-color: var(--secondary);
        transform: translateY(-50%);
        transition: width 0.3s;
        opacity: 0;
    }

    .footer-link:hover::before {
        width: 4px;
        opacity: 1;
    }

    .footer-bottom {
        border-top: 1px solid rgba(255, 255, 255, 0.1);
        padding-top: 1.5rem;
        text-align: center;
        color: rgba(255, 255, 255, 0.5);
        font-size: 0.9rem;
        font-family: var(--body-font);
    }

    /* ===== ARTICLE MODAL STYLES ===== */
    .modal {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        z-index: 1000;
        overflow: hidden;
        background-color: var(--modal-bg);
        backdrop-filter: blur(5px);
        opacity: 0;
        transition: opacity var(--animation-duration) ease;
    }

    .modal.active {
        opacity: 1;
    }

    .modal-content {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: var(--background);
        overflow-y: auto;
        overflow-x: hidden;
        transform: translateY(100%);
        transition: transform var(--animation-duration) cubic-bezier(0.16, 1, 0.3, 1);
    }

    .modal.active .modal-content {
        transform: translateY(0);
    }

    .article-container {
        max-width: 100%;
        margin: 0 auto;
        padding: 0;
        background-color: transparent;
        position: relative;
    }

    .article-inner {
        max-width: 800px;
        margin: 0 auto;
        padding: 2rem;
        margin-top: 5rem;
        margin-bottom: 4rem;
        position: relative;
    }

    .modal-header {
        background-color: var(--white);
        padding: 1rem 2rem;
        border-bottom: 3px double var(--gray); /* Newspaper style border */
        display: flex;
        justify-content: center;
        align-items: center;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        z-index: 10;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
    }

    .modal-logo-container {
        display: flex;
        align-items: center;
        gap: 1rem;
    }

    .modal-logo-img {
        height: 40px;
        width: auto;
    }

    .modal-logo-text {
        font-family: var(--headline-font);
        font-size: 1.5rem;
        font-weight: 900;
        color: var(--secondary);
        text-transform: uppercase;
    }

    .modal-logo-text span {
        color: var(--text-dark);
    }

    .close-modal {
        position: fixed;
        top: 1.5rem;
        right: 1.5rem;
        background-color: var(--white);
        color: var(--text-dark);
        width: 40px;
        height: 40px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        border: none;
        cursor: pointer;
        font-size: 1.5rem;
        z-index: 1001;
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
        transition: all 0.3s ease;
    }

    .close-modal:hover {
        background-color: var(--secondary);
        color: var(--white);
        transform: rotate(90deg);
    }

    .mobile-close-modal {
        display: none;
        position: fixed;
        top: 1rem;
        right: 1rem;
        background-color: var(--white);
        color: var(--text-dark);
        width: 36px;
        height: 36px;
        border-radius: 50%;
        align-items: center;
        justify-content: center;
        border: none;
        cursor: pointer;
        font-size: 1.2rem;
        z-index: 1001;
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
    }

    .article-header {
        margin-bottom: 2rem;
        border-bottom: 3px double var(--gray); /* Newspaper style border */
        padding-bottom: 1.5rem;
    }

    .article-category {
        display: inline-block;
        background-color: var(--secondary);
        color: white;
        padding: 0.3rem 0.8rem;
        font-size: 0.8rem;
        font-weight: 600;
        text-transform: uppercase;
        letter-spacing: 0.5px;
        margin-bottom: 1rem;
        font-family: var(--body-font);
    }

    .article-title {
        font-family: var(--headline-font);
        font-size: 2.5rem;
        line-height: 1.2;
        margin-bottom: 1rem;
        font-weight: 900;
    }

    .article-meta {
        display: flex;
        flex-wrap: wrap;
        gap: 1.5rem;
        margin-bottom: 1.5rem;
        color: var(--text-light);
        padding-bottom: 1.5rem;
        font-family: var(--body-font);
    }

    .article-meta-item {
        display: flex;
        align-items: center;
        gap: 0.5rem;
    }

    .article-meta-item svg {
        width: 18px;
        height: 18px;
    }

    .article-cover {
        width: 100%;
        margin-bottom: 2rem;
        overflow: hidden;
    }

    .article-cover img {
        width: 100%;
        height: auto;
        display: block;
        transition: transform 0.5s;
    }

    .article-cover:hover img {
        transform: scale(1.03);
    }

    .article-content {
        font-family: var(--article-font);
        font-size: 1.1rem;
        line-height: 1.8;
        color: var(--text-dark);
    }

    /* Add drop cap styling for first paragraph in article content */
    .article-content > p:first-of-type::first-letter {
        font-family: var(--headline-font);
        float: left;
        font-size: 4rem;
        line-height: 0.8;
        padding-right: 0.8rem;
        margin-top: 0.25rem;
        color: var(--secondary);
        font-weight: 900;
    }

    .article-content p {
        margin-bottom: 1.5rem;
    }

    .article-content h2 {
        font-family: var(--headline-font);
        font-size: 1.8rem;
        margin-top: 2.5rem;
        margin-bottom: 1rem;
        font-weight: 800;
    }

    .article-content h3 {
        font-family: var(--headline-font);
        font-size: 1.5rem;
        margin-top: 2rem;
        margin-bottom: 1rem;
        font-weight: 700;
    }

    .article-content blockquote {
        border-left: 4px solid var(--secondary);
        padding-left: 1.5rem;
        margin: 2rem 0;
        font-style: italic;
        color: var(--text-light);
        background-color: var(--gray-light);
        padding: 1.5rem 1.5rem 1.5rem 2rem;
        font-family: var(--article-font);
    }

    .article-tags {
        display: flex;
        flex-wrap: wrap;
        gap: 0.5rem;
        margin-top: 2rem;
        padding-top: 1.5rem;
        border-top: 1px solid var(--gray-light);
    }

    .article-tag {
        background-color: var(--gray-light);
        color: var(--text-dark);
        padding: 0.3rem 0.8rem;
        font-size: 0.8rem;
        transition: all 0.3s;
        font-family: var(--body-font);
    }

    .article-tag:hover {
        background-color: var(--secondary-light);
        color: var(--white);
        transform: translateY(-2px);
    }

    .article-actions {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-top: 2rem;
        padding-top: 1.5rem;
        border-top: 1px solid var(--gray-light);
    }

    .share-container {
        display: flex;
        align-items: center;
        gap: 1rem;
    }

    .share-label {
        font-weight: 600;
        color: var(--text-dark);
        font-family: var(--body-font);
    }

    .share-options {
        display: flex;
        gap: 0.8rem;
    }

    .share-option {
        display: flex;
        align-items: center;
        justify-content: center;
        width: 36px;
        height: 36px;
        border-radius: 50%;
        background-color: var(--gray-light);
        color: var(--text-dark);
        border: none;
        cursor: pointer;
        transition: all 0.3s;
    }

    .share-option:hover {
        background-color: var(--secondary);
        color: var(--white);
        transform: translateY(-3px);
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    }

    .share-option svg {
        width: 18px;
        height: 18px;
    }

    .reading-progress {
        position: fixed;
        top: 0;
        left: 0;
        width: 0;
        height: 4px;
        background-color: var(--secondary);
        z-index: 1001;
        transition: width 0.1s ease;
    }

    /* Toast notification */
    .toast {
        position: fixed;
        bottom: 20px;
        left: 50%;
        transform: translateX(-50%) translateY(100px);
        background-color: var(--text-dark);
        color: var(--white);
        padding: 0.8rem 1.5rem;
        border-radius: 0;
        font-size: 0.9rem;
        z-index: 2000;
        opacity: 0;
        transition: transform 0.3s ease, opacity 0.3s ease;
        pointer-events: none;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
        font-family: var(--body-font);
    }

    .toast.show {
        opacity: 1;
        transform: translateX(-50%) translateY(0);
    }

    /* Mobile menu styles */
    .mobile-menu {
        position: fixed;
        top: 0;
        left: -100%;
        width: 80%;
        max-width: 320px;
        height: 100%;
        background-color: var(--white);
        z-index: 1001;
        padding: 2rem 1.5rem;
        overflow-y: auto;
        transition: left 0.3s ease;
        box-shadow: 0 0 20px rgba(0, 0, 0, 0.2);
    }
    
    .mobile-menu.active {
        left: 0;
    }
    
    .mobile-menu-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 2rem;
    }
    
    .mobile-logo {
        font-family: var(--headline-font);
        font-size: 1.8rem;
        font-weight: 900;
        color: var(--secondary);
        display: flex;
        align-items: center;
        gap: 0.5rem;
        text-transform: uppercase;
    }
    
    .mobile-logo img {
        height: 30px;
        width: auto;
    }
    
    .mobile-menu-close {
        background: none;
        border: none;
        color: var(--text-dark);
        cursor: pointer;
        padding: 0.5rem;
        transition: transform 0.3s;
    }
    
    .mobile-menu-close:hover {
        transform: rotate(90deg);
    }
    
    .mobile-menu-close svg {
        width: 24px;
        height: 24px;
    }
    
    .mobile-nav {
        display: flex;
        flex-direction: column;
        margin-bottom: 2rem;
    }
    
    .mobile-nav-link {
        padding: 1rem 0;
        color: var(--text-dark);
        text-decoration: none;
        font-weight: 500;
        border-bottom: 1px solid var(--gray-light);
        transition: all 0.3s;
        display: flex;
        align-items: center;
        justify-content: space-between;
        text-transform: uppercase;
        letter-spacing: 0.5px;
        font-family: var(--body-font);
    }
    
    .mobile-nav-link.active {
        color: var(--secondary);
        font-weight: 600;
    }
    
    .mobile-nav-link:hover {
        color: var(--secondary);
        padding-left: 8px;
    }
    
    .mobile-nav-link::after {
        content: 'â†’';
        opacity: 0;
        transition: opacity 0.3s, transform 0.3s;
        transform: translateX(-10px);
    }
    
    .mobile-nav-link:hover::after {
        opacity: 1;
        transform: translateX(0);
    }
    
    .mobile-section-title {
        font-family: var(--headline-font);
        font-size: 1.2rem;
        margin-bottom: 1rem;
        padding-bottom: 0.5rem;
        border-bottom: 2px solid var(--secondary-light);
        text-transform: uppercase;
        letter-spacing: 0.5px;
        font-weight: 700;
    }
    
    .mobile-category-links {
        display: flex;
        flex-direction: column;
    }
    
    .mobile-category-link {
        padding: 0.8rem 0;
        color: var(--text-dark);
        text-decoration: none;
        border-bottom: 1px solid var(--gray-light);
        transition: all 0.3s;
        display: flex;
        align-items: center;
        justify-content: space-between;
        font-family: var(--body-font);
    }
    
    .mobile-category-link:hover {
        color: var(--secondary);
        padding-left: 8px;
    }
    
    .mobile-category-link::after {
        content: 'â†’';
        opacity: 0;
        transition: opacity 0.3s, transform 0.3s;
        transform: translateX(-10px);
    }
    
    .mobile-category-link:hover::after {
        opacity: 1;
        transform: translateX(0);
    }
    
    .mobile-menu-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.5);
        z-index: 1000;
        opacity: 0;
        visibility: hidden;
        transition: opacity 0.3s ease, visibility 0.3s ease;
        backdrop-filter: blur(3px);
    }
    
    .mobile-menu-overlay.active {
        opacity: 1;
        visibility: visible;
    }

    /* Silak-salitaan special styles */
    .silak-container {
        background-color: var(--silak-light);
        border: 1px solid var(--silak-border);
        padding: 1.5rem;
        margin-bottom: 2rem;
    }

    .silak-title {
        font-family: var(--headline-font);
        color: var(--silak-color);
        font-size: 1.5rem;
        margin-bottom: 1rem;
        border-bottom: 2px solid var(--silak-border);
        padding-bottom: 0.5rem;
        text-transform: uppercase;
        letter-spacing: 0.5px;
        font-weight: 700;
    }

    .silak-word {
        margin-bottom: 1.5rem;
    }

    .silak-word-title {
        font-family: var(--headline-font);
        font-size: 1.3rem;
        margin-bottom: 0.5rem;
        color: var(--text-dark);
        font-weight: 700;
    }

    .silak-pronunciation {
        font-style: italic;
        margin-bottom: 0.5rem;
        color: var(--text-light);
        font-family: var(--article-font);
    }

    .silak-part-of-speech {
        font-weight: 600;
        color: var(--silak-color);
        margin-bottom: 0.5rem;
        font-family: var(--body-font);
        text-transform: uppercase;
        letter-spacing: 0.5px;
    }

    .silak-definition {
        margin-bottom: 0.5rem;
        font-family: var(--article-font);
    }

    .silak-example {
        font-style: italic;
        color: var(--text-light);
        border-left: 3px solid var(--silak-border);
        padding-left: 1rem;
        margin-top: 0.5rem;
        font-family: var(--article-font);
    }

    .silak-image-container {
        position: relative;
        overflow: hidden;
        aspect-ratio: 16/9;
        margin: 1rem 0;
    }

    .silak-image {
        width: 100%;
        height: 100%;
        object-fit: cover;
        transition: transform 0.5s;
    }

    /* Photostory special styles */
    .photostory-container {
        background-color: var(--photostory-light);
        border: 1px solid var(--photostory-border);
        padding: 1.5rem;
        margin-bottom: 2rem;
    }

    .photostory-title {
        font-family: var(--headline-font);
        color: var(--photostory-color);
        font-size: 1.5rem;
        margin-bottom: 1rem;
        border-bottom: 2px solid var(--photostory-border);
        padding-bottom: 0.5rem;
        text-transform: uppercase;
        letter-spacing: 0.5px;
        font-weight: 700;
    }

    .photostory-image-container {
        position: relative;
        overflow: hidden;
        aspect-ratio: 16/9;
        margin-bottom: 1rem;
    }

    .photostory-image {
        width: 100%;
        height: 100%;
        object-fit: cover;
        transition: transform 0.5s;
    }

    .photostory-image-container:hover .photostory-image {
        transform: scale(1.05);
    }

    .photostory-caption {
        font-style: italic;
        color: var(--text-light);
        text-align: center;
        margin-top: 0.5rem;
        font-size: 0.9rem;
        font-family: var(--article-font);
    }

    .photostory-meta {
        display: flex;
        align-items: center;
        gap: 1rem;
        margin: 1rem 0;
        color: var(--text-light);
        font-size: 0.9rem;
        font-family: var(--body-font);
        border-bottom: 1px solid var(--photostory-border);
        padding-bottom: 1rem;
    }

    .photostory-author {
        font-weight: 600;
        text-transform: uppercase;
        letter-spacing: 0.5px;
    }

    .photostory-date {
        display: flex;
        align-items: center;
        gap: 0.3rem;
    }

    .photostory-description {
        margin-top: 1.5rem;
        line-height: 1.7;
        font-family: var(--article-font);
    }

    /* Skeleton loading styles */
    .skeleton {
        background: linear-gradient(90deg, var(--skeleton-base) 0%, var(--skeleton-highlight) 50%, var(--skeleton-base) 100%);
        background-size: 200% 100%;
        animation: skeleton-loading 1.5s infinite;
        border-radius: 0;
    }

    .skeleton-card {
        display: flex;
        flex-direction: column;
        background-color: var(--white);
        border: 1px solid var(--gray-light);
        height: 100%;
        overflow: hidden;
    }

    .skeleton-image {
        width: 100%;
        height: 200px;
    }

    .skeleton-content {
        padding: 1.5rem;
        flex-grow: 1;
        display: flex;
        flex-direction: column;
        gap: 1rem;
    }

    .skeleton-category {
        width: 80px;
        height: 16px;
    }

    .skeleton-title {
        width: 100%;
        height: 24px;
        margin-bottom: 0.5rem;
    }

    .skeleton-title-small {
        width: 70%;
        height: 20px;
    }

    .skeleton-excerpt {
        width: 100%;
        height: 80px;
    }

    .skeleton-meta {
        display: flex;
        justify-content: space-between;
        margin-top: auto;
        padding-top: 1rem;
        border-top: 1px solid var(--gray-light);
    }

    .skeleton-author {
        width: 100px;
        height: 16px;
    }

    .skeleton-date {
        width: 80px;
        height: 16px;
    }

    .skeleton-circle {
        width: 50px;
        height: 50px;
        border-radius: 50%;
    }

    .skeleton-line {
        width: 100%;
        height: 16px;
        margin-bottom: 0.5rem;
    }

    .skeleton-line-short {
        width: 60%;
        height: 16px;
    }

    .skeleton-main-image {
        width: 100%;
        height: 500px;
    }

    .skeleton-secondary {
        display: flex;
        gap: 1rem;
        padding-bottom: 1.5rem;
        border-bottom: 1px solid var(--gray-light);
        margin-bottom: 1.5rem;
    }

    .skeleton-secondary-image {
        width: 120px;
        height: 120px;
        flex-shrink: 0;
    }

    .skeleton-secondary-content {
        flex-grow: 1;
        display: flex;
        flex-direction: column;
        gap: 0.8rem;
    }

    .skeleton-trending-item {
        display: flex;
        gap: 1rem;
        padding-bottom: 1rem;
        border-bottom: 1px solid var(--gray-light);
        margin-bottom: 1rem;
    }

    .skeleton-trending-number {
        width: 30px;
        height: 30px;
    }

    .skeleton-trending-content {
        flex-grow: 1;
        display: flex;
        flex-direction: column;
        gap: 0.5rem;
    }

    @keyframes skeleton-loading {
        0% {
            background-position: 200% 0;
        }
        100% {
            background-position: -200% 0;
        }
    }

    /* Animation keyframes */
    @keyframes fadeIn {
        from { opacity: 0; }
        to { opacity: 1; }
    }

    @keyframes fadeInUp {
        from { 
            opacity: 0;
            transform: translateY(20px);
        }
        to { 
            opacity: 1;
            transform: translateY(0);
        }
    }

    @keyframes slideInRight {
        from {
            transform: translateX(30px);
            opacity: 0;
        }
        to {
            transform: translateX(0);
            opacity: 1;
        }
    }

    /* ===== RESPONSIVE STYLES ===== */
    @media (max-width: 1200px) {
        .hero-section {
            grid-template-columns: 1.5fr 1fr;
        }

        .news-grid {
            grid-template-columns: repeat(2, 1fr);
        }

        .featured-grid {
            grid-template-columns: repeat(3, 1fr);
        }

        .footer-grid {
            grid-template-columns: 1fr 1fr 1fr;
        }
    }

    @media (max-width: 992px) {
        .hero-section {
            grid-template-columns: 1fr;
            gap: 3rem;
        }

        .secondary-stories {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1.5rem;
        }

        .two-column-section {
            grid-template-columns: 1fr;
        }

        .featured-grid {
            grid-template-columns: repeat(2, 1fr);
        }

        .footer-grid {
            grid-template-columns: 1fr 1fr;
            gap: 3rem;
        }

        .nav-list {
            display: none;
        }

        .mobile-menu-btn {
            display: block;
        }

        .article-title {
            font-size: 2rem;
        }
        
        .main-story-image-container {
            height: 400px;
        }
        
        .main-story-title {
            font-size: 2.2rem;
        }
    }

    @media (max-width: 768px) {
        .top-bar {
            padding: 0.5rem 0;
        }
    
        .top-bar-container {
            flex-direction: column;
            gap: 0.5rem;
            align-items: center;
        }
    
        .top-bar-left {
            font-size: 0.8rem;
            justify-content: center;
            text-align: center;
            flex-wrap: wrap;
        }
    
        .top-bar-right {
            font-size: 0.8rem;
            justify-content: center;
        }

        .header-container {
            flex-direction: column;
            gap: 1rem;
        }

        .header-actions {
            width: 100%;
            justify-content: space-between;
        }

        .news-grid {
            grid-template-columns: 1fr;
            gap: 1.5rem;
        }

        .secondary-stories {
            grid-template-columns: 1fr;
        }

        .featured-grid {
            grid-template-columns: 1fr;
            gap: 1.5rem;
        }

        .footer-grid {
            grid-template-columns: 1fr;
            gap: 2rem;
        }

        /* Modal responsiveness improvements */
        .article-inner {
            padding: 1.5rem;
            margin-top: 4rem;
        }

        .article-title {
            font-size: 1.8rem;
        }

        .article-meta {
            flex-direction: column;
            gap: 0.8rem;
            align-items: flex-start;
        }

        .article-content {
            font-size: 1rem;
        }

        .article-actions {
            flex-direction: column;
            align-items: flex-start;
            gap: 1.5rem;
        }
        
        .main-story-image-container {
            height: 300px;
        }
        
        .main-story-title {
            font-size: 1.8rem;
        }
        
        .main-story-excerpt {
            font-size: 1rem;
        }
        
        .story-meta {
            flex-wrap: wrap;
            gap: 1rem;
        }

        .modal-header {
            padding: 0.8rem 1rem;
        }

        .close-modal {
            top: 0.8rem;
            right: 0.8rem;
            width: 36px;
            height: 36px;
        }

        .modal-logo-img {
            height: 30px;
        }

        .modal-logo-text {
            font-size: 1.2rem;
        }
    }

    @media (max-width: 576px) {
        .publication-name {
            font-size: 1.8rem;
        }
    
        .logo-img {
            height: 40px;
        }
        
        .publication-tagline {
            font-size: 0.8rem;
        }
    
        .top-bar-right {
            display: none; /* Hide "Follow us" on very small screens */
        }
        
        .main-story-title {
            font-size: 1.6rem;
        }

        .main-story-excerpt {
            font-size: 0.95rem;
        }
        
        .main-story-image-container {
            height: 250px;
        }

        .secondary-story {
            flex-direction: column;
        }

        .secondary-story-image-container {
            width: 100%;
            height: 180px;
            margin-bottom: 1rem;
        }

        /* Further modal responsiveness improvements */
        .article-inner {
            padding: 1rem;
            margin-top: 3.5rem;
        }

        .article-title {
            font-size: 1.5rem;
        }

        .article-content {
            font-size: 0.95rem;
        }
        
        .article-content > p:first-of-type::first-letter {
            font-size: 3rem;
        }
        
        .close-modal {
            top: 0.5rem;
            right: 0.5rem;
            width: 32px;
            height: 32px;
        }
        
        .search-input {
            padding: 1rem 1.5rem;
            font-size: 1.2rem;
        }
        
        .search-close {
            top: 1rem;
            right: 1rem;
            font-size: 1.5rem;
        }

        .share-container {
            width: 100%;
            justify-content: space-between;
        }

        .share-options {
            flex: 1;
            justify-content: flex-end;
        }
        
        /* Mobile-specific modal improvements */
        .mobile-close-modal {
            display: flex;
        }
        
        .close-modal {
            display: none;
        }
        
        .article-meta {
            font-size: 0.85rem;
        }
        
        .article-meta-item {
            width: 100%;
        }
        
        .article-content h2 {
            font-size: 1.5rem;
        }
        
        .article-content h3 {
            font-size: 1.3rem;
        }
        
        .article-content blockquote {
            padding: 1rem 1rem 1rem 1.5rem;
            font-size: 0.9rem;
        }
        
        .share-label {
            font-size: 0.9rem;
        }
        
        .share-option {
            width: 32px;
            height: 32px;
        }
    }
</style>
</head>
<body>
<!-- Top bar with date and social links -->
<div class="top-bar">
    <div class="top-bar-container">
        <div class="top-bar-left">
            <div class="current-date" id="currentDate">March 27, 2025</div>
        </div>
        <div class="top-bar-right">
            <div>Follow us:</div>
            <div class="social-links-mini">
                <a href="https://www.facebook.com/AngSilakboUCLM" class="social-link-mini">Facebook - Ang Silakbo</a>
            </div>
        </div>
    </div>
</div>

<!-- Main header with logo and search -->
<header class="header-main">
    <div class="header-container">
        <div class="masthead">
            <div class="logo-container">
                <img src="SILAKBO (1).png" alt="Silakbo Logo" class="logo-img" onerror="this.src='https://via.placeholder.com/60x60?text=S'; this.onerror=null;">
                <a href="index.html" class="publication-name">ANG SILAKBO</a>
            </div>
            <div class="publication-tagline">The Official Publication of UCLM-SHS</div>
        </div>
        <div class="header-actions">
            <button class="subscribe-btn">Subscribe</button>
            <button class="search-toggle" id="searchToggle">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <circle cx="11" cy="11" r="8"></circle>
                    <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
                </svg>
            </button>
        </div>
    </div>
</header>

<!-- Navigation -->
<nav class="nav-main">
    <div class="nav-container">
        <button class="mobile-menu-btn" id="mobileMenuBtn">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <line x1="3" y1="12" x2="21" y2="12"></line>
                <line x1="3" y1="6" x2="21" y2="6"></line>
                <line x1="3" y1="18" x2="21" y2="18"></line>
            </svg>
        </button>
        <ul class="nav-list">
            <li class="nav-item"><a href="#" class="nav-link active">Home</a></li>
            <li class="nav-item"><a href="#" class="nav-link">Articles</a></li>
            <li class="nav-item"><a href="#" class="nav-link">Literary</a></li>
            <li class="nav-item"><a href="#" class="nav-link">Feature</a></li>
            <li class="nav-item"><a href="#" class="nav-link">Silak-salitaan</a></li>
            <li class="nav-item"><a href="#" class="nav-link">Photostory</a></li>
        </ul>
    </div>
</nav>

<!-- Search overlay -->
<div class="search-overlay" id="searchOverlay">
    <button class="search-close" id="searchClose">&times;</button>
    <form class="search-form">
        <input type="text" class="search-input" placeholder="Search articles...">
        <button type="submit" class="search-submit">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <circle cx="11" cy="11" r="8"></circle>
                <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
            </svg>
        </button>
    </form>
</div>

<!-- Main content -->
<main class="main-content">
    <div class="container">
        <!-- Hero section with main story and secondary stories -->
        <section class="hero-section">
            <!-- Main story skeleton loader -->
            <div class="main-story" id="mainStorySkeleton">
                <div class="main-story-image-container">
                    <div class="skeleton skeleton-main-image"></div>
                </div>
                <div class="skeleton skeleton-category" style="width: 80px; height: 24px;"></div>
                <div class="skeleton skeleton-title" style="height: 40px; margin-bottom: 1rem;"></div>
                <div class="skeleton skeleton-title" style="height: 40px; width: 80%; margin-bottom: 1rem;"></div>
                <div class="skeleton skeleton-excerpt" style="height: 100px;"></div>
                <div class="story-meta">
                    <div class="skeleton skeleton-author" style="width: 120px;"></div>
                    <div class="skeleton skeleton-date" style="width: 100px;"></div>
                    <div class="skeleton skeleton-date" style="width: 80px;"></div>
                </div>
            </div>
            
            <!-- Secondary stories skeleton loader -->
            <div class="secondary-stories" id="secondaryStoriesSkeleton">
                <div class="skeleton-secondary">
                    <div class="skeleton skeleton-secondary-image"></div>
                    <div class="skeleton-secondary-content">
                        <div class="skeleton skeleton-category"></div>
                        <div class="skeleton skeleton-title-small"></div>
                        <div class="skeleton skeleton-date"></div>
                    </div>
                </div>
                <div class="skeleton-secondary">
                    <div class="skeleton skeleton-secondary-image"></div>
                    <div class="skeleton-secondary-content">
                        <div class="skeleton skeleton-category"></div>
                        <div class="skeleton skeleton-title-small"></div>
                        <div class="skeleton skeleton-date"></div>
                    </div>
                </div>
                <div class="skeleton-secondary">
                    <div class="skeleton skeleton-secondary-image"></div>
                    <div class="skeleton-secondary-content">
                        <div class="skeleton skeleton-category"></div>
                        <div class="skeleton skeleton-title-small"></div>
                        <div class="skeleton skeleton-date"></div>
                    </div>
                </div>
                <div class="skeleton-secondary">
                    <div class="skeleton skeleton-secondary-image"></div>
                    <div class="skeleton-secondary-content">
                        <div class="skeleton skeleton-category"></div>
                        <div class="skeleton skeleton-title-small"></div>
                        <div class="skeleton skeleton-date"></div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Latest Articles section -->
        <section>
            <h2 class="section-title" data-aos="fade-right" data-aos-duration="800">Latest Articles</h2>
            <div class="news-grid" id="postsContainer">
                <!-- Skeleton loaders for news grid -->
                <div class="skeleton-card">
                    <div class="skeleton skeleton-image"></div>
                    <div class="skeleton-content">
                        <div class="skeleton skeleton-category"></div>
                        <div class="skeleton skeleton-title"></div>
                        <div class="skeleton skeleton-excerpt"></div>
                        <div class="skeleton-meta">
                            <div class="skeleton skeleton-author"></div>
                            <div class="skeleton skeleton-date"></div>
                        </div>
                    </div>
                </div>
                <div class="skeleton-card">
                    <div class="skeleton skeleton-image"></div>
                    <div class="skeleton-content">
                        <div class="skeleton skeleton-category"></div>
                        <div class="skeleton skeleton-title"></div>
                        <div class="skeleton skeleton-excerpt"></div>
                        <div class="skeleton-meta">
                            <div class="skeleton skeleton-author"></div>
                            <div class="skeleton skeleton-date"></div>
                        </div>
                    </div>
                </div>
                <div class="skeleton-card">
                    <div class="skeleton skeleton-image"></div>
                    <div class="skeleton-content">
                        <div class="skeleton skeleton-category"></div>
                        <div class="skeleton skeleton-title"></div>
                        <div class="skeleton skeleton-excerpt"></div>
                        <div class="skeleton-meta">
                            <div class="skeleton skeleton-author"></div>
                            <div class="skeleton skeleton-date"></div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Featured section -->
        <section class="featured-section" data-aos="fade-up" data-aos-duration="1000">
            <h2 class="section-title">Featured Stories</h2>
            <div class="featured-grid" id="featuredGrid">
                <!-- Skeleton loaders for featured grid -->
                <div class="skeleton-card">
                    <div class="skeleton skeleton-image" style="height: 180px;"></div>
                    <div class="skeleton-content">
                        <div class="skeleton skeleton-title-small"></div>
                        <div class="skeleton skeleton-date"></div>
                    </div>
                </div>
                <div class="skeleton-card">
                    <div class="skeleton skeleton-image" style="height: 180px;"></div>
                    <div class="skeleton-content">
                        <div class="skeleton skeleton-title-small"></div>
                        <div class="skeleton skeleton-date"></div>
                    </div>
                </div>
                <div class="skeleton-card">
                    <div class="skeleton skeleton-image" style="height: 180px;"></div>
                    <div class="skeleton-content">
                        <div class="skeleton skeleton-title-small"></div>
                        <div class="skeleton skeleton-date"></div>
                    </div>
                </div>
                <div class="skeleton-card">
                    <div class="skeleton skeleton-image" style="height: 180px;"></div>
                    <div class="skeleton-content">
                        <div class="skeleton skeleton-title-small"></div>
                        <div class="skeleton skeleton-date"></div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Two column section with opinion and sidebar -->
        <section class="two-column-section">
            <div class="column-left">
                <h2 class="section-title" data-aos="fade-right" data-aos-duration="800">Opinion & Editorial</h2>
                <div id="literaryOpinionContainer">
                    <!-- Skeleton loaders for literary opinion -->
                    <div class="opinion-card">
                        <div class="skeleton skeleton-category"></div>
                        <div class="skeleton skeleton-title"></div>
                        <div class="opinion-author">
                            <div class="skeleton skeleton-circle"></div>
                            <div class="opinion-author-info" style="width: 100%;">
                                <div class="skeleton skeleton-line-short"></div>
                                <div class="skeleton skeleton-line-short" style="width: 40%;"></div>
                            </div>
                        </div>
                    </div>
                    <div class="opinion-card" style="margin-top: 2rem;">
                        <div class="skeleton skeleton-category"></div>
                        <div class="skeleton skeleton-title"></div>
                        <div class="opinion-author">
                            <div class="skeleton skeleton-circle"></div>
                            <div class="opinion-author-info" style="width: 100%;">
                                <div class="skeleton skeleton-line-short"></div>
                                <div class="skeleton skeleton-line-short" style="width: 40%;"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="column-right">
                <div class="sidebar-widget" data-aos="fade-left" data-aos-duration="800">
                    <h3 class="widget-title">Trending Now</h3>
                    <div class="trending-list" id="trendingList">
                        <!-- Skeleton loaders for trending items -->
                        <div class="skeleton-trending-item">
                            <div class="skeleton skeleton-trending-number"></div>
                            <div class="skeleton-trending-content">
                                <div class="skeleton skeleton-title-small"></div>
                                <div class="skeleton skeleton-date"></div>
                            </div>
                        </div>
                        <div class="skeleton-trending-item">
                            <div class="skeleton skeleton-trending-number"></div>
                            <div class="skeleton-trending-content">
                                <div class="skeleton skeleton-title-small"></div>
                                <div class="skeleton skeleton-date"></div>
                            </div>
                        </div>
                        <div class="skeleton-trending-item">
                            <div class="skeleton skeleton-trending-number"></div>
                            <div class="skeleton-trending-content">
                                <div class="skeleton skeleton-title-small"></div>
                                <div class="skeleton skeleton-date"></div>
                            </div>
                        </div>
                        <div class="skeleton-trending-item">
                            <div class="skeleton skeleton-trending-number"></div>
                            <div class="skeleton-trending-content">
                                <div class="skeleton skeleton-title-small"></div>
                                <div class="skeleton skeleton-date"></div>
                            </div>
                        </div>
                        <div class="skeleton-trending-item" style="border-bottom: none; margin-bottom: 0; padding-bottom: 0;">
                            <div class="skeleton skeleton-trending-number"></div>
                            <div class="skeleton-trending-content">
                                <div class="skeleton skeleton-title-small"></div>
                                <div class="skeleton skeleton-date"></div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="sidebar-widget" data-aos="fade-left" data-aos-duration="800" data-aos-delay="100">
                    <h3 class="widget-title">Newsletter</h3>
                    <p style="margin-bottom: 1rem;">Stay updated with our latest stories and events.</p>
                    <form class="newsletter-form">
                        <input type="email" class="newsletter-input" placeholder="Your email address" required>
                        <button type="submit" class="newsletter-btn">Subscribe</button>
                    </form>
                </div>
                <div class="sidebar-widget" data-aos="fade-left" data-aos-duration="800" data-aos-delay="200">
                    <h3 class="widget-title">Popular Tags</h3>
                    <div class="tags-cloud">
                        <span class="tag">Filipino</span>
                        <span class="tag">Culture</span>
                        <span class="tag">Society</span>
                        <span class="tag">History</span>
                        <span class="tag">Politics</span>
                        <span class="tag">Art</span>
                        <span class="tag">Literature</span>
                        <span class="tag">Poetry</span>
                        <span class="tag">Fiction</span>
                    </div>
                </div>
            </div>
        </section>

        <!-- Load more button -->
        <div class="load-more-container">
            <button id="loadMoreBtn" class="load-more-btn">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <polyline points="7 13 12 18 17 13"></polyline>
                    <polyline points="7 6 12 11 17 6"></polyline>
                </svg>
                Load More Articles
            </button>
        </div>
    </div>
</main>

<!-- Footer -->
<footer class="footer">
    <div class="footer-container">
        <div class="footer-grid">
            <div>
                <div class="footer-logo">
                    <img src="SILAKBO (1).png" alt="Silakbo Logo" onerror="this.src='https://via.placeholder.com/40x40?text=S'; this.onerror=null;">
                    ANG SILAKBO
                </div>
                <p class="footer-description">The official publication of UCLM-SHS, dedicated to showcasing student journalism, literary works, and cultural exploration.</p>
                <div class="footer-social">
                    <a href="#" class="footer-social-link">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z"></path>
                        </svg>
                    </a>
                    <a href="#" class="footer-social-link">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <rect x="2" y="2" width="20" height="20" rx="5" ry="5"></rect>
                            <path d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"></path>
                            <line x1="17.5" y1="6.5" x2="17.51" y2="6.5"></line>
                        </svg>
                    </a>
                    <a href="#" class="footer-social-link">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M23 3a10.9 10.9 0 0 1-3.14 1.53 4.48 4.48 0 0 0-7.86 3v1A10.66 10.66 0 0 1 3 4s-4 9 5 13a11.64 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5 4.5 0 0 0-.08-.83A7.72 7.72 0 0 0 23 3z"></path>
                        </svg>
                    </a>
                </div>
            </div>
            <div>
                <h3 class="footer-title">Categories</h3>
                <div class="footer-links">
                    <a href="#" class="footer-link">Articles</a>
                    <a href="#" class="footer-link">Literary</a>
                    <a href="#" class="footer-link">Feature</a>
                    <a href="#" class="footer-link">Silak-salitaan</a>
                    <a href="#" class="footer-link">Photostory</a>
                </div>
            </div>
            <div>
                <h3 class="footer-title">Quick Links</h3>
                <div class="footer-links">
                    <a href="About Us.html" class="footer-link">About Us</a>
                    <a href="Chat Request.html" class="footer-link">Contact</a>
                    <a href="#" class="footer-link">Submit Work</a>
                    <a href="Ang Silakbo Application.html" class="footer-link">Join Our Team</a>
                    <a href="ToS.html" class="footer-link">Privacy Policy</a>
                </div>
            </div>
            <div>
                <h3 class="footer-title">Contact Us</h3>
                <div class="footer-links">
                    <a href="#" class="footer-link">angsilakbo@gmail.com</a>
                    <a href="#" class="footer-link">+63 2 8123 4567</a>
                    <a href="#" class="footer-link">University of Cebu Lapu-Lapu and Mandaue</a>
                </div>
            </div>
        </div>
        <div class="footer-bottom">
            <p>&copy; 2025 Ang Silakbo Archives. All rights reserved.</p>
        </div>
    </div>
</footer>

<!-- Reading progress bar -->
<div class="reading-progress" id="readingProgress"></div>

<!-- Toast notification -->
<div id="toast" class="toast">Link copied to clipboard!</div>

<!-- Article Modal -->
<div id="articleModal" class="modal">
    <div class="modal-header">
        <div class="modal-logo-container">
            <img src="SILAKBO (1).png" alt="Silakbo Logo" class="modal-logo-img" onerror="this.src='https://via.placeholder.com/40x40?text=S'; this.onerror=null;">
            <div class="modal-logo-text">Ang <span>Silakbo Archives</span></div>
        </div>
    </div>
    <div class="modal-content">
        <div class="article-container" id="modalContent">
            <!-- Article content will be loaded here -->
        </div>
    </div>
    <button id="closeModal" class="close-modal" aria-label="Close article">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <line x1="18" y1="6" x2="6" y2="18"></line>
            <line x1="6" y1="6" x2="18" y2="18"></line>
        </svg>
    </button>
    <!-- Mobile close button for better mobile UX -->
    <button id="mobileCloseModal" class="mobile-close-modal" aria-label="Close article">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <line x1="18" y1="6" x2="6" y2="18"></line>
            <line x1="6" y1="6" x2="18" y2="18"></line>
        </svg>
    </button>
</div>

<!-- Mobile menu -->
<div class="mobile-menu" id="mobileMenu">
    <div class="mobile-menu-header">
        <div class="mobile-logo">
            <img src="SILAKBO (1).png" alt="Silakbo Logo" onerror="this.src='https://via.placeholder.com/30x30?text=S'; this.onerror=null;">
            ANG SILAKBO
        </div>
        <button class="mobile-menu-close" id="mobileMenuClose">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <line x1="18" y1="6" x2="6" y2="18"></line>
                <line x1="6" y1="6" x2="18" y2="18"></line>
            </svg>
        </button>
    </div>
    <nav class="mobile-nav">
        <a href="#" class="mobile-nav-link active">Home</a>
        <a href="#" class="mobile-nav-link">Articles</a>
        <a href="#" class="mobile-nav-link">Literary</a>
        <a href="#" class="mobile-nav-link">Feature</a>
        <a href="#" class="mobile-nav-link">Silak-salitaan</a>
        <a href="#" class="mobile-nav-link">Photostory</a>
        <a href="About Us.html" class="mobile-nav-link">About</a>
        <a href="Chat Request.html" class="mobile-nav-link">Contact</a>
    </nav>
    <div class="mobile-categories">
        <h3 class="mobile-section-title">Categories</h3>
        <div class="mobile-category-links">
            <a href="#" class="mobile-category-link" data-filter="article">Articles</a>
            <a href="#" class="mobile-category-link" data-filter="literary">Literary</a>
            <a href="#" class="mobile-category-link" data-filter="feature">Feature</a>
            <a href="#" class="mobile-category-link" data-filter="silak">Silak-salitaan</a>
            <a href="#" class="mobile-category-link" data-filter="photostory">Photostory</a>
        </div>
    </div>
</div>
<div class="mobile-menu-overlay" id="mobileMenuOverlay"></div>

<script>
const supabaseUrl = "https://uyxgsziyflquisckdwwc.supabase.co";
const supabaseKey = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InV5eGdzeml5ZmxxdWlzY2tkd3djIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDE1OTQyODUsImV4cCI6MjA1NzE3MDI4NX0.DoIEoWWuajDpBhD2UwLYzrKRyZNyBP4izasROCdIbkk";
const { createClient } = window.supabase;
const supabase = createClient(supabaseUrl, supabaseKey, {
    auth: {
        persistSession: false,
    },
    headers: {
        'Access-Control-Allow-Origin': '*',
        'Access-Control-Allow-Headers': 'authorization, x-client-info, apikey, content-type'
    }
});

// DOM Elements
const postsContainer = document.getElementById("postsContainer");
const literaryOpinionContainer = document.getElementById("literaryOpinionContainer");
const articleModal = document.getElementById("articleModal");
const modalContent = document.getElementById("modalContent");
const toast = document.getElementById("toast");
const loadMoreBtn = document.getElementById("loadMoreBtn");
const readingProgress = document.getElementById("readingProgress");
const searchToggle = document.getElementById("searchToggle");
const searchOverlay = document.getElementById("searchOverlay");
const searchClose = document.getElementById("searchClose");
const closeModal = document.getElementById("closeModal");
const mobileCloseModal = document.getElementById("mobileCloseModal");
const mobileMenuBtn = document.getElementById("mobileMenuBtn");
const mobileMenu = document.getElementById("mobileMenu");
const mobileMenuClose = document.getElementById("mobileMenuClose");
const mobileMenuOverlay = document.getElementById("mobileMenuOverlay");
const mainStorySkeleton = document.getElementById("mainStorySkeleton");
const secondaryStoriesSkeleton = document.getElementById("secondaryStoriesSkeleton");
const featuredGrid = document.getElementById("featuredGrid");
const trendingList = document.getElementById("trendingList");

// Set current date
const currentDateElement = document.getElementById("currentDate");
if (currentDateElement) {
    const now = new Date();
    const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
    currentDateElement.textContent = now.toLocaleDateString('en-US', options);
}

// Variables
let allPosts = [];
let displayedPosts = 0;
let postsPerPage = 6;
let currentFilter = 'article';
let currentPostId = null;
let bookmarkedPosts = JSON.parse(localStorage.getItem('bookmarkedPosts')) || [];
let viewCounts = JSON.parse(localStorage.getItem('viewCounts')) || {};
let isLoading = true;

// Initialize AOS animations
document.addEventListener('DOMContentLoaded', function() {
    AOS.init({
        once: true,
        offset: 100,
        easing: 'ease-out-cubic'
    });
});

// Function to truncate text to a specific number of words
function truncateText(text, wordCount) {
    if (!text) return '';
    const words = text.split(' ');
    if (words.length <= wordCount) return text;
    return words.slice(0, wordCount).join(' ') + '...';
}

// Function to format date
function formatDate(dateString) {
    if (!dateString) return '';
    const date = new Date(dateString);
    return date.toLocaleDateString('en-US', { 
        year: 'numeric', 
        month: 'long', 
        day: 'numeric' 
    });
}

// Function to get relative time (e.g., "2 days ago")
function getRelativeTime(dateString) {
    if (!dateString) return '';

    const date = new Date(dateString);
    const now = new Date();
    const diffTime = Math.abs(now - date);
    const diffDays = Math.floor(diffTime / (1000 * 60 * 60 * 24));

    if (diffDays === 0) {
        const diffHours = Math.floor(diffTime / (1000 * 60 * 60));
        if (diffHours === 0) {
            const diffMinutes = Math.floor(diffTime / (1000 * 60));
            return diffMinutes === 0 ? 'Just now' : `${diffMinutes} minute${diffMinutes !== 1 ? 's' : ''} ago`;
        }
        return `${diffHours} hour${diffHours !== 1 ? 's' : ''} ago`;
    } else if (diffDays < 7) {
        return `${diffDays} day${diffDays !== 1 ? 's' : ''} ago`;
    } else if (diffDays < 30) {
        const diffWeeks = Math.floor(diffDays / 7);
        return `${diffWeeks} week${diffWeeks !== 1 ? 's' : ''} ago`;
    } else if (diffDays < 365) {
        const diffMonths = Math.floor(diffDays / 30);
        return `${diffMonths} month${diffMonths !== 1 ? 's' : ''} ago`;
    } else {
        const diffYears = Math.floor(diffDays / 365);
        return `${diffYears} year${diffYears !== 1 ? 's' : ''} ago`;
    }
}

// Function to strip HTML tags
function stripHtml(html) {
    if (!html) return '';
    const tmp = document.createElement('DIV');
    tmp.innerHTML = html;
    return tmp.textContent || tmp.innerText || '';
}

// Function to get a title for the post
function getPostTitle(post) {
    return post.title || post.category.charAt(0).toUpperCase() + post.category.slice(1);
}

// Function to generate a slug from a string
function generateSlug(text) {
    return text.toString().toLowerCase()
        .replace(/\s+/g, '-')
        .replace(/[^\w\-]+/g, '')
        .replace(/\-\-+/g, '-')
        .replace(/^-+/, '')
        .replace(/-+$/, '');
}

// Function to get post URL
function getPostUrl(post) {
    const title = getPostTitle(post);
    const slug = generateSlug(title);
    return `${window.location.origin}${window.location.pathname}?post=${post.id}&title=${slug}`;
}

// Function to copy text to clipboard
function copyToClipboard(text) {
    navigator.clipboard.writeText(text).then(() => {
        toast.classList.add('show');
        setTimeout(() => {
            toast.classList.remove('show');
        }, 3000);
    }).catch(err => {
        console.error('Could not copy text: ', err);
    });
}

// Function to toggle bookmark on a post
function toggleBookmark(postId) {
    const index = bookmarkedPosts.indexOf(postId);
    if (index === -1) {
        bookmarkedPosts.push(postId);
    } else {
        bookmarkedPosts.splice(index, 1);
    }
    localStorage.setItem('bookmarkedPosts', JSON.stringify(bookmarkedPosts));
    return bookmarkedPosts.includes(postId);
}

// Function to check if a post is bookmarked
function isPostBookmarked(postId) {
    return bookmarkedPosts.includes(postId);
}

// Function to increment view count
async function incrementViewCount(postId) {
    try {
        if (!viewCounts[postId]) {
            viewCounts[postId] = true;
            localStorage.setItem('viewCounts', JSON.stringify(viewCounts));
            
            const post = allPosts.find(p => p.id == postId);
            if (post) {
                const newViews = (post.views || 0) + 1;
                post.views = newViews;
                
                const { error } = await supabase
                    .from('posts')
                    .update({ views: newViews })
                    .eq('id', postId);
                
                if (error) throw error;
            }
        }
    } catch (error) {
        console.error('Error incrementing view count:', error);
    }
}

// Function to estimate reading time
function getReadingTime(text) {
    const wordsPerMinute = 200;
    const wordCount = text.split(/\s+/).length;
    const readingTime = Math.ceil(wordCount / wordsPerMinute);
    return readingTime < 1 ? 1 : readingTime;
}

// Function to filter posts
function filterPosts(filter) {
    currentFilter = filter;
    displayedPosts = 0;
    
    // Show skeleton loaders
    postsContainer.innerHTML = "";
    for (let i = 0; i < 3; i++) {
        const skeletonCard = document.createElement('div');
        skeletonCard.className = 'skeleton-card';
        skeletonCard.innerHTML = `
            <div class="skeleton skeleton-image"></div>
            <div class="skeleton-content">
                <div class="skeleton skeleton-category"></div>
                <div class="skeleton skeleton-title"></div>
                <div class="skeleton skeleton-excerpt"></div>
                <div class="skeleton-meta">
                    <div class="skeleton skeleton-author"></div>
                    <div class="skeleton skeleton-date"></div>
                </div>
            </div>
        `;
        postsContainer.appendChild(skeletonCard);
    }
    
    // Hide load more button while loading
    loadMoreBtn.style.display = 'none';
    
    // Short timeout to simulate loading
    setTimeout(() => {
        let filteredPosts = allPosts.filter(post => post.category.toLowerCase() === filter);
        postsContainer.innerHTML = "";
        
        if (filteredPosts.length === 0) {
            postsContainer.innerHTML = `
                <div style="grid-column: 1 / -1; text-align: center; padding: 2rem; color: var(--text-light);">
                    No articles found in this category. Please try another filter.
                </div>
            `;
            loadMoreBtn.style.display = 'none';
            return;
        }

        loadMorePosts(filteredPosts);
        updateLoadMoreButton(filteredPosts);
        addEventListeners();
    }, 800);
}

// Function to load more posts
function loadMorePosts(filteredPosts) {
    const startIndex = displayedPosts;
    const endIndex = Math.min(startIndex + postsPerPage, filteredPosts.length);
    const postsToDisplay = filteredPosts.slice(startIndex, endIndex);

    postsToDisplay.forEach((post, index) => {
        createNewsCard(post, index);
    });

    displayedPosts += postsToDisplay.length;
    updateLoadMoreButton(filteredPosts);
    addEventListeners();
}

// Function to update load more button visibility
function updateLoadMoreButton(filteredPosts) {
    if (displayedPosts >= filteredPosts.length) {
        loadMoreBtn.style.display = 'none';
    } else {
        loadMoreBtn.style.display = 'flex';
    }
}

// Function to create a news card
function createNewsCard(post, index = 0, container = postsContainer) {
    const hasImage = post.image_url ? true : false;
    const plainTextContent = stripHtml(post.content);
    const excerpt = truncateText(plainTextContent, 20);
    const title = getPostTitle(post);
    const postDate = post.created_at || post.date || post.timestamp;
    const dateDisplay = postDate ? formatDate(postDate) : '';

    const cardElement = document.createElement("div");
    cardElement.classList.add("news-card");
    cardElement.dataset.postId = post.id;
    
    // Add animation with delay based on index
    cardElement.setAttribute('data-aos', 'fade-up');
    cardElement.setAttribute('data-aos-duration', '800');
    cardElement.setAttribute('data-aos-delay', (index * 100).toString());

    cardElement.innerHTML = `
        <div class="news-card-image-container">
            <img src="${hasImage ? post.image_url : 'https://via.placeholder.com/400x300'}" alt="${title}" class="news-card-image" onerror="this.src='https://via.placeholder.com/400x300?text=${post.category}'">
        </div>
        <div class="news-card-content">
            <div class="news-card-category">${post.category}</div>
            <h3 class="news-card-title">${title}</h3>
            <p class="news-card-excerpt">${excerpt}</p>
            <div class="news-card-meta">
                <div class="news-card-author">By ${post.author || 'Unknown'}</div>
                <div class="news-card-date">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
                        <line x1="16" y1="2" x2="16" y2="6"></line>
                        <line x1="8" y1="2" x2="8" y2="6"></line>
                        <line x1="3" y1="10" x2="21" y2="10"></line>
                    </svg>
                    ${dateDisplay}
                </div>
            </div>
        </div>
    `;

    container.appendChild(cardElement);
}

// Function to create an opinion card for literary posts
function createOpinionCard(post, index = 0) {
    const title = getPostTitle(post);
    const author = post.author || 'Unknown';
    const authorTitle = post.author_title || 'Contributor';
    const authorImage = post.author_image || `https://via.placeholder.com/50x50?text=${author.charAt(0)}`;
    
    const cardElement = document.createElement("div");
    cardElement.classList.add("opinion-card");
    cardElement.dataset.postId = post.id;
    
    // Add animation with delay based on index
    cardElement.setAttribute('data-aos', 'fade-up');
    cardElement.setAttribute('data-aos-duration', '800');
    cardElement.setAttribute('data-aos-delay', (index * 100).toString());

    cardElement.innerHTML = `
        <div class="opinion-label">${post.category}</div>
        <h3 class="opinion-title">${title}</h3>
        <div class="opinion-author">
            <div class="opinion-author-image-container">
                <img src="${authorImage}" alt="${author}" class="opinion-author-image" onerror="this.src='https://via.placeholder.com/50x50?text=${author.charAt(0)}'">
            </div>
            <div class="opinion-author-info">
                <div class="opinion-author-name">${author}</div>
                <div class="opinion-author-title">${authorTitle}</div>
            </div>
        </div>
    `;

    return cardElement;
}

// Function to open article
function openArticle(postId) {
    const post = allPosts.find(p => p.id == postId);
    if (!post) return;

    currentPostId = postId;

    // Update URL without refreshing the page
    const postUrl = getPostUrl(post);
    window.history.pushState({ postId }, '', postUrl);

    const hasImage = post.image_url ? true : false;
    const title = getPostTitle(post);
    const plainTextContent = stripHtml(post.content);
    const postDate = post.created_at || post.date || post.timestamp;
    const dateDisplay = postDate ? formatDate(postDate) : '';
    const readingTime = getReadingTime(plainTextContent);
    const viewCount = post.views || 0;

    // Special layout for Silak-salitaan
    let specialContent = '';
    if (post.category.toLowerCase() === 'silak') {
        specialContent = `
            <div class="silak-container">
                <h2 class="silak-title">Silak-salitaan</h2>
                <div class="silak-word">
                    <h3 class="silak-word-title">${post.title || 'Salitang Filipino'}</h3>
                    <div class="silak-pronunciation">${post.pronunciation || ''}</div>
                    <div class="silak-part-of-speech">${post.part_of_speech || 'Pangngalan'}</div>
                    <div class="silak-definition">${post.definition || ''}</div>
                    <div class="silak-image-container">
                        <img src="${hasImage ? post.image_url : 'https://via.placeholder.com/800x450?text=Silak-salitaan'}" alt="${title}" class="silak-image">
                    </div>
                    <div class="silak-example">${post.example || ''}</div>
                </div>
            </div>
        `;
    }
    
    // Special layout for Photostory - now with only one photo
    else if (post.category.toLowerCase() === 'photostory') {
        specialContent = `
            <div class="photostory-container">
                <h2 class="photostory-title">${title}</h2>
                <div class="photostory-meta">
                    <div class="photostory-author">By: ${post.author || 'Unknown'}</div>
                    <div class="photostory-date">${dateDisplay}</div>
                </div>
                <div class="photostory-image-container">
                    <img src="${hasImage ? post.image_url : 'https://via.placeholder.com/800x450'}" alt="${title}" class="photostory-image">
                </div>
                <div class="photostory-caption">${post.caption || 'Larawan: ' + title}</div>
                <div class="photostory-description">${plainTextContent}</div>
                <div class="article-actions" style="margin-top: 1.5rem;">
                    <div class="share-container">
                        <div class="share-label">Share this photo:</div>
                        <div class="share-options">
                            <button class="share-option" id="shareFacebook" title="Share on Facebook">
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <path d="M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z"></path>
                                </svg>
                            </button>
                            <button class="share-option" id="shareTwitter" title="Share on Twitter">
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <path d="M23 3a10.9 10.9 0 0 1-3.14 1.53 4.48 4.48 0 0 0-7.86 3v1A10.66 10.66 0 0 1 3 4s-4 9 5 13a11.64 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5 4.5 0 0 0-.08-.83A7.72 7.72 0 0 0 23 3z"></path>
                                </svg>
                            </button>
                            <button class="share-option" id="shareLink" title="Copy link">
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path>
                                    <path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path>
                                </svg>
                            </button>
                        </div>
                    </div>
                    <button class="share-option" id="bookmarkBtn" title="${isPostBookmarked(post.id) ? 'Remove bookmark' : 'Bookmark this article'}">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="${isPostBookmarked(post.id) ? 'currentColor' : 'none'}" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"></path>
                        </svg>
                    </button>
                </div>
            </div>
        `;
    }

    modalContent.innerHTML = `
        <div class="article-inner">
            <div class="article-header">
                <div class="article-category">${post.category}</div>
                <h1 class="article-title">${title}</h1>
                <div class="article-meta">
                    <div class="article-meta-item">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                            <circle cx="12" cy="7" r="4"></circle>
                        </svg>
                        By: ${post.author || 'Unknown'}
                    </div>
                    <div class="article-meta-item">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
                            <line x1="16" y1="2" x2="16" y2="6"></line>
                            <line x1="8" y1="2" x2="8" y2="6"></line>
                            <line x1="3" y1="10" x2="21" y2="10"></line>
                        </svg>
                        ${dateDisplay}
                    </div>
                    <div class="article-meta-item">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <circle cx="12" cy="12" r="10"></circle>
                            <polyline points="12 6 12 12 16 14"></polyline>
                        </svg>
                        ${readingTime} min read
                    </div>
                    <div class="article-meta-item">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
                            <circle cx="12" cy="12" r="3"></circle>
                        </svg>
                        ${viewCount} views
                    </div>
                </div>
            </div>
            
            ${hasImage && !specialContent ? `
            <div class="article-cover">
                <img src="${post.image_url}" alt="${title}" onerror="this.style.display='none'">
            </div>
            ` : ''}
            
            ${specialContent ? specialContent : `<div class="article-content">${post.content}</div>`}
            
            ${!specialContent ? `
            <div class="article-tags">
                <span class="article-tag">Filipino</span>
                <span class="article-tag">Culture</span>
                <span class="article-tag">${post.category}</span>
            </div>
            
            <div class="article-actions">
                <div class="share-container">
                    <div class="share-label">Share this article:</div>
                    <div class="share-options">
                        <button class="share-option" id="shareFacebook" title="Share on Facebook">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <path d="M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h3l1-4h-4V7a1 1 0 0 1 1-1h3z"></path>
                            </svg>
                        </button>
                        <button class="share-option" id="shareTwitter" title="Share on Twitter">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <path d="M23 3a10.9 10.9 0 0 1-3.14 1.53 4.48 4.48 0 0 0-7.86 3v1A10.66 10.66 0 0 1 3 4s-4 9 5 13a11.64 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5 4.5 0 0 0-.08-.83A7.72 7.72 0 0 0 23 3z"></path>
                            </svg>
                        </button>
                        <button class="share-option" id="shareLink" title="Copy link">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path>
                                <path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path>
                            </svg>
                        </button>
                    </div>
                </div>
                <button class="share-option" id="bookmarkBtn" title="${isPostBookmarked(post.id) ? 'Remove bookmark' : 'Bookmark this article'}">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="${isPostBookmarked(post.id) ? 'currentColor' : 'none'}" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"></path>
                    </svg>
                </button>
            </div>
            ` : ''}
        </div>
    `;

    // Add event listeners to share buttons
    const shareFacebook = document.getElementById('shareFacebook');
    const shareTwitter = document.getElementById('shareTwitter');
    const shareLink = document.getElementById('shareLink');
    const bookmarkBtn = document.getElementById('bookmarkBtn');

    if (shareFacebook) {
        shareFacebook.addEventListener('click', () => {
            window.open(`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(postUrl)}`, '_blank');
        });
    }

    if (shareTwitter) {
        shareTwitter.addEventListener('click', () => {
            window.open(`https://twitter.com/intent/tweet?url=${encodeURIComponent(postUrl)}&text=${encodeURIComponent(title)}`, '_blank');
        });
    }

    if (shareLink) {
        shareLink.addEventListener('click', () => {
            copyToClipboard(postUrl);
        });
    }

    if (bookmarkBtn) {
        bookmarkBtn.addEventListener('click', () => {
            const isBookmarked = toggleBookmark(post.id);
            bookmarkBtn.title = isBookmarked ? 'Remove bookmark' : 'Bookmark this article';
            bookmarkBtn.querySelector('svg').setAttribute('fill', isBookmarked ? 'currentColor' : 'none');
        });
    }

    // Show the modal with animation
    articleModal.style.display = "block";
    document.body.style.overflow = "hidden"; // Prevent scrolling behind modal

    // Trigger animations
    setTimeout(() => {
        articleModal.classList.add('active');
    }, 10);

    // Reset reading progress
    readingProgress.style.width = '0';

    // Add scroll event for reading progress
    const modalContentElement = document.querySelector('.modal-content');
    modalContentElement.addEventListener('scroll', updateReadingProgress);
}

// Function to update reading progress
function updateReadingProgress() {
    const modalContentElement = document.querySelector('.modal-content');
    const scrollTop = modalContentElement.scrollTop;
    const scrollHeight = modalContentElement.scrollHeight;
    const clientHeight = modalContentElement.clientHeight;

    const scrollPercentage = (scrollTop / (scrollHeight - clientHeight)) * 100;
    readingProgress.style.width = `${Math.min(scrollPercentage, 100)}%`;
}

// Function to close the article modal
function closeArticleModal() {
    articleModal.classList.remove('active');

    setTimeout(() => {
        articleModal.style.display = "none";
        document.body.style.overflow = "auto"; // Re-enable scrolling
        
        // Update URL to remove post parameter
        window.history.pushState({}, '', window.location.pathname);
        currentPostId = null;
    }, 300);
}

// Function to add event listeners
function addEventListeners() {
    // Add event listeners to all news cards
    document.querySelectorAll('.news-card, .featured-card, .secondary-story, .trending-item, .opinion-card').forEach(card => {
        card.addEventListener('click', () => {
            const postId = card.dataset.postId;
            if (postId) {
                openArticle(postId);
                incrementViewCount(postId);
            }
        });
    });
}

// Function to search posts
function searchPosts(query) {
    // Show skeleton loaders
    postsContainer.innerHTML = "";
    for (let i = 0; i < 3; i++) {
        const skeletonCard = document.createElement('div');
        skeletonCard.className = 'skeleton-card';
        skeletonCard.innerHTML = `
            <div class="skeleton skeleton-image"></div>
            <div class="skeleton-content">
                <div class="skeleton skeleton-category"></div>
                <div class="skeleton skeleton-title"></div>
                <div class="skeleton skeleton-excerpt"></div>
                <div class="skeleton-meta">
                    <div class="skeleton skeleton-author"></div>
                    <div class="skeleton skeleton-date"></div>
                </div>
            </div>
        `;
        postsContainer.appendChild(skeletonCard);
    }
    
    // Hide load more button while loading
    loadMoreBtn.style.display = 'none';
    
    // Short timeout to simulate loading
    setTimeout(() => {
        // Filter posts that match the query in title, content, or author
        const results = allPosts.filter(post => {
            const title = getPostTitle(post).toLowerCase();
            const content = stripHtml(post.content || '').toLowerCase();
            const author = (post.author || '').toLowerCase();
            const category = (post.category || '').toLowerCase();
            
            query = query.toLowerCase();
            
            return title.includes(query) || 
                content.includes(query) || 
                author.includes(query) ||
                category.includes(query);
        });
        
        // Clear the posts container
        postsContainer.innerHTML = '';
        
        // Show search results heading
        const searchResultsHeading = document.createElement('h2');
        searchResultsHeading.className = 'section-title';
        searchResultsHeading.style.gridColumn = '1 / -1';
        searchResultsHeading.textContent = `Search Results for "${query}"`;
        postsContainer.appendChild(searchResultsHeading);
        
        // Display results or no results message
        if (results.length === 0) {
            const noResults = document.createElement('div');
            noResults.style.gridColumn = '1 / -1';
            noResults.style.textAlign = 'center';
            noResults.style.padding = '3rem 1rem';
            noResults.style.color = 'var(--text-light)';
            noResults.innerHTML = `
                <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="margin: 0 auto 1rem;">
                    <circle cx="11" cy="11" r="8"></circle>
                    <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
                    <line x1="8" y1="11" x2="14" y2="11"></line>
                </svg>
                <h3 style="margin-bottom: 0.5rem; font-size: 1.5rem;">No results found</h3>
                <p>We couldn't find any articles matching your search.</p>
            `;
            postsContainer.appendChild(noResults);
        } else {
            // Create a container for the results
            const resultsContainer = document.createElement('div');
            resultsContainer.className = 'news-grid';
            resultsContainer.style.gridColumn = '1 / -1';
            postsContainer.appendChild(resultsContainer);
            
            // Display each result
            results.forEach((post, index) => {
                createNewsCard(post, index, resultsContainer);
            });
            
            // Add event listeners to the new cards
            addEventListeners();
        }
        
        // Hide load more button
        loadMoreBtn.style.display = 'none';
    }, 800);
}

// Function to update trending section with real data
function updateTrendingSection() {
    if (allPosts.length === 0) return;
    
    // Sort posts by views (descending)
    const trendingPosts = [...allPosts]
        .sort((a, b) => (b.views || 0) - (a.views || 0))
        .slice(0, 5); // Get top 5
    
    // Clear existing trending items
    trendingList.innerHTML = '';
    
    // Add trending posts
    trendingPosts.forEach((post, index) => {
        const title = getPostTitle(post);
        const timeAgo = getRelativeTime(post.created_at || post.date || post.timestamp);
        
        const trendingItem = document.createElement('div');
        trendingItem.className = 'trending-item';
        trendingItem.dataset.postId = post.id;
        
        trendingItem.innerHTML = `
            <div class="trending-number">${index + 1}</div>
            <div class="trending-content">
                <h4 class="trending-title">${title}</h4>
                <div class="trending-meta">${timeAgo}</div>
            </div>
        `;
        
        trendingList.appendChild(trendingItem);
    });
    
    // Add event listeners to trending items
    document.querySelectorAll('.trending-item').forEach(item => {
        item.addEventListener('click', () => {
            const postId = item.dataset.postId;
            if (postId) {
                openArticle(postId);
                incrementViewCount(postId);
            }
        });
    });
}

// Function to update hero section with real data
function updateHeroSection() {
    if (allPosts.length === 0) return;
    
    // Get the most recent post for main story
    const featuredPost = allPosts[0];
    
    // Get the next 4 posts for secondary stories
    const secondaryPosts = allPosts.slice(1, 5);
    
    // Create main story element
    const mainStory = document.createElement('div');
    mainStory.className = 'main-story';
    mainStory.dataset.postId = featuredPost.id;
    mainStory.setAttribute('data-aos', 'fade-up');
    mainStory.setAttribute('data-aos-duration', '1000');
    
    const title = getPostTitle(featuredPost);
    const plainTextContent = stripHtml(featuredPost.content || '');
    const excerpt = truncateText(plainTextContent, 40);
    const hasImage = featuredPost.image_url ? true : false;
    const postDate = formatDate(featuredPost.created_at || featuredPost.date || featuredPost.timestamp);
    
    mainStory.innerHTML = `
        <div class="main-story-image-container">
            <img src="${hasImage ? featuredPost.image_url : 'https://via.placeholder.com/800x500'}" alt="${title}" class="main-story-image" onerror="this.src='https://via.placeholder.com/800x500?text=${featuredPost.category}'">
        </div>
        <div class="category-tag">${featuredPost.category}</div>
        <h1 class="main-story-title">${title}</h1>
        <p class="main-story-excerpt">${excerpt}</p>
        <div class="story-meta">
            <div class="meta-author">By <span>${featuredPost.author || 'Unknown'}</span></div>
            <div class="meta-date">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
                    <line x1="16" y1="2" x2="16" y2="6"></line>
                    <line x1="8" y1="2" x2="8" y2="6"></line>
                    <line x1="3" y1="10" x2="21" y2="10"></line>
                </svg>
                ${postDate}
            </div>
            <div class="meta-time">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <circle cx="12" cy="12" r="10"></circle>
                    <polyline points="12 6 12 12 16 14"></polyline>
                </svg>
                ${getReadingTime(plainTextContent)} min read
            </div>
        </div>
    `;
    
    // Replace skeleton with main story
    mainStorySkeleton.parentNode.replaceChild(mainStory, mainStorySkeleton);
    
    // Create secondary stories container
    const secondaryStoriesContainer = document.createElement('div');
    secondaryStoriesContainer.className = 'secondary-stories';
    
    // Add secondary stories
    secondaryPosts.forEach((post, index) => {
        const title = getPostTitle(post);
        const hasImage = post.image_url ? true : false;
        const postDate = formatDate(post.created_at || post.date || post.timestamp);
        
        const secondaryStory = document.createElement('div');
        secondaryStory.className = 'secondary-story';
        secondaryStory.dataset.postId = post.id;
        secondaryStory.setAttribute('data-aos', 'fade-left');
        secondaryStory.setAttribute('data-aos-duration', '800');
        secondaryStory.setAttribute('data-aos-delay', (index * 100).toString());
        
        secondaryStory.innerHTML = `
            <div class="secondary-story-image-container">
                <img src="${hasImage ? post.image_url : 'https://via.placeholder.com/120x120'}" alt="${title}" class="secondary-story-image" onerror="this.src='https://via.placeholder.com/120x120?text=${post.category}'">
            </div>
            <div class="secondary-story-content">
                <div class="secondary-story-category">${post.category}</div>
                <h2 class="secondary-story-title">${title}</h2>
                <div class="secondary-story-meta">${postDate}</div>
            </div>
        `;
        
        secondaryStoriesContainer.appendChild(secondaryStory);
    });
    
    // Replace skeleton with secondary stories
    secondaryStoriesSkeleton.parentNode.replaceChild(secondaryStoriesContainer, secondaryStoriesSkeleton);
    
    // Add event listeners
    mainStory.addEventListener('click', () => {
        openArticle(featuredPost.id);
        incrementViewCount(featuredPost.id);
    });
    
    document.querySelectorAll('.secondary-story').forEach(story => {
        story.addEventListener('click', () => {
            const postId = story.dataset.postId;
            if (postId) {
                openArticle(postId);
                incrementViewCount(postId);
            }
        });
    });
}

// Function to update featured section with real data
function updateFeaturedSection() {
    if (allPosts.length === 0) return;
    
    // Get posts with feature category or high view count
    const featuredPosts = allPosts.filter(post => 
        post.category.toLowerCase() === 'feature' || (post.views || 0) > 5
    ).slice(0, 4); // Get up to 4 posts
    
    // Clear existing featured cards
    featuredGrid.innerHTML = '';
    
    // Add featured posts
    featuredPosts.forEach((post, index) => {
        const title = getPostTitle(post);
        const hasImage = post.image_url ? true : false;
        const author = post.author || 'Unknown';
        const postDate = formatDate(post.created_at || post.date || post.timestamp);
        
        const featuredCard = document.createElement('div');
        featuredCard.className = 'featured-card';
        featuredCard.dataset.postId = post.id;
        featuredCard.setAttribute('data-aos', 'fade-up');
        featuredCard.setAttribute('data-aos-duration', '800');
        featuredCard.setAttribute('data-aos-delay', (index * 100).toString());
        
        featuredCard.innerHTML = `
            <div class="featured-card-image-container">
                <img src="${hasImage ? post.image_url : 'https://via.placeholder.com/300x180'}" alt="${title}" class="featured-card-image" onerror="this.src='https://via.placeholder.com/300x180?text=${post.category}'">
            </div>
            <div class="featured-card-content">
                <h3 class="featured-card-title">${title}</h3>
                <div class="featured-card-meta">By ${author} â€¢ ${postDate}</div>
            </div>
        `;
        
        featuredGrid.appendChild(featuredCard);
    });
    
    // Add event listeners to featured cards
    document.querySelectorAll('.featured-card').forEach(card => {
        card.addEventListener('click', () => {
            const postId = card.dataset.postId;
            if (postId) {
                openArticle(postId);
                incrementViewCount(postId);
            }
        });
    });
}

// Function to update Opinion & Analysis section with literary posts
function updateOpinionSection() {
    if (allPosts.length === 0) return;
    
    // Get posts with literary category
    const literaryPosts = allPosts.filter(post => 
        post.category.toLowerCase() === 'literary'
    ).slice(0, 3); // Get up to 3 posts
    
    // Clear existing opinion cards
    literaryOpinionContainer.innerHTML = '';
    
    // Add literary posts as opinion cards
    literaryPosts.forEach((post, index) => {
        // Add author images for literary posts
        post.author_image = `https://via.placeholder.com/50x50?text=${post.author ? post.author.charAt(0) : 'A'}`;
        
        const opinionCard = createOpinionCard(post, index);
        literaryOpinionContainer.appendChild(opinionCard);
    });
    
    // If no literary posts, show a message
    if (literaryPosts.length === 0) {
        literaryOpinionContainer.innerHTML = `
            <div style="text-align: center; padding: 2rem; color: var(--text-light);">
                No literary articles found. Check back soon for updates.
            </div>
        `;
    }
    
    // Add event listeners
    addEventListeners();
}

// Email validation helper
function isValidEmail(email) {
    const re = /^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
    return re.test(String(email).toLowerCase());
}

// Update all dynamic sections after fetching posts
function updateDynamicSections() {
    updateHeroSection();
    updateTrendingSection();
    updateFeaturedSection();
    updateOpinionSection();
    isLoading = false;
}

// Fetch posts from Supabase
async function fetchPosts() {
    try {
        const { data: posts, error } = await supabase.from("posts").select("*");
        
        if (error) {
            throw error;
        }

        if (posts && posts.length > 0) {
            // Sort posts by created_at date (newest first)
            allPosts = [...posts].sort((a, b) => {
                const dateA = a.created_at || a.date || a.timestamp || a.id;
                const dateB = b.created_at || b.date || b.timestamp || b.id;
                return new Date(dateB) - new Date(dateA);
            });
        } else {
            // Create sample posts if no posts exist
            const samplePosts = [
                {
                    id: 1,
                    title: "The Evolution of Filipino Literature in the Digital Age",
                    category: "Feature",
                    author: "Maria Santos",
                    created_at: "2025-03-25",
                    content: "<p>As technology continues to reshape our world, Filipino literature finds new expressions and audiences through digital platforms, creating unprecedented opportunities for young writers.</p><p>The digital revolution has transformed how we create, share, and consume literature. For Filipino writers, this shift has opened doors to global audiences while presenting new challenges in preserving cultural authenticity.</p><p>Young Filipino authors are increasingly turning to online platforms to share their work, bypassing traditional publishing routes that were once gatekeepers to literary recognition. This democratization of publishing has led to a flourishing of diverse voices and perspectives.</p><p>However, questions remain about how digital mediums affect the depth and quality of literary works. Some critics argue that the immediacy of online platforms encourages shorter, more consumable content at the expense of more complex narratives.</p><p>Despite these concerns, the digital age has undeniably revitalized interest in Filipino literature among younger generations, creating new communities of readers and writers connected by their shared cultural heritage.</p>",
                    views: 120,
                    image_url: "https://via.placeholder.com/800x500?text=Filipino+Literature"
                },
                {
                    id: 2,
                    title: "Student Poets Win National Recognition in Annual Competition",
                    category: "Literary",
                    author: "Juan Dela Cruz",
                    author_title: "Literary Editor",
                    created_at: "2025-03-24",
                    content: "<p>Three UCLM-SHS students have received national recognition for their outstanding poetry submissions in this year's Philippine Youth Literary Awards.</p><p>The competition, which drew over 5,000 entries from across the country, celebrates young voices in Philippine literature and provides a platform for emerging writers to showcase their talent.</p><p>Senior student Ana Reyes won first place in the Filipino Poetry category with her collection titled \"Mga Bulong ng Kahapon\" (Whispers of Yesterday), which explores themes of ancestral memory and cultural identity.</p><p>\"Poetry allows me to connect with my roots in ways that everyday conversation cannot,\" Reyes explained during the awards ceremony. \"Through poetry, I can preserve the stories my grandparents told me and share them with future generations.\"</p><p>Sophomore Miguel Santos received second place in the English Poetry division for his work \"Echoes of Manila,\" a vivid portrayal of urban life and social inequality in the capital.</p><p>First-year student Sophia Lim earned an honorable mention for her experimental bilingual poetry that seamlessly weaves together English and Filipino, reflecting the linguistic reality of many young Filipinos today.</p><p>UCLM-SHS's literary program coordinator, Professor Elena Magsaysay, attributes the students' success to the school's emphasis on cultural literacy and creative expression.</p><p>\"We encourage our students to find their authentic voice and use it to explore both personal and societal issues,\" said Magsaysay. \"These awards affirm that our young writers have important things to say and the talent to say them beautifully.\"</p>",
                    views: 85,
                    image_url: "https://via.placeholder.com/400x300?text=Student+Poets"
                },
                {
                    id: 3,
                    title: "Preserving Indigenous Filipino Words Through Modern Media",
                    category: "Silak",
                    author: "Antonio Reyes",
                    created_at: "2025-03-23",
                    content: "<p>A new initiative by UCLM-SHS students aims to document and preserve indigenous Filipino words through digital storytelling and social media campaigns.</p><p>The project, titled \"Salita ng Ninuno\" (Words of the Ancestors), collects terms from various Philippine languages that are at risk of being forgotten in the increasingly English-dominated digital landscape.</p><p>Students work with linguistic experts and community elders to ensure accurate documentation of not just the words themselves, but their cultural context and proper usage.</p><p>\"Many of these words contain wisdom and worldviews that can't be directly translated into English,\" explains project leader Carlos Domingo. \"When we lose these words, we lose entire ways of understanding our relationship with nature, community, and spirituality.\"</p><p>The team has already documented over 200 indigenous terms and created engaging content that has reached thousands of young Filipinos through platforms like TikTok and Instagram.</p>",
                    pronunciation: "sa-li-ta ng ni-nu-no",
                    part_of_speech: "Pangngalan",
                    definition: "Isang proyekto na naglalayong mapreserba ang mga katutubong salita ng Pilipinas sa pamamagitan ng digital storytelling at social media.",
                    example: "Ang Salita ng Ninuno ay nakatulong upang makilala ng mga kabataan ang kayamanang pangwika ng ating bansa.",
                    views: 65,
                    image_url: "https://via.placeholder.com/400x300?text=Indigenous+Words"
                },
                {
                    id: 4,
                    title: "A Day in the Life: Visual Journey Through Campus Culture",
                    category: "Photostory",
                    author: "Gabriela Santos",
                    created_at: "2025-03-22",
                    content: "<p>This photo essay captures the vibrant daily life of UCLM-SHS students, from early morning study sessions to afternoon cultural performances and evening dormitory activities.</p><p>Photographer Gabriela Santos spent a month documenting the rhythms and rituals that define the student experience, focusing particularly on how traditional Filipino values manifest in a modern educational setting.</p><p>\"I wanted to show how our generation balances our cultural heritage with contemporary influences,\" Santos explains. \"You can see students performing traditional dances in the morning and coding apps in the afternoon.\"</p><p>The images reveal a community where respect for elders coexists with technological innovation, and where bayanihan (communal unity) remains a core value despite the increasingly individualistic tendencies of digital culture.</p><p>Faculty advisor Dr. Ramon Flores praises the project for its authentic portrayal of student life: \"These photographs tell a story about Filipino youth that contradicts many stereotypes. They show young people who are deeply connected to their roots while confidently facing the future.\"</p>",
                    views: 92,
                    image_url: "https://via.placeholder.com/800x450?text=Campus+Life",
                    caption: "Students gather in the central plaza for the annual Buwan ng Wika celebration, showcasing traditional Filipino attire and performances.",
                },
                {
                    id: 5,
                    title: "The Rising Influence of Filipino Youth in Global Literature",
                    category: "Feature",
                    author: "Marco Bonifacio",
                    created_at: "2025-03-21",
                    content: "<p>Young Filipino writers are increasingly making their mark on the global literary scene, bringing unique perspectives shaped by the country's complex cultural history.</p><p>International literary festivals and publishing houses have begun to take notice of the distinctive voice emerging from Philippine youth literatureâ€”one that often navigates between multiple languages, traditions, and influences.</p><p>\"There's a freshness to the writing coming from young Filipinos today,\" notes literary critic Dr. Sarah Johnson. \"They're drawing from their multicultural heritage while addressing universal themes in ways that resonate with readers worldwide.\"</p><p>Several UCLM-SHS alumni have recently published works with major international presses, including Maria Luisa Garcia's award-winning novel \"Archipelago of Dreams\" and Rafael Mendoza's poetry collection \"Borrowed Tongues.\"</p><p>Both writers credit their high school literary training for helping them develop their unique voices. \"At UCLM-SHS, we were encouraged to embrace our cultural complexity rather than simplify it,\" Garcia recalls. \"That's what gives Filipino writing its distinctive character.\"</p>",
                    views: 78,
                    image_url: "https://via.placeholder.com/400x300?text=Filipino+Youth+Writers"
                },
                {
                    id: 6,
                    title: "Why Filipino Literature Deserves Greater Recognition in Global Academia",
                    category: "Literary",
                    author: "Dr. Isabella Cruz",
                    author_title: "Professor of Philippine Literature",
                    created_at: "2025-03-20",
                    content: "<p>Despite its rich literary tradition and unique cultural perspective, Filipino literature remains underrepresented in global academic curricula and literary discourse.</p><p>This oversight represents not just a disservice to Filipino writers but a significant gap in the world's understanding of Southeast Asian literary traditions and postcolonial expression.</p><p>The Philippines' complex historyâ€”shaped by indigenous cultures, Spanish colonization, American occupation, and Japanese invasionâ€”has produced literature that offers valuable insights into questions of identity, language, and power that are relevant far beyond its shores.</p><p>Contemporary Filipino literature, with its navigation of multiple languages and cultural influences, provides a model for understanding the increasingly globalized and hybrid nature of modern identity.</p><p>Academic institutions worldwide would benefit from incorporating more Filipino literary works into their curricula, not as exotic additions but as essential texts that contribute to our understanding of world literature and human experience.</p>",
                    views: 110,
                    image_url: "https://via.placeholder.com/400x300?text=Filipino+Literature+Academia"
                },
                {
                    id: 7,
                    title: "The Evolving Landscape of Student Journalism in the Philippines",
                    category: "Literary",
                    author: "Marco Bonifacio",
                    author_title: "Media Studies Researcher",
                    created_at: "2025-03-19",
                    content: "<p>Student journalism in the Philippines has undergone significant transformation in recent years, adapting to technological changes while continuing its tradition of social engagement.</p><p>Historically, student publications have played a crucial role in Philippine social movements, from the propaganda movement of the late 19th century to the resistance against the Marcos dictatorship.</p><p>Today's student journalists face new challenges, including the spread of misinformation online, decreasing attention spans, and the need to master multimedia storytelling.</p><p>Despite these challenges, student publications like Ang Silakbo continue to serve as training grounds for critical thinking and civic engagement, helping young Filipinos develop the skills needed to participate meaningfully in democratic discourse.</p><p>The most successful student publications have embraced digital platforms while maintaining their commitment to journalistic integrity and community service, demonstrating that adaptation need not come at the expense of core values.</p>",
                    views: 95,
                    image_url: "https://via.placeholder.com/400x300?text=Student+Journalism"
                },
                {
                    id: 8,
                    title: "Beyond English and Filipino: The Case for Multilingual Education",
                    category: "Literary",
                    author: "Gabriela Reyes",
                    author_title: "Educational Policy Advocate",
                    created_at: "2025-03-18",
                    content: "<p>While the Philippine educational system officially recognizes both Filipino and English as languages of instruction, this bilingual approach fails to reflect the country's true linguistic diversity.</p><p>With over 180 languages spoken across the archipelago, many students begin their education at a disadvantage when forced to learn in languages that are not spoken in their homes.</p><p>Research consistently shows that children learn most effectively when initially taught in their mother tongue, yet many regional languages remain marginalized in formal education.</p><p>A truly inclusive educational system would incorporate mother tongue-based multilingual education in the early years, gradually transitioning to Filipino and English while maintaining support for regional languages.</p><p>Such an approach would not only improve learning outcomes but would help preserve the Philippines' linguistic heritage, which represents an invaluable cultural resource increasingly threatened by globalization.</p>",
                    views: 88,
                    image_url: "https://via.placeholder.com/400x300?text=Multilingual+Education"
                }
            ];

            allPosts = samplePosts;
        }
        
        // Simulate loading delay for skeleton loaders
        setTimeout(() => {
            // Update dynamic sections
            updateDynamicSections();
                        // Apply initial filter
                        filterPosts('article');
            
            // Check URL parameters for direct article access
            checkUrlParams();
        }, 1000); // 1 second delay to show skeleton loaders

    } catch (error) {
        // Show error message in posts container
        postsContainer.innerHTML = `
            <div style="grid-column: 1 / -1; text-align: center; padding: 2rem; color: #D33;">
                <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="margin: 0 auto 1rem;">
                    <circle cx="12" cy="12" r="10"></circle>
                    <line x1="12" y1="8" x2="12" y2="12"></line>
                    <line x1="12" y1="16" x2="12.01" y2="16"></line>
                </svg>
                <h3 style="margin-bottom: 0.5rem; font-size: 1.5rem;">Error loading articles</h3>
                <p>${error.message || 'Unknown error'}</p>
            </div>
        `;
        loadMoreBtn.style.display = 'none';
        console.error("Error fetching posts:", error);
        
        // Hide skeleton loaders
        isLoading = false;
    }
}

// Function to check URL parameters and open article if needed
function checkUrlParams() {
    const urlParams = new URLSearchParams(window.location.search);
    const postId = urlParams.get('post');

    if (postId && allPosts.length > 0) {
        const post = allPosts.find(p => p.id == postId);
        if (post) {
            openArticle(postId);
        }
    }
}

// Event Listeners
document.addEventListener('DOMContentLoaded', () => {
    // Initialize AOS animations
    AOS.init({
        once: true,
        offset: 100,
        easing: 'ease-out-cubic'
    });

    // Fetch posts
    fetchPosts();

    // Load more button
    loadMoreBtn.addEventListener('click', () => {
        const filteredPosts = allPosts.filter(post => post.category.toLowerCase() === currentFilter);
        loadMoreBtn.innerHTML = `
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="animate-spin">
                <circle cx="12" cy="12" r="10"></circle>
                <path d="M12 6v6l4 2"></path>
            </svg>
            Loading...
        `;
        
        // Simulate loading delay
        setTimeout(() => {
            loadMorePosts(filteredPosts);
            loadMoreBtn.innerHTML = `
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <polyline points="7 13 12 18 17 13"></polyline>
                    <polyline points="7 6 12 11 17 6"></polyline>
                </svg>
                Load More Articles
            `;
        }, 500);
    });

    // Close modal
    closeModal.addEventListener('click', closeArticleModal);

    // Mobile close modal
    mobileCloseModal.addEventListener('click', closeArticleModal);

    // Close modal when clicking outside
    articleModal.addEventListener('click', (e) => {
        if (e.target === articleModal) {
            closeArticleModal();
        }
    });

    // Search toggle
    searchToggle.addEventListener('click', () => {
        searchOverlay.classList.add('active');
        searchOverlay.querySelector('.search-input').focus();
    });

    // Search close
    searchClose.addEventListener('click', () => {
        searchOverlay.classList.remove('active');
    });

    // Search form
    const searchForm = document.querySelector('.search-form');
    if (searchForm) {
        searchForm.addEventListener('submit', (e) => {
            e.preventDefault();
            const query = searchForm.querySelector('.search-input').value.trim();
            
            if (query.length > 0) {
                searchPosts(query);
                searchOverlay.classList.remove('active');
            }
        });
    }

    // Mobile menu
    mobileMenuBtn.addEventListener('click', () => {
        mobileMenu.classList.add('active');
        mobileMenuOverlay.classList.add('active');
        document.body.style.overflow = 'hidden';
    });

    // Mobile menu close
    mobileMenuClose.addEventListener('click', () => {
        mobileMenu.classList.remove('active');
        mobileMenuOverlay.classList.remove('active');
        document.body.style.overflow = 'auto';
    });

    // Mobile menu overlay
    mobileMenuOverlay.addEventListener('click', () => {
        mobileMenu.classList.remove('active');
        mobileMenuOverlay.classList.remove('active');
        document.body.style.overflow = 'auto';
    });

    // Mobile category links
    const mobileCategoryLinks = document.querySelectorAll('.mobile-category-link');
    mobileCategoryLinks.forEach(link => {
        link.addEventListener('click', (e) => {
            e.preventDefault();
            const filter = link.dataset.filter;
            filterPosts(filter);
            mobileMenu.classList.remove('active');
            mobileMenuOverlay.classList.remove('active');
            document.body.style.overflow = 'auto';
        });
    });

    // Desktop category links
    const navLinks = document.querySelectorAll('.nav-link');
    navLinks.forEach(link => {
        link.addEventListener('click', (e) => {
            e.preventDefault();
            
            // Remove active class from all links
            navLinks.forEach(l => l.classList.remove('active'));
            
            // Add active class to clicked link
            link.classList.add('active');
            
            // Get category from text content
            const linkText = link.textContent.toLowerCase();
            let filter = 'article'; // Default
            
            if (linkText === 'literary') filter = 'literary';
            else if (linkText === 'feature') filter = 'feature';
            else if (linkText === 'silak-salitaan') filter = 'silak';
            else if (linkText === 'photostory') filter = 'photostory';
            
            // Only filter if not on home, about, or contact
            if (!['home', 'about', 'contact'].includes(linkText)) {
                filterPosts(filter);
            }
        });
    });

    // Newsletter forms
    const newsletterForms = document.querySelectorAll('.newsletter-form');
    newsletterForms.forEach(form => {
        form.addEventListener('submit', (e) => {
            e.preventDefault();
            const emailInput = form.querySelector('.newsletter-input');
            const email = emailInput.value.trim();
            
            if (email && isValidEmail(email)) {
                // Show success message
                const successMessage = document.createElement('div');
                successMessage.className = 'newsletter-success';
                successMessage.textContent = 'Thank you for subscribing!';
                successMessage.style.color = 'var(--success)';
                successMessage.style.marginTop = '0.5rem';
                
                // Replace form with success message
                form.innerHTML = '';
                form.appendChild(successMessage);
            } else {
                // Show error message
                let errorMessage = form.querySelector('.newsletter-error');
                
                if (!errorMessage) {
                    errorMessage = document.createElement('div');
                    errorMessage.className = 'newsletter-error';
                    errorMessage.style.color = '#D33';
                    errorMessage.style.marginTop = '0.5rem';
                    form.appendChild(errorMessage);
                }
                
                errorMessage.textContent = 'Please enter a valid email address.';
            }
        });
    });

    // Close modal when pressing Escape key
    document.addEventListener('keydown', (e) => {
        if (e.key === 'Escape') {
            if (searchOverlay.classList.contains('active')) {
                searchOverlay.classList.remove('active');
            } else if (articleModal.style.display === 'block') {
                closeArticleModal();
            } else if (mobileMenu.classList.contains('active')) {
                mobileMenu.classList.remove('active');
                mobileMenuOverlay.classList.remove('active');
                document.body.style.overflow = 'auto';
            }
        }
    });

    // Handle browser back/forward buttons
    window.addEventListener('popstate', (e) => {
        if (articleModal.style.display === 'block') {
            closeArticleModal();
        } else {
            checkUrlParams();
        }
    });
});
</script>
</body>
</html>
