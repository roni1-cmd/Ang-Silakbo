<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ANG SILAKBO - Admin Portal</title>
    <link rel="icon" href="SILAKBO (1).png">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&family=Merriweather:wght@300;400;700&family=Playfair+Display:wght@400;500;600;700;800&family=Source+Sans+Pro:wght@300;400;600;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <style>
        /* Modern Variables with Original Color Scheme */
        :root {
            --primary: #e65100;
            --primary-light: #ff833a;
            --primary-dark: #ac1900;
            --secondary: #ff9e80;
            --secondary-light: #ffd0b0;
            --secondary-dark: #c96f53;
            
            --success: #4caf50;
            --warning: #ff9800;
            --danger: #f44336;
            --info: #2196f3;
            
            --background: #0a0a0a;
            --surface: rgba(255, 255, 255, 0.05);
            --surface-hover: rgba(255, 255, 255, 0.1);
            --surface-active: rgba(255, 255, 255, 0.15);
            --glass: rgba(255, 255, 255, 0.08);
            --glass-border: rgba(255, 255, 255, 0.2);
            
            --text-primary: #ffffff;
            --text-secondary: #e0e0e0;
            --text-tertiary: #b0b0b0;
            --text-muted: #808080;
            
            --border: rgba(255, 255, 255, 0.1);
            --shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            --shadow-lg: 0 20px 40px rgba(0, 0, 0, 0.4);
            --shadow-xl: 0 25px 50px rgba(0, 0, 0, 0.5);
            --glow: 0 0 20px rgba(230, 81, 0, 0.3);
            --glow-strong: 0 0 40px rgba(230, 81, 0, 0.5);
            
            --radius: 12px;
            --radius-lg: 16px;
            --radius-xl: 20px;
            
            --spacing-xs: 4px;
            --spacing-sm: 8px;
            --spacing-md: 12px;
            --spacing-lg: 16px;
            --spacing-xl: 24px;
            --spacing-2xl: 32px;
            --spacing-3xl: 48px;
            
            --transition: all 0.2s ease;
            --transition-slow: all 0.3s ease;
            
            --header-height: 64px;
            --content-max-width: 1400px;

            --font-title: 'Poppins', sans-serif;
            --font-heading: 'Playfair Display', serif;
            --font-body: 'Poppins', sans-serif;
            --font-accent: 'Merriweather', serif;
            --font-secondary: 'Source Sans Pro', sans-serif;
        }

        /* Light Mode */
        .light {
            --background: #f8fafc;
            --surface: rgba(255, 255, 255, 0.8);
            --surface-hover: rgba(255, 255, 255, 0.9);
            --surface-active: rgba(255, 255, 255, 1);
            --glass: rgba(255, 255, 255, 0.7);
            --glass-border: rgba(255, 255, 255, 0.8);
            
            --text-primary: #1a1a1a;
            --text-secondary: #4a4a4a;
            --text-tertiary: #6a6a6a;
            --text-muted: #9a9a9a;
            
            --border: rgba(0, 0, 0, 0.1);
            --shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            --shadow-lg: 0 20px 40px rgba(0, 0, 0, 0.15);
            --shadow-xl: 0 25px 50px rgba(0, 0, 0, 0.2);
        }

        /* Reset & Base */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: var(--font-body);
            background: linear-gradient(135deg, #0a0a0a 0%, #1a1a1a 50%, #0f0f0f 100%);
            background-attachment: fixed;
            color: var(--text-primary);
            line-height: 1.6;
            overflow-x: hidden;
            transition: var(--transition);
            min-height: 100vh;
        }

        body.light {
            background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 50%, #f1f5f9 100%);
        }

        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(circle at 20% 80%, rgba(230, 81, 0, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(255, 131, 58, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 40% 40%, rgba(172, 25, 0, 0.05) 0%, transparent 50%);
            z-index: -1;
            pointer-events: none;
        }

        /* Page Transition */
        .page-transition {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, var(--primary), var(--primary-light));
            z-index: 9999;
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            visibility: hidden;
            transition: all 0.5s ease;
        }

        .page-transition.active {
            opacity: 1;
            visibility: visible;
        }

        .transition-content {
            text-align: center;
            color: white;
        }

        .transition-spinner {
            width: 60px;
            height: 60px;
            border: 4px solid rgba(255, 255, 255, 0.3);
            border-top: 4px solid white;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto var(--spacing-lg);
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* App Container */
        .app-container {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        /* Header */
        .header {
            height: var(--header-height);
            background: var(--glass);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border-bottom: 1px solid var(--glass-border);
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: var(--shadow);
        }

        .header-container {
            max-width: var(--content-max-width);
            margin: 0 auto;
            padding: 0 var(--spacing-xl);
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .header-left {
            display: flex;
            align-items: center;
            gap: var(--spacing-xl);
        }

        .logo {
            display: flex;
            align-items: center;
            gap: var(--spacing-md);
            font-weight: 800;
            font-size: 1.2rem;
            color: var(--primary);
            font-family: var(--font-title);
            letter-spacing: -0.5px;
            text-decoration: none;
            transition: var(--transition);
        }

        .logo:hover {
            transform: scale(1.02);
        }

        .logo img {
            width: 36px;
            height: 36px;
            border-radius: var(--radius);
            object-fit: cover;
            border: 2px solid var(--primary);
        }

        .main-nav {
            display: flex;
            align-items: center;
            gap: var(--spacing-xs);
        }

        .nav-item {
            position: relative;
        }

        .nav-link {
            display: flex;
            align-items: center;
            gap: var(--spacing-sm);
            padding: var(--spacing-sm) var(--spacing-md);
            border-radius: var(--radius-lg);
            color: var(--text-secondary);
            font-weight: 600;
            font-size: 0.85rem;
            text-decoration: none;
            transition: var(--transition);
            font-family: var(--font-body);
        }

        .nav-link:hover {
            color: var(--primary);
            background: var(--surface-hover);
        }

        .nav-link.active {
            color: white;
            background: linear-gradient(135deg, var(--primary), var(--primary-light));
        }

        .nav-dropdown {
            position: absolute;
            top: calc(100% + 8px);
            left: 0;
            min-width: 240px;
            background: var(--background);
            border: 1px solid var(--glass-border);
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-xl);
            padding: var(--spacing-sm);
            opacity: 0;
            visibility: hidden;
            transform: translateY(-10px);
            transition: var(--transition);
            z-index: 200;
        }

        .nav-item:hover .nav-dropdown,
        .nav-dropdown:hover {
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
        }

        .dropdown-item {
            display: flex;
            align-items: center;
            gap: var(--spacing-md);
            padding: var(--spacing-sm) var(--spacing-md);
            border-radius: var(--radius);
            color: var(--text-secondary);
            text-decoration: none;
            transition: var(--transition);
            font-family: var(--font-body);
            font-weight: 500;
            font-size: 0.85rem;
        }

        .dropdown-item:hover {
            background: var(--surface-hover);
            color: var(--primary);
        }

        .dropdown-divider {
            height: 1px;
            background: var(--border);
            margin: var(--spacing-sm) 0;
        }

        .header-right {
            display: flex;
            align-items: center;
            gap: var(--spacing-md);
        }

        .header-actions {
            display: flex;
            align-items: center;
            gap: var(--spacing-sm);
        }

        .action-btn {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            background: var(--glass);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border: 1px solid var(--glass-border);
            color: var(--text-secondary);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: var(--transition);
            position: relative;
            font-size: 1rem;
        }

        .action-btn:hover {
            background: var(--primary);
            color: white;
            border-color: var(--primary);
        }

        .notification-badge {
            position: absolute;
            top: -4px;
            right: -4px;
            width: 16px;
            height: 16px;
            background: linear-gradient(135deg, var(--danger), #ff6b6b);
            color: white;
            border-radius: 50%;
            font-size: 0.6rem;
            font-weight: 700;
            display: flex;
            align-items: center;
            justify-content: center;
            border: 2px solid var(--background);
        }

        .user-menu {
            display: flex;
            align-items: center;
            gap: var(--spacing-sm);
            padding: var(--spacing-xs) var(--spacing-sm);
            border-radius: var(--radius-lg);
            background: var(--glass);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border: 1px solid var(--glass-border);
            cursor: pointer;
            transition: var(--transition);
            position: relative;
        }

        .user-menu:hover {
            background: var(--surface-hover);
        }

        .user-avatar {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            object-fit: cover;
            border: 2px solid var(--primary);
        }

        .user-info {
            display: none;
        }

        @media (min-width: 768px) {
            .user-info {
                display: block;
            }
        }

        .user-name {
            font-weight: 700;
            font-size: 0.8rem;
            color: var(--text-primary);
            font-family: var(--font-title);
        }

        .user-role {
            font-size: 0.7rem;
            color: var(--text-tertiary);
            font-family: var(--font-secondary);
        }

        /* User Dropdown */
        .user-dropdown {
            position: absolute;
            top: calc(100% + 8px);
            right: 0;
            min-width: 200px;
            background: var(--background);
            border: 1px solid var(--glass-border);
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-xl);
            padding: var(--spacing-sm);
            opacity: 0;
            visibility: hidden;
            transform: translateY(-10px);
            transition: var(--transition);
            z-index: 200;
        }

        .user-menu:hover .user-dropdown,
        .user-dropdown:hover {
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
        }

        .user-dropdown-item {
            display: flex;
            align-items: center;
            gap: var(--spacing-md);
            padding: var(--spacing-sm) var(--spacing-md);
            border-radius: var(--radius);
            color: var(--text-secondary);
            text-decoration: none;
            transition: var(--transition);
            font-family: var(--font-body);
            font-weight: 500;
            cursor: pointer;
            font-size: 0.85rem;
        }

        .user-dropdown-item:hover {
            background: var(--surface-hover);
            color: var(--primary);
        }

        .user-dropdown-item.danger:hover {
            background: rgba(244, 67, 54, 0.1);
            color: var(--danger);
        }

        /* Mobile Navigation Toggle */
        .mobile-nav-toggle {
            display: none;
            background: none;
            border: none;
            color: var(--text-primary);
            font-size: 1.2rem;
            cursor: pointer;
            padding: var(--spacing-sm);
            border-radius: var(--radius);
            transition: var(--transition);
        }

        .mobile-nav-toggle:hover {
            background: var(--surface-hover);
            color: var(--primary);
        }

        @media (max-width: 992px) {
            .main-nav {
                display: none;
            }
            
            .mobile-nav-toggle {
                display: block;
            }
        }

        /* Main Content */
        .main-content {
            flex: 1;
            padding: var(--spacing-xl);
            max-width: var(--content-max-width);
            margin: 0 auto;
            width: 100%;
        }

        .page-header {
            margin-bottom: var(--spacing-2xl);
            text-align: left;
        }

        .page-title {
            font-size: clamp(1.5rem, 3vw, 2rem);
            font-weight: 800;
            margin-bottom: var(--spacing-xs);
            background: linear-gradient(135deg, var(--primary), var(--primary-light));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            font-family: var(--font-heading);
            letter-spacing: -1px;
            line-height: 1.2;
        }

        .page-subtitle {
            font-size: 0.9rem;
            color: var(--text-secondary);
            font-family: var(--font-accent);
            font-weight: 300;
        }

        /* Enhanced Stats Grid */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
            gap: var(--spacing-lg);
            margin-bottom: var(--spacing-2xl);
        }

        .stat-card {
            background: var(--glass);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid var(--glass-border);
            border-radius: var(--radius-lg);
            padding: var(--spacing-lg);
            position: relative;
            overflow: hidden;
            transition: var(--transition);
            cursor: pointer;
        }

        .stat-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, var(--primary), var(--primary-light), var(--secondary));
        }

        .stat-card:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
            background: var(--surface-hover);
        }

        .stat-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: var(--spacing-md);
        }

        .stat-icon {
            width: 48px;
            height: 48px;
            border-radius: var(--radius);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.4rem;
            background: linear-gradient(135deg, var(--primary), var(--primary-light));
            color: white;
            transition: var(--transition);
        }

        .stat-trend {
            display: flex;
            align-items: center;
            gap: var(--spacing-xs);
            font-size: 0.75rem;
            font-weight: 700;
            padding: var(--spacing-xs) var(--spacing-sm);
            border-radius: var(--radius-lg);
            font-family: var(--font-body);
        }

        .trend-up {
            background: linear-gradient(135deg, rgba(76, 175, 80, 0.2), rgba(76, 175, 80, 0.1));
            color: var(--success);
            border: 1px solid rgba(76, 175, 80, 0.3);
        }

        .trend-down {
            background: linear-gradient(135deg, rgba(244, 67, 54, 0.2), rgba(244, 67, 54, 0.1));
            color: var(--danger);
            border: 1px solid rgba(244, 67, 54, 0.3);
        }

        .stat-content {
            position: relative;
            z-index: 2;
        }

        .stat-value {
            font-size: clamp(1.5rem, 3vw, 2rem);
            font-weight: 900;
            margin-bottom: var(--spacing-xs);
            color: var(--text-primary);
            font-family: var(--font-title);
            letter-spacing: -1px;
        }

        .stat-label {
            font-size: 0.9rem;
            color: var(--text-secondary);
            font-weight: 600;
            font-family: var(--font-body);
            margin-bottom: var(--spacing-xs);
        }

        .stat-description {
            font-size: 0.75rem;
            color: var(--text-tertiary);
            font-family: var(--font-secondary);
            opacity: 0.8;
        }

        /* Dashboard Grid */
        .dashboard-grid {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: var(--spacing-xl);
            margin-bottom: var(--spacing-2xl);
        }

        @media (max-width: 1200px) {
            .dashboard-grid {
                grid-template-columns: 1fr;
            }
        }

        /* Cards */
        .card {
            background: var(--glass);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid var(--glass-border);
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow);
            overflow: hidden;
            transition: var(--transition);
        }

        .card:hover {
            box-shadow: var(--shadow-lg);
        }

        .card-header {
            padding: var(--spacing-lg);
            border-bottom: 1px solid var(--border);
            display: flex;
            align-items: center;
            justify-content: space-between;
            background: linear-gradient(135deg, var(--surface), var(--surface-hover));
        }

        .card-title {
            font-size: 1.2rem;
            font-weight: 700;
            color: var(--text-primary);
            font-family: var(--font-heading);
        }

        .card-content {
            padding: var(--spacing-lg);
        }

        /* Chart Tabs */
        .chart-tabs {
            display: flex;
            gap: var(--spacing-xs);
        }

        .chart-tab {
            padding: var(--spacing-xs) var(--spacing-md);
            border: 1px solid var(--border);
            background: var(--surface);
            color: var(--text-secondary);
            border-radius: var(--radius-lg);
            cursor: pointer;
            font-weight: 600;
            font-size: 0.8rem;
            transition: var(--transition);
            font-family: var(--font-body);
        }

        .chart-tab.active,
        .chart-tab:hover {
            background: linear-gradient(135deg, var(--primary), var(--primary-light));
            color: white;
            border-color: var(--primary);
        }

        .chart-container {
            height: 350px;
            position: relative;
            margin-top: var(--spacing-lg);
        }

        /* Real-time Activity Feed */
        .activity-list {
            list-style: none;
            max-height: 450px;
            overflow-y: auto;
        }

        .activity-item {
            display: flex;
            gap: var(--spacing-md);
            padding: var(--spacing-md) 0;
            border-bottom: 1px solid var(--border);
            transition: var(--transition);
            border-radius: var(--radius);
        }

        .activity-item:hover {
            background: var(--surface-hover);
            padding-left: var(--spacing-md);
            padding-right: var(--spacing-md);
        }

        .activity-item:last-child {
            border-bottom: none;
        }

        .activity-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1rem;
            flex-shrink: 0;
            transition: var(--transition);
        }

        .activity-icon-primary {
            background: linear-gradient(135deg, rgba(230, 81, 0, 0.2), rgba(230, 81, 0, 0.1));
            color: var(--primary);
            border: 1px solid rgba(230, 81, 0, 0.3);
        }

        .activity-icon-success {
            background: linear-gradient(135deg, rgba(76, 175, 80, 0.2), rgba(76, 175, 80, 0.1));
            color: var(--success);
            border: 1px solid rgba(76, 175, 80, 0.3);
        }

        .activity-icon-warning {
            background: linear-gradient(135deg, rgba(255, 152, 0, 0.2), rgba(255, 152, 0, 0.1));
            color: var(--warning);
            border: 1px solid rgba(255, 152, 0, 0.3);
        }

        .activity-icon-info {
            background: linear-gradient(135deg, rgba(33, 150, 243, 0.2), rgba(33, 150, 243, 0.1));
            color: var(--info);
            border: 1px solid rgba(33, 150, 243, 0.3);
        }

        .activity-details {
            flex: 1;
        }

        .activity-title {
            font-weight: 700;
            margin-bottom: var(--spacing-xs);
            color: var(--text-primary);
            font-family: var(--font-heading);
            font-size: 0.9rem;
        }

        .activity-description {
            color: var(--text-secondary);
            margin-bottom: var(--spacing-xs);
            font-family: var(--font-body);
            font-size: 0.8rem;
        }

        .activity-time {
            color: var(--text-tertiary);
            font-size: 0.75rem;
            display: flex;
            align-items: center;
            gap: var(--spacing-xs);
            font-family: var(--font-secondary);
        }

        .activity-status {
            display: inline-flex;
            align-items: center;
            gap: var(--spacing-xs);
            padding: var(--spacing-xs) var(--spacing-sm);
            border-radius: var(--radius);
            font-size: 0.7rem;
            font-weight: 600;
            margin-top: var(--spacing-xs);
        }

        .status-new {
            background: rgba(33, 150, 243, 0.1);
            color: var(--info);
            border: 1px solid rgba(33, 150, 243, 0.3);
        }

        .status-approved {
            background: rgba(76, 175, 80, 0.1);
            color: var(--success);
            border: 1px solid rgba(76, 175, 80, 0.3);
        }

        .status-pending {
            background: rgba(255, 152, 0, 0.1);
            color: var(--warning);
            border: 1px solid rgba(255, 152, 0, 0.3);
        }

        /* Profile Page */
        .profile-container {
            max-width: 800px;
            margin: 0 auto;
        }

        .profile-header {
            background: var(--glass);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid var(--glass-border);
            border-radius: var(--radius-lg);
            padding: var(--spacing-2xl);
            margin-bottom: var(--spacing-xl);
            text-align: center;
        }

        .profile-avatar-large {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            object-fit: cover;
            border: 4px solid var(--primary);
            margin: 0 auto var(--spacing-lg);
        }

        .profile-form {
            background: var(--glass);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid var(--glass-border);
            border-radius: var(--radius-lg);
            padding: var(--spacing-xl);
        }

        .form-group {
            margin-bottom: var(--spacing-lg);
        }

        .form-label {
            display: block;
            margin-bottom: var(--spacing-sm);
            font-weight: 600;
            color: var(--text-primary);
            font-size: 0.9rem;
        }

        .form-input {
            width: 100%;
            padding: var(--spacing-md);
            border: 1px solid var(--border);
            border-radius: var(--radius);
            background: var(--surface);
            color: var(--text-primary);
            font-family: var(--font-body);
            transition: var(--transition);
        }

        .form-input:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 2px rgba(230, 81, 0, 0.2);
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: var(--spacing-lg);
        }

        @media (max-width: 768px) {
            .form-row {
                grid-template-columns: 1fr;
            }
        }

        .btn {
            padding: var(--spacing-md) var(--spacing-xl);
            border: none;
            border-radius: var(--radius);
            font-weight: 600;
            font-family: var(--font-body);
            cursor: pointer;
            transition: var(--transition);
            display: inline-flex;
            align-items: center;
            gap: var(--spacing-sm);
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--primary), var(--primary-light));
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-1px);
            box-shadow: var(--shadow-lg);
        }

        .btn-secondary {
            background: var(--surface);
            color: var(--text-primary);
            border: 1px solid var(--border);
        }

        .btn-secondary:hover {
            background: var(--surface-hover);
        }

        /* Preferences Page */
        .preferences-section {
            background: var(--glass);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid var(--glass-border);
            border-radius: var(--radius-lg);
            padding: var(--spacing-xl);
            margin-bottom: var(--spacing-xl);
        }

        .section-title {
            font-size: 1.2rem;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: var(--spacing-lg);
            font-family: var(--font-heading);
        }

        .preference-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: var(--spacing-md) 0;
            border-bottom: 1px solid var(--border);
        }

        .preference-item:last-child {
            border-bottom: none;
        }

        .preference-info {
            flex: 1;
        }

        .preference-title {
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: var(--spacing-xs);
        }

        .preference-description {
            font-size: 0.85rem;
            color: var(--text-secondary);
        }

        .toggle-switch {
            position: relative;
            width: 50px;
            height: 24px;
            background: var(--surface);
            border-radius: 12px;
            cursor: pointer;
            transition: var(--transition);
            border: 1px solid var(--border);
        }

        .toggle-switch.active {
            background: var(--primary);
        }

        .toggle-switch::after {
            content: '';
            position: absolute;
            top: 2px;
            left: 2px;
            width: 18px;
            height: 18px;
            background: white;
            border-radius: 50%;
            transition: var(--transition);
        }

        .toggle-switch.active::after {
            transform: translateX(26px);
        }

        /* AI Assistant */
        .ai-assistant-fab {
            position: fixed;
            bottom: var(--spacing-xl);
            right: var(--spacing-xl);
            width: 56px;
            height: 56px;
            background: linear-gradient(135deg, var(--primary), var(--primary-light));
            color: white;
            border: none;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.3rem;
            box-shadow: var(--shadow-lg);
            z-index: 100;
            transition: var(--transition);
        }

        .ai-assistant-fab:hover {
            transform: scale(1.05);
        }

        .ai-assistant-panel {
            position: fixed;
            bottom: var(--spacing-xl);
            right: var(--spacing-xl);
            width: 380px;
            height: 500px;
            background: var(--glass);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid var(--glass-border);
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-xl);
            z-index: 100;
            display: none;
            flex-direction: column;
            overflow: hidden;
        }

        .ai-assistant-header {
            padding: var(--spacing-lg);
            border-bottom: 1px solid var(--border);
            display: flex;
            align-items: center;
            justify-content: space-between;
            background: linear-gradient(135deg, var(--primary), var(--primary-light));
            color: white;
        }

        .ai-assistant-title {
            display: flex;
            align-items: center;
            gap: var(--spacing-md);
            font-weight: 700;
            font-family: var(--font-title);
        }

        .ai-assistant-avatar {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            object-fit: cover;
            border: 2px solid white;
        }

        .ai-assistant-close {
            background: none;
            border: none;
            color: white;
            cursor: pointer;
            padding: var(--spacing-sm);
            border-radius: var(--radius);
            transition: var(--transition);
            font-size: 1.1rem;
        }

        .ai-assistant-close:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        .ai-assistant-content {
            flex: 1;
            padding: var(--spacing-lg);
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: var(--spacing-md);
        }

        .ai-message {
            display: flex;
            gap: var(--spacing-md);
            max-width: 85%;
        }

        .ai-message.user {
            align-self: flex-end;
            flex-direction: row-reverse;
        }

        .ai-message-avatar {
            width: 28px;
            height: 28px;
            border-radius: 50%;
            object-fit: cover;
            flex-shrink: 0;
        }

        .ai-message-bubble {
            padding: var(--spacing-md);
            border-radius: var(--radius-lg);
            font-size: 0.85rem;
            line-height: 1.5;
            font-family: var(--font-body);
        }

        .ai-message:not(.user) .ai-message-bubble {
            background: var(--surface-hover);
            color: var(--text-primary);
        }

        .ai-message.user .ai-message-bubble {
            background: linear-gradient(135deg, var(--primary), var(--primary-light));
            color: white;
        }

        .ai-assistant-input {
            padding: var(--spacing-lg);
            border-top: 1px solid var(--border);
            display: flex;
            gap: var(--spacing-md);
            background: var(--surface);
        }

        .ai-input {
            flex: 1;
            padding: var(--spacing-md);
            border: 1px solid var(--border);
            border-radius: var(--radius-lg);
            background: var(--surface-hover);
            color: var(--text-primary);
            resize: none;
            outline: none;
            font-family: var(--font-body);
            transition: var(--transition);
        }

        .ai-input:focus {
            border-color: var(--primary);
            box-shadow: 0 0 0 2px rgba(230, 81, 0, 0.2);
        }

        .ai-send-btn {
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, var(--primary), var(--primary-light));
            color: white;
            border: none;
            border-radius: var(--radius);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: var(--transition);
            font-size: 1rem;
        }

        .ai-send-btn:hover {
            transform: scale(1.05);
        }

        .ai-send-btn:disabled {
            background: var(--text-muted);
            cursor: not-allowed;
            transform: none;
        }

        /* Toast Notifications */
        .toast-container {
            position: fixed;
            top: var(--spacing-xl);
            right: var(--spacing-xl);
            z-index: 200;
            display: flex;
            flex-direction: column;
            gap: var(--spacing-md);
        }

        .toast {
            background: var(--glass);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid var(--glass-border);
            border-radius: var(--radius-lg);
            padding: var(--spacing-lg);
            box-shadow: var(--shadow-xl);
            display: flex;
            align-items: center;
            gap: var(--spacing-md);
            min-width: 300px;
            animation: slideInRight 0.3s ease;
        }

        .toast-icon {
            width: 36px;
            height: 36px;
            border-radius: var(--radius);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.1rem;
            flex-shrink: 0;
        }

        .toast-success .toast-icon {
            background: linear-gradient(135deg, rgba(76, 175, 80, 0.2), rgba(76, 175, 80, 0.1));
            color: var(--success);
        }

        .toast-error .toast-icon {
            background: linear-gradient(135deg, rgba(244, 67, 54, 0.2), rgba(244, 67, 54, 0.1));
            color: var(--danger);
        }

        .toast-info .toast-icon {
            background: linear-gradient(135deg, rgba(33, 150, 243, 0.2), rgba(33, 150, 243, 0.1));
            color: var(--info);
        }

        .toast-content {
            flex: 1;
        }

        .toast-title {
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: var(--spacing-xs);
            font-family: var(--font-heading);
        }

        .toast-message {
            color: var(--text-secondary);
            font-size: 0.85rem;
            font-family: var(--font-body);
        }

        .toast-close {
            background: none;
            border: none;
            color: var(--text-tertiary);
            cursor: pointer;
            padding: var(--spacing-xs);
            border-radius: var(--radius);
            transition: var(--transition);
            font-size: 1rem;
        }

        .toast-close:hover {
            background: var(--surface-hover);
            color: var(--text-primary);
        }

        /* Loading States */
        .skeleton {
            background: linear-gradient(90deg, var(--surface) 25%, var(--surface-hover) 50%, var(--surface) 75%);
            background-size: 200% 100%;
            animation: loading 1.5s infinite;
            border-radius: var(--radius);
        }

        /* Animations */
        @keyframes loading {
            0% { background-position: 200% 0; }
            100% { background-position: -200% 0; }
        }

        @keyframes slideInRight {
            from {
                opacity: 0;
                transform: translateX(100%);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        /* Mobile Navigation */
        .mobile-nav {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--glass);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            z-index: 300;
            display: none;
            flex-direction: column;
            padding: var(--spacing-xl);
            overflow-y: auto;
        }

        .mobile-nav-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: var(--spacing-2xl);
        }

        .mobile-nav-close {
            background: none;
            border: none;
            color: var(--text-primary);
            font-size: 1.3rem;
            cursor: pointer;
            padding: var(--spacing-sm);
            border-radius: var(--radius);
            transition: var(--transition);
        }

        .mobile-nav-close:hover {
            background: var(--surface-hover);
            color: var(--primary);
        }

        .mobile-nav-menu {
            display: flex;
            flex-direction: column;
            gap: var(--spacing-md);
        }

        .mobile-nav-item {
            padding: var(--spacing-lg);
            border-radius: var(--radius-lg);
            color: var(--text-primary);
            font-weight: 600;
            text-decoration: none;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: var(--spacing-lg);
            font-family: var(--font-body);
            font-size: 1rem;
        }

        .mobile-nav-item:hover,
        .mobile-nav-item.active {
            background: linear-gradient(135deg, var(--primary), var(--primary-light));
            color: white;
        }

        .mobile-nav-item .material-icons {
            width: 24px;
            text-align: center;
            font-size: 1.1rem;
        }

        /* Overlay */
        .overlay {
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(5px);
            z-index: 250;
            display: none;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .header-container {
                padding: 0 var(--spacing-lg);
            }
            
            .main-content {
                padding: var(--spacing-lg);
            }
            
            .stats-grid {
                grid-template-columns: 1fr;
                gap: var(--spacing-lg);
            }
            
            .dashboard-grid {
                grid-template-columns: 1fr;
                gap: var(--spacing-lg);
            }
            
            .ai-assistant-panel {
                width: calc(100vw - 2 * var(--spacing-lg));
                height: calc(100vh - 2 * var(--spacing-lg));
                bottom: var(--spacing-lg);
                right: var(--spacing-lg);
            }
            
            .toast-container {
                right: var(--spacing-lg);
                left: var(--spacing-lg);
            }
            
            .toast {
                min-width: auto;
                width: 100%;
            }
        }

        /* Utilities */
        .hidden { display: none !important; }
        .flex { display: flex; }
        .items-center { align-items: center; }
        .justify-between { justify-content: space-between; }
        .gap-2 { gap: var(--spacing-sm); }
        .gap-4 { gap: var(--spacing-md); }
        .text-sm { font-size: 0.875rem; }
        .font-medium { font-weight: 500; }
        .font-semibold { font-weight: 600; }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .spinner {
            width: 30px;
            height: 30px;
            border: 3px solid var(--border);
            border-top-color: var(--primary);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
    </style>
</head>
<body>
    <!-- Page Transition -->
    <div class="page-transition" id="pageTransition">
        <div class="transition-content">
            <div class="transition-spinner"></div>
            <div style="font-size: 1.1rem; font-weight: 600;">Loading...</div>
        </div>
    </div>

    <div class="app-container">
        <!-- Header -->
        <header class="header">
            <div class="header-container">
                <div class="header-left">
                    <a href="#" class="logo">
                        <img src="SILAKBO (1).png" alt="ANG SILAKBO">
                        <span>ANG SILAKBO</span>
                    </a>
                    
                    <nav class="main-nav">
                        <div class="nav-item">
                            <a href="#" class="nav-link active" id="dashboardLink">
                                <span class="material-icons">dashboard</span>
                                <span>Dashboard</span>
                            </a>
                        </div>
                        <div class="nav-item">
                            <a href="#" class="nav-link" id="applicantsLink">
                                <span class="material-icons">people</span>
                                <span>Applicants</span>
                            </a>
                        </div>
                        <div class="nav-item">
                            <a href="notifications.html" class="nav-link">
                                <span class="material-icons">help_outline</span>
                                <span>Inquiries</span>
                            </a>
                        </div>
                        <div class="nav-item">
                            <a href="#" class="nav-link">
                                <span class="material-icons">settings</span>
                                <span>Management</span>
                                <span class="material-icons">expand_more</span>
                            </a>
                            <div class="nav-dropdown">
                                <a href="Chat.html" class="dropdown-item">
                                    <span class="material-icons">chat</span>
                                    <span>Communications</span>
                                </a>
                                <a href="Silakbo Post.html" class="dropdown-item">
                                    <span class="material-icons">edit</span>
                                    <span>Content Management</span>
                                </a>
                                <a href="Feedback.html" class="dropdown-item">
                                    <span class="material-icons">assessment</span>
                                    <span>Reports</span>
                                </a>
                                <div class="dropdown-divider"></div>
                                <a href="calendar2.html" class="dropdown-item">
                                    <span class="material-icons">event</span>
                                    <span>Calendar</span>
                                </a>
                                <a href="submission.html" class="dropdown-item">
                                    <span class="material-icons">description</span>
                                    <span>Submissions</span>
                                </a>
                                <a href="server.html" class="dropdown-item">
                                    <span class="material-icons">task</span>
                                    <span>Task Manager</span>
                                </a>
                            </div>
                        </div>
                    </nav>
                    
                    <button class="mobile-nav-toggle" id="mobileNavToggle">
                        <span class="material-icons">menu</span>
                    </button>
                </div>
                
                <div class="header-right">
                    <div class="header-actions">
                        <button class="action-btn" id="themeToggle" title="Toggle Theme">
                            <span class="material-icons">dark_mode</span>
                        </button>
                    </div>
                    
                    <div class="user-menu" id="userMenu">
                        <img src="SILAKBO (1).png" alt="User" class="user-avatar">
                        <div class="user-info">
                            <div class="user-name">Admin User</div>
                            <div class="user-role" id="userRole">Administrator</div>
                        </div>
                        <span class="material-icons">expand_more</span>
                        <div class="user-dropdown">
                            <div class="user-dropdown-item" id="profileBtn">
                                <span class="material-icons">person</span>
                                <span>Profile Settings</span>
                            </div>
                            <div class="user-dropdown-item" id="preferencesBtn">
                                <span class="material-icons">tune</span>
                                <span>Preferences</span>
                            </div>
                            <div class="user-dropdown-item" id="helpBtn">
                                <span class="material-icons">help_outline</span>
                                <span>Help & Support</span>
                            </div>
                            <div class="dropdown-divider"></div>
                            <div class="user-dropdown-item danger" id="logoutBtn">
                                <span class="material-icons">logout</span>
                                <span>Logout</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <main class="main-content" id="mainContent">
            <!-- Content will be loaded here -->
        </main>
    </div>

    <!-- Mobile Navigation -->
    <div class="mobile-nav" id="mobileNav">
        <div class="mobile-nav-header">
            <div class="logo">
                <img src="SILAKBO (1).png" alt="ANG SILAKBO">
                <span>ANG SILAKBO</span>
            </div>
            <button class="mobile-nav-close" id="mobileNavClose">
                <span class="material-icons">close</span>
            </button>
        </div>
        <div class="mobile-nav-menu">
            <a href="#" class="mobile-nav-item active" id="mobileDashboardLink">
                <span class="material-icons">dashboard</span>
                <span>Dashboard</span>
            </a>
            <a href="#" class="mobile-nav-item" id="mobileApplicantsLink">
                <span class="material-icons">people</span>
                <span>Applicants</span>
            </a>
            <a href="notifications.html" class="mobile-nav-item">
                <span class="material-icons">help_outline</span>
                <span>Inquiries</span>
            </a>
            <a href="Chat.html" class="mobile-nav-item">
                <span class="material-icons">chat</span>
                <span>Communications</span>
            </a>
            <a href="Silakbo Post.html" class="mobile-nav-item">
                <span class="material-icons">edit</span>
                <span>Content Management</span>
            </a>
            <a href="Feedback.html" class="mobile-nav-item">
                <span class="material-icons">assessment</span>
                <span>Reports</span>
            </a>
            <a href="calendar2.html" class="mobile-nav-item">
                <span class="material-icons">event</span>
                <span>Calendar</span>
            </a>
            <a href="submission.html" class="mobile-nav-item">
                <span class="material-icons">description</span>
                <span>Submissions</span>
            </a>
            <a href="server.html" class="mobile-nav-item">
                <span class="material-icons">task</span>
                <span>Task Manager</span>
            </a>
            <a href="#" class="mobile-nav-item" id="mobileLogoutBtn">
                <span class="material-icons">logout</span>
                <span>Logout</span>
            </a>
        </div>
    </div>

    <!-- AI Assistant -->
    <button class="ai-assistant-fab" id="aiAssistantFab">
        <span class="material-icons">smart_toy</span>
    </button>

    <div class="ai-assistant-panel" id="aiAssistantPanel">
        <div class="ai-assistant-header">
            <div class="ai-assistant-title">
                <img src="Coral.png" alt="CoralVIA" class="ai-assistant-avatar">
                <span>CoralVIA Assistant</span>
            </div>
            <button class="ai-assistant-close" id="aiAssistantClose">
                <span class="material-icons">close</span>
            </button>
        </div>
        <div class="ai-assistant-content" id="aiAssistantContent">
            <div class="ai-message">
                <img src="Coral.png" alt="CoralVIA" class="ai-message-avatar">
                <div class="ai-message-bubble">
                    Hello! I'm CoralVIA, your AI assistant. How can I help you with your administrative tasks today?
                </div>
            </div>
        </div>
        <div class="ai-assistant-input">
            <textarea class="ai-input" id="aiInput" placeholder="Type your message..." rows="2"></textarea>
            <button class="ai-send-btn" id="aiSendBtn">
                <span class="material-icons">send</span>
            </button>
        </div>
    </div>

    <!-- Toast Container -->
    <div class="toast-container" id="toastContainer"></div>

    <!-- Overlay -->
    <div class="overlay" id="overlay"></div>

    <script type="module">
        // Import Firebase modules
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.22.1/firebase-app.js";
        import { getAuth, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/9.22.1/firebase-auth.js";
        import { getDatabase, ref, get, onValue, push, set, update, query, orderByChild, limitToLast } from "https://www.gstatic.com/firebasejs/9.22.1/firebase-database.js";

        // Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyDSe2c9-8xqShoHEW-D7BXXAyD5N9uXWEs",
            authDomain: "ang-silakbo.firebaseapp.com",
            databaseURL: "https://ang-silakbo-default-rtdb.firebaseio.com",
            projectId: "ang-silakbo",
            storageBucket: "ang-silakbo.appspot.com",
            messagingSenderId: "1006400633782",
            appId: "1:1006400633782:web:ef4a93c1d445cb825b9f17",
            measurementId: "G-TSDTG2YJ94"
        };

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const db = getDatabase(app);

        // Cohere API key
        const COHERE_API_KEY = "z99HUO9u2vu9E4YTRRfeue6hbdkdOcM8zWQDfbcq";

        // DOM Elements
        const mainContent = document.getElementById('mainContent');
        const themeToggle = document.getElementById('themeToggle');
        const userMenu = document.getElementById('userMenu');
        const userRole = document.getElementById('userRole');
        const dashboardLink = document.getElementById('dashboardLink');
        const applicantsLink = document.getElementById('applicantsLink');
        const mobileNavToggle = document.getElementById('mobileNavToggle');
        const mobileNav = document.getElementById('mobileNav');
        const mobileNavClose = document.getElementById('mobileNavClose');
        const mobileDashboardLink = document.getElementById('mobileDashboardLink');
        const mobileApplicantsLink = document.getElementById('mobileApplicantsLink');
        const mobileLogoutBtn = document.getElementById('mobileLogoutBtn');
        const profileBtn = document.getElementById('profileBtn');
        const preferencesBtn = document.getElementById('preferencesBtn');
        const helpBtn = document.getElementById('helpBtn');
        const logoutBtn = document.getElementById('logoutBtn');
        const aiAssistantFab = document.getElementById('aiAssistantFab');
        const aiAssistantPanel = document.getElementById('aiAssistantPanel');
        const aiAssistantClose = document.getElementById('aiAssistantClose');
        const aiAssistantContent = document.getElementById('aiAssistantContent');
        const aiInput = document.getElementById('aiInput');
        const aiSendBtn = document.getElementById('aiSendBtn');
        const toastContainer = document.getElementById('toastContainer');
        const overlay = document.getElementById('overlay');
        const pageTransition = document.getElementById('pageTransition');

        // State
        let currentUser = null;
        let isDarkMode = localStorage.getItem('darkMode') !== 'false';
        let chartInstance = null;
        let isAiTyping = false;
        let activityListeners = [];
        let userPreferences = {};

        // Initialize theme
        if (!isDarkMode) {
            document.body.classList.add('light');
            themeToggle.innerHTML = '<span class="material-icons">light_mode</span>';
        }

        // Load user preferences
        function loadUserPreferences() {
            if (currentUser) {
                const prefsRef = ref(db, `userPreferences/${currentUser.uid}`);
                onValue(prefsRef, (snapshot) => {
                    const data = snapshot.val();
                    if (data) {
                        userPreferences = data;
                        applyUserPreferences();
                    } else {
                        // Set default preferences
                        userPreferences = {
                            theme: 'dark',
                            notifications: true,
                            autoSave: true,
                            language: 'en',
                            emailNotifications: true,
                            soundEffects: false
                        };
                        saveUserPreferences();
                    }
                });
            }
        }

        function saveUserPreferences() {
            if (currentUser) {
                const prefsRef = ref(db, `userPreferences/${currentUser.uid}`);
                set(prefsRef, userPreferences);
            }
        }

        function applyUserPreferences() {
            // Apply theme
            if (userPreferences.theme === 'light') {
                document.body.classList.add('light');
                themeToggle.innerHTML = '<span class="material-icons">light_mode</span>';
                isDarkMode = false;
            } else {
                document.body.classList.remove('light');
                themeToggle.innerHTML = '<span class="material-icons">dark_mode</span>';
                isDarkMode = true;
            }
        }

        // Page Transition Functions
        function showPageTransition() {
            pageTransition.classList.add('active');
        }

        function hidePageTransition() {
            setTimeout(() => {
                pageTransition.classList.remove('active');
            }, 500);
        }

        function navigateWithTransition(url) {
            showPageTransition();
            setTimeout(() => {
                window.location.href = url;
            }, 800);
        }

        // Utility Functions
        function showToast(type, title, message) {
            const toast = document.createElement('div');
            toast.className = `toast toast-${type}`;
            
            const icons = {
                success: 'check_circle',
                error: 'error',
                info: 'info',
                warning: 'warning'
            };
            
            toast.innerHTML = `
                <div class="toast-icon">
                    <span class="material-icons">${icons[type]}</span>
                </div>
                <div class="toast-content">
                    <div class="toast-title">${title}</div>
                    <div class="toast-message">${message}</div>
                </div>
                <button class="toast-close">
                    <span class="material-icons">close</span>
                </button>
            `;
            
            toastContainer.appendChild(toast);
            
            // Auto remove
            setTimeout(() => {
                toast.style.animation = 'slideOutRight 0.3s ease forwards';
                setTimeout(() => toast.remove(), 300);
            }, 5000);
            
            // Close button
            toast.querySelector('.toast-close').addEventListener('click', () => {
                toast.style.animation = 'slideOutRight 0.3s ease forwards';
                setTimeout(() => toast.remove(), 300);
            });
        }

        function formatTimeAgo(date) {
            const seconds = Math.floor((new Date() - date) / 1000);
            
            const intervals = [
                { label: 'year', seconds: 31536000 },
                { label: 'month', seconds: 2592000 },
                { label: 'day', seconds: 86400 },
                { label: 'hour', seconds: 3600 },
                { label: 'minute', seconds: 60 }
            ];
            
            for (const interval of intervals) {
                const count = Math.floor(seconds / interval.seconds);
                if (count > 0) {
                    return `${count} ${interval.label}${count !== 1 ? 's' : ''} ago`;
                }
            }
            
            return 'just now';
        }

        function getPersonalizedGreeting(email) {
            const hour = new Date().getHours();
            let timeGreeting = '';
            
            if (hour < 12) timeGreeting = 'Good morning';
            else if (hour < 18) timeGreeting = 'Good afternoon';
            else timeGreeting = 'Good evening';
            
            const greetings = {
                'angsilakbo1@uclm.com': `${timeGreeting}, Miss Queenie!`,
                'angsilakbo2@uclm.com': `${timeGreeting}, Miss June!`,
                'angsilakbo3@uclm.com': `${timeGreeting}, Miss Diana!`
            };
            
            return greetings[email] || `${timeGreeting}, Admin!`;
        }

        // Dashboard Functions
        function showDashboard() {
            mainContent.innerHTML = `
                <div class="page-header">
                    <h1 class="page-title" id="welcomeMessage">Welcome to ANG SILAKBO</h1>
                    <p class="page-subtitle" id="currentDateTime">Loading...</p>
                </div>
                
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-header">
                            <div class="stat-icon">
                                <span class="material-icons">description</span>
                            </div>
                            <div class="stat-trend trend-up">
                                <span class="material-icons">trending_up</span> 12%
                            </div>
                        </div>
                        <div class="stat-content">
                            <div class="stat-value" id="totalApplications">0</div>
                            <div class="stat-label">Total Applications</div>
                            <div class="stat-description">All-time application submissions</div>
                        </div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-header">
                            <div class="stat-icon">
                                <span class="material-icons">person_add</span>
                            </div>
                            <div class="stat-trend trend-up">
                                <span class="material-icons">trending_up</span> 8%
                            </div>
                        </div>
                        <div class="stat-content">
                            <div class="stat-value" id="newApplications">0</div>
                            <div class="stat-label">New This Week</div>
                            <div class="stat-description">Recent application submissions</div>
                        </div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-header">
                            <div class="stat-icon">
                                <span class="material-icons">people</span>
                            </div>
                            <div class="stat-trend trend-up">
                                <span class="material-icons">trending_up</span> 5%
                            </div>
                        </div>
                        <div class="stat-content">
                            <div class="stat-value" id="activeUsers">0</div>
                            <div class="stat-label">Active Users</div>
                            <div class="stat-description">Monthly active members</div>
                        </div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-header">
                            <div class="stat-icon">
                                <span class="material-icons">trending_up</span>
                            </div>
                            <div class="stat-trend trend-up">
                                <span class="material-icons">trending_up</span> 15%
                            </div>
                        </div>
                        <div class="stat-content">
                            <div class="stat-value" id="engagement">0</div>
                            <div class="stat-label">Engagement Rate</div>
                            <div class="stat-description">User interaction percentage</div>
                        </div>
                    </div>
                </div>
                
                <div class="dashboard-grid">
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">Application Analytics</h3>
                            <div class="chart-tabs">
                                <button class="chart-tab active" data-period="weekly">Weekly</button>
                                <button class="chart-tab" data-period="monthly">Monthly</button>
                                <button class="chart-tab" data-period="yearly">Yearly</button>
                            </div>
                        </div>
                        <div class="card-content">
                            <div class="chart-container">
                                <canvas id="applicationsChart"></canvas>
                            </div>
                        </div>
                    </div>
                    
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">Real-time Activity & Notifications</h3>
                        </div>
                        <div class="card-content">
                            <ul class="activity-list" id="activityList">
                                <!-- Activity items will be loaded dynamically -->
                            </ul>
                        </div>
                    </div>
                </div>
            `;

            // Update welcome message and time
            updateWelcomeMessage();
            updateDateTime();
            
            // Load dashboard data
            loadDashboardData();
            loadRealTimeActivity();
            
            // Initialize chart
            initializeChart();
            
            // Add chart tab listeners
            document.querySelectorAll('.chart-tab').forEach(tab => {
                tab.addEventListener('click', function() {
                    document.querySelectorAll('.chart-tab').forEach(t => t.classList.remove('active'));
                    this.classList.add('active');
                    updateChart(this.dataset.period);
                });
            });
        }

        function showProfile() {
            mainContent.innerHTML = `
                <div class="profile-container">
                    <div class="profile-header">
                        <img src="SILAKBO (1).png" alt="Profile" class="profile-avatar-large">
                        <h2 style="font-family: var(--font-heading); font-size: 1.8rem; margin-bottom: var(--spacing-sm);">Profile Settings</h2>
                        <p style="color: var(--text-secondary);">Manage your account information and preferences</p>
                    </div>
                    
                    <div class="profile-form">
                        <h3 style="font-family: var(--font-heading); font-size: 1.3rem; margin-bottom: var(--spacing-lg);">Personal Information</h3>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label class="form-label">First Name</label>
                                <input type="text" class="form-input" id="firstName" value="Admin">
                            </div>
                            <div class="form-group">
                                <label class="form-label">Last Name</label>
                                <input type="text" class="form-input" id="lastName" value="User">
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">Email Address</label>
                            <input type="email" class="form-input" id="email" value="${currentUser?.email || ''}" readonly>
                        </div>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label class="form-label">Phone Number</label>
                                <input type="tel" class="form-input" id="phone" placeholder="+63 XXX XXX XXXX">
                            </div>
                            <div class="form-group">
                                <label class="form-label">Department</label>
                                <input type="text" class="form-input" id="department" value="Administration">
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">Bio</label>
                            <textarea class="form-input" id="bio" rows="4" placeholder="Tell us about yourself..."></textarea>
                        </div>
                        
                        <div style="display: flex; gap: var(--spacing-md); margin-top: var(--spacing-xl);">
                            <button class="btn btn-primary" id="saveProfileBtn">
                                <span class="material-icons">save</span>
                                Save Changes
                            </button>
                            <button class="btn btn-secondary" id="cancelProfileBtn">
                                <span class="material-icons">cancel</span>
                                Cancel
                            </button>
                        </div>
                    </div>
                </div>
            `;

            // Add event listeners
            document.getElementById('saveProfileBtn').addEventListener('click', saveProfile);
            document.getElementById('cancelProfileBtn').addEventListener('click', showDashboard);
        }

        function showPreferences() {
            mainContent.innerHTML = `
                <div class="profile-container">
                    <div class="page-header">
                        <h1 class="page-title">Preferences</h1>
                        <p class="page-subtitle">Customize your dashboard experience</p>
                    </div>
                    
                    <div class="preferences-section">
                        <h3 class="section-title">Appearance</h3>
                        
                        <div class="preference-item">
                            <div class="preference-info">
                                <div class="preference-title">Dark Mode</div>
                                <div class="preference-description">Switch between light and dark themes</div>
                            </div>
                            <div class="toggle-switch ${userPreferences.theme === 'dark' ? 'active' : ''}" id="themeToggleSwitch"></div>
                        </div>
                    
                    </div>
                    
                    <div class="preferences-section">
                        <h3 class="section-title">Notifications</h3>
                        
                        <div class="preference-item">
                            <div class="preference-info">
                                <div class="preference-title">Push Notifications</div>
                                <div class="preference-description">Receive real-time notifications in the dashboard</div>
                            </div>
                            <div class="toggle-switch ${userPreferences.notifications ? 'active' : ''}" id="notificationsToggle"></div>
                        </div>
                        
                        
                        <div class="preference-item">
                            <div class="preference-info">
                                <div class="preference-title">Email Notifications</div>
                                <div class="preference-description">Receive notifications via email</div>
                            </div>
                            <div class="toggle-switch ${userPreferences.emailNotifications ? 'active' : ''}" id="emailNotificationsToggle"></div>
                        </div>
                        
                        <div class="preference-item">
                            <div class="preference-info">
                                <div class="preference-title">Sound Effects</div>
                                <div class="preference-description">Play sounds for notifications and actions</div>
                            </div>
                            <div class="toggle-switch ${userPreferences.soundEffects ? 'active' : ''}" id="soundToggle"></div>
                        </div>
                    </div>
                    
                    <div class="preferences-section">
                        <h3 class="section-title">System</h3>
                        
                        <div class="preference-item">
                            <div class="preference-info">
                                <div class="preference-title">Auto Save</div>
                                <div class="preference-description">Automatically save changes as you work</div>
                            </div>
                            <div class="toggle-switch ${userPreferences.autoSave ? 'active' : ''}" id="autoSaveToggle"></div>
                        </div>
                    </div>
                    
                    <div style="margin-top: var(--spacing-2xl);">
                        <button class="btn btn-primary" id="savePreferencesBtn">
                            <span class="material-icons">save</span>
                            Save Preferences
                        </button>
                        <button class="btn btn-secondary" id="resetPreferencesBtn" style="margin-left: var(--spacing-md);">
                            <span class="material-icons">refresh</span>
                            Reset to Default
                        </button>
                    </div>
                </div>
            `;

            // Add toggle event listeners
            setupPreferenceToggles();
        }

        function setupPreferenceToggles() {
            const toggles = [
                { id: 'themeToggleSwitch', pref: 'theme', values: ['light', 'dark'] },
                { id: 'notificationsToggle', pref: 'notifications' },
                { id: 'emailNotificationsToggle', pref: 'emailNotifications' },
                { id: 'soundToggle', pref: 'soundEffects' },
                { id: 'autoSaveToggle', pref: 'autoSave' }
            ];

            toggles.forEach(toggle => {
                const element = document.getElementById(toggle.id);
                if (element) {
                    element.addEventListener('click', () => {
                        element.classList.toggle('active');
                        
                        if (toggle.values) {
                            userPreferences[toggle.pref] = element.classList.contains('active') ? toggle.values[1] : toggle.values[0];
                        } else {
                            userPreferences[toggle.pref] = element.classList.contains('active');
                        }

                        // Apply theme change immediately
                        if (toggle.pref === 'theme') {
                            applyUserPreferences();
                        }
                    });
                }
            });

            // Save and reset buttons
            document.getElementById('savePreferencesBtn').addEventListener('click', () => {
                saveUserPreferences();
                showToast('success', 'Preferences Saved', 'Your preferences have been saved successfully');
            });

            document.getElementById('resetPreferencesBtn').addEventListener('click', () => {
                userPreferences = {
                    theme: 'dark',
                    notifications: true,
                    autoSave: true,
                    language: 'en',
                    emailNotifications: true,
                    soundEffects: false
                };
                saveUserPreferences();
                showPreferences();
                showToast('info', 'Preferences Reset', 'Preferences have been reset to default values');
            });
        }

        function saveProfile() {
            const profileData = {
                firstName: document.getElementById('firstName').value,
                lastName: document.getElementById('lastName').value,
                phone: document.getElementById('phone').value,
                department: document.getElementById('department').value,
                bio: document.getElementById('bio').value,
                updatedAt: Date.now()
            };

            if (currentUser) {
                const profileRef = ref(db, `userProfiles/${currentUser.uid}`);
                set(profileRef, profileData).then(() => {
                    showToast('success', 'Profile Updated', 'Your profile has been saved successfully');
                }).catch((error) => {
                    showToast('error', 'Error', 'Failed to save profile');
                    console.error('Error saving profile:', error);
                });
            }
        }

        function updateWelcomeMessage() {
            const welcomeMessage = document.getElementById('welcomeMessage');
            if (currentUser && welcomeMessage) {
                welcomeMessage.textContent = getPersonalizedGreeting(currentUser.email);
            }
        }

        function updateDateTime() {
            const dateTimeElement = document.getElementById('currentDateTime');
            if (dateTimeElement) {
                const now = new Date();
                const options = { 
                    weekday: 'long', 
                    year: 'numeric', 
                    month: 'long', 
                    day: 'numeric',
                    hour: '2-digit', 
                    minute: '2-digit'
                };
                dateTimeElement.textContent = now.toLocaleDateString('en-US', options);
            }
        }

        function loadDashboardData() {
            // Simulate loading with real Firebase data
            const applicationsRef = ref(db, 'applications');
            const usersRef = ref(db, 'users');
            
            // Total applications
            onValue(applicationsRef, (snapshot) => {
                const total = snapshot.size || 0;
                animateCounter('totalApplications', total);
            });
            
            // New applications this week
            onValue(applicationsRef, (snapshot) => {
                const now = Date.now();
                const weekAgo = now - 7 * 24 * 60 * 60 * 1000;
                const data = snapshot.val() || {};
                const newApps = Object.values(data).filter(app => app.timestamp > weekAgo).length;
                animateCounter('newApplications', newApps);
            });
            
            // Active users
            onValue(usersRef, (snapshot) => {
                const now = Date.now();
                const monthAgo = now - 30 * 24 * 60 * 60 * 1000;
                const data = snapshot.val() || {};
                const activeUsers = Object.values(data).filter(user => user.lastLogin > monthAgo).length;
                animateCounter('activeUsers', activeUsers);
            });
            
            // Engagement rate (simulated)
            setTimeout(() => {
                animateCounter('engagement', 87, '%');
            }, 1000);
        }

        function animateCounter(elementId, target, suffix = '') {
            const element = document.getElementById(elementId);
            if (!element) return;
            
            let current = 0;
            const increment = target / 50;
            const timer = setInterval(() => {
                current += increment;
                if (current >= target) {
                    current = target;
                    clearInterval(timer);
                }
                element.textContent = Math.floor(current) + suffix;
            }, 30);
        }

        function loadRealTimeActivity() {
            const activityList = document.getElementById('activityList');
            if (!activityList) return;

            // Show loading state
            activityList.innerHTML = `
                <div class="flex items-center justify-center p-4">
                    <div class="spinner" style="width: 30px; height: 30px; border: 3px solid var(--border); border-top-color: var(--primary); border-radius: 50%; animation: spin 1s linear infinite;"></div>
                    <div class="ml-3">Loading activities...</div>
                </div>
            `;

            // Clear existing listeners
            activityListeners.forEach(unsubscribe => unsubscribe());
            activityListeners = [];

            // Listen to real-time changes in notifications
            const notificationsRef = ref(db, 'notifications');
            const notificationsListener = onValue(query(notificationsRef, orderByChild('timestamp'), limitToLast(10)), (snapshot) => {
                const activities = [];
                if (snapshot.exists()) {
                    snapshot.forEach((childSnapshot) => {
                        const data = childSnapshot.val();
                        activities.push({
                            type: 'info',
                            icon: 'notifications',
                            title: 'System Notification',
                            description: data.message || 'New notification',
                            timestamp: data.timestamp || Date.now(),
                            status: data.read ? 'approved' : 'new'
                        });
                    });
                }
                
                // If we have notifications, update the list
                if (activities.length > 0) {
                    updateActivityList(activities.reverse());
                } else {
                    // Add sample activities if no notifications
                    addSampleActivities();
                }
            }, (error) => {
                console.error("Error fetching notifications:", error);
                // Show error or fallback to sample activities
                addSampleActivities();
            });
            
            activityListeners.push(notificationsListener);
        }

        function addSampleActivities() {
            const activityList = document.getElementById('activityList');
            if (!activityList) return;
            
            const sampleActivities = [
                {
                    type: 'success',
                    icon: 'check_circle',
                    title: 'Application Approved',
                    description: 'Maria Garcia was approved for Editor position',
                    timestamp: Date.now() - 30 * 60 * 1000,
                    status: 'approved'
                },
                {
                    type: 'warning',
                    icon: 'help_outline',
                    title: 'New Inquiry',
                    description: 'Sarah Smith asked about membership requirements',
                    timestamp: Date.now() - 2 * 60 * 60 * 1000,
                    status: 'pending'
                },
                {
                    type: 'info',
                    icon: 'event',
                    title: 'Event Scheduled',
                    description: 'Monthly team meeting scheduled for next week',
                    timestamp: Date.now() - 4 * 60 * 60 * 1000,
                    status: 'new'
                }
            ];

            updateActivityList(sampleActivities);
        }

        function updateActivityList(activities) {
            const activityList = document.getElementById('activityList');
            if (!activityList) return;

            activityList.innerHTML = activities.map((activity, index) => `
                <li class="activity-item" 
                    data-type="${activity.type}" 
                    data-icon="${activity.icon}" 
                    data-timestamp="${activity.timestamp}"
                    data-status="${activity.status}">
                    <div class="activity-icon activity-icon-${activity.type}">
                        <span class="material-icons">${activity.icon}</span>
                    </div>
                    <div class="activity-details">
                        <div class="activity-title">${activity.title}</div>
                        <div class="activity-description">${activity.description}</div>
                        <div class="activity-time">
                            <span class="material-icons">schedule</span>
                            ${formatTimeAgo(new Date(activity.timestamp))}
                        </div>
                        <div class="activity-status status-${activity.status}">
                            <span class="material-icons">
                                ${activity.status === 'new' ? 'fiber_new' : 
                                  activity.status === 'approved' ? 'check_circle' : 'pending'}
                            </span>
                            ${activity.status.charAt(0).toUpperCase() + activity.status.slice(1)}
                        </div>
                    </div>
                </li>
            `).join('');
        }

        function initializeChart() {
            const ctx = document.getElementById('applicationsChart');
            if (!ctx) return;
            
            // Load Chart.js if not available
            if (typeof Chart === 'undefined') {
                const script = document.createElement('script');
                script.src = 'https://cdn.jsdelivr.net/npm/chart.js';
                script.onload = () => createChart(ctx);
                document.head.appendChild(script);
            } else {
                createChart(ctx);
            }
        }

        function createChart(ctx) {
            const data = {
                labels: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'],
                datasets: [{
                    label: 'Applications',
                    data: [12, 19, 3, 5, 2, 3, 9],
                    borderColor: '#e65100',
                    backgroundColor: 'rgba(230, 81, 0, 0.1)',
                    tension: 0.4,
                    fill: true,
                    pointBackgroundColor: '#e65100',
                    pointBorderColor: '#ffffff',
                    pointBorderWidth: 2,
                    pointRadius: 6,
                    pointHoverRadius: 8
                }]
            };
            
            chartInstance = new Chart(ctx, {
                type: 'line',
                data: data,
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: false
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            grid: {
                                color: 'rgba(255, 255, 255, 0.1)'
                            },
                            ticks: {
                                color: 'var(--text-secondary)'
                            }
                        },
                        x: {
                            grid: {
                                display: false
                            },
                            ticks: {
                                color: 'var(--text-secondary)'
                            }
                        }
                    },
                    interaction: {
                        intersect: false,
                        mode: 'index'
                    }
                }
            });
        }

        function updateChart(period) {
            if (!chartInstance) return;
            
            const data = {
                weekly: {
                    labels: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'],
                    values: [12, 19, 3, 5, 2, 3, 9]
                },
                monthly: {
                    labels: ['Week 1', 'Week 2', 'Week 3', 'Week 4'],
                    values: [45, 52, 38, 41]
                },
                yearly: {
                    labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun'],
                    values: [120, 150, 180, 140, 160, 190]
                }
            };
            
            chartInstance.data.labels = data[period].labels;
            chartInstance.data.datasets[0].data = data[period].values;
            chartInstance.update('active');
        }

        // AI Assistant Functions
        function toggleAiAssistant() {
            if (aiAssistantPanel.style.display === 'flex') {
                aiAssistantPanel.style.display = 'none';
            } else {
                aiAssistantPanel.style.display = 'flex';
            }
        }

        function sendMessageToAI() {
            const message = aiInput.value.trim();
            if (!message || isAiTyping) return;
            
            // Add user message
            addMessageToChat('user', message);
            aiInput.value = '';
            
            // Show typing indicator
            isAiTyping = true;
            aiSendBtn.disabled = true;
            
            // Call Cohere API
            callCohereAPI(message);
        }

        function addMessageToChat(sender, message) {
            const messageElement = document.createElement('div');
            messageElement.className = `ai-message ${sender}`;
            
            const avatar = sender === 'user' ? 'SILAKBO (1).png' : 'Coral.png';
            
            messageElement.innerHTML = `
                <img src="${avatar}" alt="${sender}" class="ai-message-avatar">
                <div class="ai-message-bubble">${message}</div>
            `;
            
            aiAssistantContent.appendChild(messageElement);
            aiAssistantContent.scrollTop = aiAssistantContent.scrollHeight;
        }

        async function callCohereAPI(message) {
            try {
                const response = await fetch('https://api.cohere.ai/v1/chat', {
                    method: 'POST',
                    headers: {
                        'Authorization': `Bearer ${COHERE_API_KEY}`,
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        message: message,
                        model: 'command',
                        preamble: "You are CoralVIA, an AI assistant for the ANG SILAKBO admin panel. You help administrators with analytics, reports, and administrative tasks. Be helpful, concise, and professional.",
                        chat_history: []
                    })
                });
                
                const data = await response.json();
                
                isAiTyping = false;
                aiSendBtn.disabled = false;
                
                if (data.text) {
                    addMessageToChat('ai', data.text);
                } else {
                    addMessageToChat('ai', "I'm sorry, I couldn't process your request at the moment. Please try again later.");
                }
            } catch (error) {
                console.error('Error calling Cohere API:', error);
                isAiTyping = false;
                aiSendBtn.disabled = false;
                addMessageToChat('ai', "I'm sorry, there was an error processing your request. Please try again later.");
            }
        }

        // Authentication Functions
        function checkAuthStatus() {
            onAuthStateChanged(auth, (user) => {
                if (user) {
                    currentUser = user;
                    const allowedEmails = [
                        'angsilakbo1@uclm.com',
                        'angsilakbo2@uclm.com',
                        'angsilakbo3@uclm.com'
                    ];
                    
                    if (allowedEmails.includes(user.email)) {
                        userRole.textContent = user.email;
                        loadUserPreferences();
                        showDashboard();
                        hidePageTransition();
                        showToast('success', 'Welcome', 'You have successfully logged in');
                    } else {
                        signOut(auth).then(() => {
                            showToast('error', 'Access Denied', 'You are not authorized to access this panel');
                            setTimeout(() => {
                                navigateWithTransition('Ang Silakbo Login1.html');
                            }, 3000);
                        });
                    }
                } else {
                    showToast('info', 'Authentication Required', 'Please log in to access the admin panel');
                    setTimeout(() => {
                        navigateWithTransition('Ang Silakbo Login1.html');
                    }, 3000);
                }
            });
        }

        function handleLogout() {
            showToast('info', 'Logging Out', 'You are being logged out');
            signOut(auth).then(() => {
                localStorage.removeItem('authToken');
                localStorage.removeItem('adminUser');
                setTimeout(() => {
                    navigateWithTransition('Ang Silakbo Login1.html');
                }, 1500);
            }).catch((error) => {
                console.error("Error signing out:", error);
                showToast('error', 'Error', 'Failed to log out');
            });
        }

        // Event Listeners
        themeToggle.addEventListener('click', () => {
            isDarkMode = !isDarkMode;
            document.body.classList.toggle('light', !isDarkMode);
            themeToggle.innerHTML = isDarkMode ? 
                '<span class="material-icons">dark_mode</span>' : 
                '<span class="material-icons">light_mode</span>';
            
            // Update user preferences
            userPreferences.theme = isDarkMode ? 'dark' : 'light';
            saveUserPreferences();
        });

        mobileNavToggle.addEventListener('click', () => {
            mobileNav.style.display = 'flex';
            overlay.style.display = 'block';
        });

        mobileNavClose.addEventListener('click', () => {
            mobileNav.style.display = 'none';
            overlay.style.display = 'none';
        });

        dashboardLink.addEventListener('click', (e) => {
            e.preventDefault();
            document.querySelectorAll('.nav-link').forEach(link => link.classList.remove('active'));
            dashboardLink.classList.add('active');
            showDashboard();
        });

        mobileDashboardLink.addEventListener('click', (e) => {
            e.preventDefault();
            mobileNav.style.display = 'none';
            overlay.style.display = 'none';
            document.querySelectorAll('.nav-link').forEach(link => link.classList.remove('active'));
            dashboardLink.classList.add('active');
            showDashboard();
        });

        applicantsLink.addEventListener('click', (e) => {
            e.preventDefault();
            navigateWithTransition('Ang Silakbo Registered Applicants.html');
        });

        mobileApplicantsLink.addEventListener('click', (e) => {
            e.preventDefault();
            navigateWithTransition('Ang Silakbo Registered Applicants.html');
        });

        // User dropdown actions
        profileBtn.addEventListener('click', () => {
            showProfile();
        });

        preferencesBtn.addEventListener('click', () => {
            showPreferences();
        });

        helpBtn.addEventListener('click', () => {
            showToast('info', 'Help & Support', 'Help documentation feature coming soon');
        });

        logoutBtn.addEventListener('click', handleLogout);
        mobileLogoutBtn.addEventListener('click', handleLogout);

        aiAssistantFab.addEventListener('click', toggleAiAssistant);
        aiAssistantClose.addEventListener('click', toggleAiAssistant);
        aiSendBtn.addEventListener('click', sendMessageToAI);

        aiInput.addEventListener('keydown', (e) => {
            if (e.key === 'Enter' && !e.shiftKey) {
                e.preventDefault();
                sendMessageToAI();
            }
        });

        overlay.addEventListener('click', () => {
            mobileNav.style.display = 'none';
            overlay.style.display = 'none';
        });

        // Initialize
        showPageTransition();
        checkAuthStatus();
        setInterval(updateDateTime, 60000); // Update time every minute
    </script>
</body>
</html>
